


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Composition &mdash; PsyNeuLink 0.7.5.4+105.g9067cd5 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="_static/pygments.css" type="text/css" /> -->
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Pathway" href="Pathway.html" />
    <link rel="prev" title="LearningFunctions" href="LearningFunctions.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

  <!-- Preload the theme fonts -->

<link rel="preload" href="_static/fonts/FreightSans/freight-sans-book.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/IBMPlexMono/IBMPlexMono-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-medium-italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/IBMPlexMono/IBMPlexMono-SemiBold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<!-- Preload the katex fonts -->

<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Caligraphic-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
</head>

<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://princetonuniversity.github.io/PsyNeuLink/"></a>
<!--      <a class="header-logo"></a>-->
      <div class="main-menu">
        <ul>
          <li>
            <a href="https://github.com/PrincetonUniversity/PsyNeuLink">Github</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>

  </div>
</div>


<body class="psyneulink-body">

   

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="psyneulink-left-menu" id="psyneulink-left-menu">
      <div class="psyneulink-side-scroll">
        <div class="psyneulink-menu psyneulink-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="psyneulink-left-menu-search">
            

            
              
              
                <div class="version">
                  0.7.5.4+105
                </div>
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Welcome to PsyNeuLink </a></li>
<li class="toctree-l1"><a class="reference internal" href="BasicsAndPrimer.html">Basics and Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="QuickReference.html">Quick Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Core.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="Library.html">Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="ContributorsGuide.html">Contributors Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <div class="psyneulink-container">
      <div class="psyneulink-page-level-bar" id="psyneulink-page-level-bar">
        <div class="psyneulink-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="psyneulink-breadcrumbs">
    
      <li>
        <a href="index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
          <li><a href="Core.html">Core</a> &gt;</li>
        
      <li>Composition</li>
    
  </ul>

  
</div>
        </div>

        <div class="psyneulink-shortcuts-wrapper" id="psyneulink-shortcuts-wrapper">
          Shortcuts
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="psyneulink-content-wrap" class="psyneulink-content-wrap">
        <div class="psyneulink-content-left">

        
          
          <div class="rst-content">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="psyneulink-article" class="psyneulink-article">
              
  <div class="section" id="composition">
<h1>Composition<a class="headerlink" href="#composition" title="Permalink to this headline">¶</a></h1>
<div class="section" id="related">
<h2>Related<a class="headerlink" href="#related" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a></li>
<li><a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.PathwayRole" title="psyneulink.core.compositions.pathway.PathwayRole"><code class="xref any py py-class docutils literal"><span class="pre">PathwayRoles</span></code></a></li>
</ul>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="Pathway.html">Pathway</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scheduler.html">Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="Condition.html">Condition</a></li>
</ul>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><em>Subclasses</em></p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="CompositionFunctionApproximator.html">CompositionFunctionApproximator</a></li>
<li class="toctree-l1"><a class="reference internal" href="RegressionCFA.html">RegressionCFA</a></li>
<li class="toctree-l1"><a class="reference internal" href="AutodiffComposition.html">AutodiffComposition</a></li>
</ul>
</div>
<span class="target" id="module-psyneulink.core.compositions.composition"></span><div class="section" id="contents">
<h3>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#composition-overview"><span class="std std-ref">Overview</span></a></li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="#composition-creation"><span class="std std-ref">Creating a Composition</span></a></dt>
<dd><ul class="first last">
<li><a class="reference internal" href="#composition-constructor"><span class="std std-ref">Using the Constructor</span></a></li>
<li><a class="reference internal" href="#composition-addition-methods"><span class="std std-ref">Adding Components and Pathways</span></a>
- <a class="reference internal" href="#composition-component-addition-methods"><span class="std std-ref">Adding Components</span></a>
- <a class="reference internal" href="#composition-pathway-addition-methods"><span class="std std-ref">Adding Pathways</span></a></li>
<li><a class="reference internal" href="#composition-add-nested"><span class="std std-ref">Adding Nested Compositions</span></a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="#composition-structure"><span class="std std-ref">Composition Structure</span></a></dt>
<dd><ul class="first last">
<li><a class="reference internal" href="#composition-graph"><span class="std std-ref">Graph</span></a></li>
<li><a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a></li>
<li><a class="reference internal" href="#composition-nested"><span class="std std-ref">Nested Compositions</span></a></li>
<li><a class="reference internal" href="#composition-pathways"><span class="std std-ref">Pathways</span></a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="#composition-controller"><span class="std std-ref">Controlling a Composition</span></a></dt>
<dd><ul class="first last">
<li><a class="reference internal" href="#composition-controller-assignment"><span class="std std-ref">Assigning a Controller</span></a></li>
<li><a class="reference internal" href="#composition-controller-execution"><span class="std std-ref">Controller Execution</span></a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="#composition-learning"><span class="std std-ref">Learning in a Composition</span></a></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt><a class="reference internal" href="#composition-learning-standard"><span class="std std-ref">Learning Using PsyNeuLink Components</span></a></dt>
<dd><ul class="first last">
<li><a class="reference internal" href="#composition-learning-unsupervised"><span class="std std-ref">Unsupervised Learning</span></a></li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="#composition-learning-supervised"><span class="std std-ref">Supervised Learning</span></a></dt>
<dd><ul class="first last">
<li><a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">Supervised Learning Methods</span></a></li>
<li><a class="reference internal" href="#composition-learning-components"><span class="std std-ref">Supervised Learning Components</span></a></li>
<li><a class="reference internal" href="#composition-learning-execution"><span class="std std-ref">Execution of Learning</span></a></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><a class="reference internal" href="#composition-learning-autodiffcomposition"><span class="std std-ref">Learning Using AutodiffCompositon</span></a></li>
<li><a class="reference internal" href="#composition-learning-udf"><span class="std std-ref">Learning Using UserDefinedFunctions</span></a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="#composition-execution"><span class="std std-ref">Executing a Composition</span></a></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt><a class="reference internal" href="Run.html#composition-execution-inputs"><span class="std std-ref">Inputs</span></a></dt>
<dd><ul class="first last">
<li><a class="reference internal" href="#composition-input-dictionary"><span class="std std-ref">Input Dictionary</span></a></li>
<li><a class="reference internal" href="#composition-programmatic-inputs"><span class="std std-ref">Specifying Inputs Programmatically</span></a></li>
</ul>
</dd>
</dl>
</li>
<li><a class="reference internal" href="#composition-execution-context"><span class="std std-ref">Execution Contexts</span></a></li>
<li><a class="reference internal" href="#composition-compilation"><span class="std std-ref">Compilation</span></a></li>
</ul>
</dd>
</dl>
</li>
<li><a class="reference internal" href="#composition-visualization"><span class="std std-ref">Visualizing a Composition</span></a></li>
<li><a class="reference internal" href="#composition-examples"><span class="std std-ref">Examples</span></a></li>
<li><a class="reference internal" href="#composition-class-reference"><span class="std std-ref">Class Reference</span></a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="overview">
<span id="composition-overview"></span><h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">As of PsyNeuLink 0.7.5, the API for using Compositions for Learning has been slightly changed!
Please see <a class="reference internal" href="RefactoredLearningGuide.html"><span class="doc">this link</span></a> for more details.</p>
</div>
<p>Composition is the base class for objects that combine PsyNeuLink <a class="reference internal" href="Component.html"><span class="doc">Components</span></a> into an executable model.
It defines a common set of attributes possessed, and methods used by all Composition objects.</p>
<p>Composition <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> are <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> and/or nested <a class="reference internal" href="#"><span class="doc">Compositions</span></a>.
<a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> connect pairs of Nodes. The Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.graph" title="psyneulink.core.compositions.composition.Composition.graph"><code class="xref any py py-attr docutils literal"><span class="pre">graph</span></code></a> stores the
structural relationships among the Nodes of a Composition and the Projections that connect them.  The Composition’s
<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.scheduler" title="psyneulink.core.compositions.composition.Composition.scheduler"><code class="xref any py py-attr docutils literal"><span class="pre">scheduler</span></code></a> generates an execution queue based on these structural dependencies, allowing for
other user-specified scheduling and termination conditions to be specified.</p>
</div>
<div class="section" id="creating-a-composition">
<span id="composition-creation"></span><h3>Creating a Composition<a class="headerlink" href="#creating-a-composition" title="Permalink to this headline">¶</a></h3>
<p>A Composition can be created by calling the constructor and specifying <a class="reference internal" href="Component.html"><span class="doc">Components</span></a> to be added, using
either arguments of the constructor and/or methods that allow Components to be added once it has been constructed.</p>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Although Components (Nodes and Projections) can be added individually to a Composition, it is often easier to use
<code class="xref any docutils literal"><span class="pre">Pathways</span></code> to construct a Composition, which in many cases can automaticially construct the
Projections needed without have to specify those explicitly.</p>
</div>
<div class="section" id="using-the-constructor">
<span id="composition-constructor"></span><h4><em>Using the Constructor</em><a class="headerlink" href="#using-the-constructor" title="Permalink to this headline">¶</a></h4>
<p>The following arguments of the Composition’s constructor can be used to add Compnents when it is constructed:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt><strong>nodes</strong></dt>
<dd>adds the specified <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> to the Composition;  this is equivalent to constructing the
Composition and then calling its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_nodes" title="psyneulink.core.compositions.composition.Composition.add_nodes"><code class="xref any py py-meth docutils literal"><span class="pre">add_nodes</span></code></a> method, and takes the same values as the
<strong>nodes</strong> argument of that method.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>projections</strong></dt>
<dd>adds the specified <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> to the Composition;  this is equivalent to constructing the
Composition and then calling its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_projections" title="psyneulink.core.compositions.composition.Composition.add_projections"><code class="xref any py py-meth docutils literal"><span class="pre">add_projections</span></code></a> method, and takes the same
values as the <strong>projections</strong> argument of that method.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>pathways</strong></dt>
<dd>adds one or more <code class="xref any docutils literal"><span class="pre">Pathways</span></code> to the Composition; this is equivalent to constructing the
Composition and then calling its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_pathways" title="psyneulink.core.compositions.composition.Composition.add_pathways"><code class="xref any py py-meth docutils literal"><span class="pre">add_pathways</span></code></a> method, and can use the same forms
of specification as the <strong>pathways</strong> argument of that method.  If any <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathways</span></a> are included, then the constructor’s <strong>disable_learning</strong> argument can be
used to disable learning on those by default (though it will still allow learning to occur on any other
Compositions, either nested within the current one, or within which the current one is nested (see
<a class="reference internal" href="#composition-learning"><span class="std std-ref">Learning in a Composition</span></a> for a full description).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>controller</strong></dt>
<dd>adds the specified <a class="reference internal" href="ControlMechanism.html"><span class="doc">Control Mechanisms</span></a> (typically an <a class="reference internal" href="OptimizationControlMechanism.html"><span class="doc">OptimizationControlMechanism</span></a>) as the <code class="xref any docutils literal"><span class="pre">controller</span></code> of the Composition, that can be used to simulate and optimize performance of the
Composition. If this is specified, then the <strong>enable_controller</strong>, <strong>controller_mode</strong>,
<strong>controller_condition</strong> and <strong>retain_old_simulation_data</strong> can be used to configure the controller’s operation
(see <a class="reference internal" href="#composition-controller"><span class="std std-ref">Controlling a Composition</span></a> for full description).</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="adding-components-and-pathways">
<span id="composition-addition-methods"></span><h4><em>Adding Components and Pathways</em><a class="headerlink" href="#adding-components-and-pathways" title="Permalink to this headline">¶</a></h4>
<p>The methods used for adding individual Components and <a class="reference internal" href="#composition-pathways"><span class="std std-ref">Pathways</span></a> to a Composition are described
briefly below.  Examples of their their use are provided in <a class="reference internal" href="#composition-creation-examples"><span class="std std-ref">Creating a Composition</span></a>.</p>
<p id="composition-component-addition-methods">The following methods can be used to add individual Components to an existing Composition:</p>
<blockquote>
<div><ul>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_node" title="psyneulink.core.compositions.composition.Composition.add_node"><code class="xref any py py-meth docutils literal"><span class="pre">add_node</span></code></a></p>
<blockquote>
<div><p>adds a <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> to the Composition.</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_nodes" title="psyneulink.core.compositions.composition.Composition.add_nodes"><code class="xref any py py-meth docutils literal"><span class="pre">add_nodes</span></code></a></p>
<blockquote>
<div><p>adds mutiple <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> to the Composition.</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_projection" title="psyneulink.core.compositions.composition.Composition.add_projection"><code class="xref any py py-meth docutils literal"><span class="pre">add_projection</span></code></a></p>
<blockquote>
<div><p>adds a <a class="reference internal" href="Projection.html"><span class="doc">Projection</span></a> between a pair of <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> in the Composition.</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_projections" title="psyneulink.core.compositions.composition.Composition.add_projections"><code class="xref any py py-meth docutils literal"><span class="pre">add_projections</span></code></a></p>
<blockquote>
<div><p>adds <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> between multiple pairs of <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> in the Composition.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p id="composition-pathway-addition-methods">These methods can be used to add <a class="reference internal" href="#composition-pathways"><span class="std std-ref">Pathways</span></a> to an existing Composition:</p>
<blockquote>
<div><ul>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_pathways" title="psyneulink.core.compositions.composition.Composition.add_pathways"><code class="xref any py py-meth docutils literal"><span class="pre">add_pathways</span></code></a></p>
<blockquote>
<div><p>adds one or more Pathways to the Composition; this a convenience method, that determines the type of
each Pathway, and calls the relevant ones of the following methods for each Pathway.</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a></p>
<blockquote>
<div><p>adds and a list of <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> and <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> to the Composition,
inserting a default Projection between any adjacent pair of Nodes for which one is not otherwise specified;
returns the <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> added to the Composition.</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_learning_pathway</span></code></a></p>
<blockquote>
<div><p>adds a list of <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> and <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> to implement a <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning pathway</span></a>, including the <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a>
needed to implement the algorithm specified in its <strong>learning_function</strong> argument;
returns the <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a> added to the Composition.</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_reinforcement_learning_pathway</span></code></a></p>
<blockquote>
<div><p>adds a list of <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> and <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a>, including the <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a> needed to implement <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.Reinforcement" title="psyneulink.core.components.functions.learningfunctions.Reinforcement"><code class="xref any py py-class docutils literal"><span class="pre">reinforcement</span> <span class="pre">learning</span></code></a> in the
specified pathway; returns the <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a> added to the Composition.</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_td_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_td_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_td_learning_pathway</span></code></a></p>
<blockquote>
<div><p>adds a list of <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> and <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a>, including the <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a> needed to implement <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.TDLearning" title="psyneulink.core.components.functions.learningfunctions.TDLearning"><code class="xref any py py-class docutils literal"><span class="pre">temporal</span> <span class="pre">differences</span></code></a> method of
reinforcement learning` in the specified pathway; returns the <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a>
added to the Composition.</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_backpropagation_learning_pathway</span></code></a></p>
<blockquote>
<div><p>adds a list of <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> and <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a>, including the <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a> needed to implement the <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.BackPropagation" title="psyneulink.core.components.functions.learningfunctions.BackPropagation"><code class="xref any py py-class docutils literal"><span class="pre">backpropagation</span> <span class="pre">learning</span> <span class="pre">algorithm</span></code></a> in the specified pathway; returns the <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a>
added to the Composition.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only Mechanisms and Projections added to a Composition using the methods above belong to a Composition, even if
other Mechanism and/or Projections are constructed in the same Python script.</p>
</div>
<p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> can be removed from a Composition using the <code class="xref any docutils literal"><span class="pre">remove_node</span></code> method.</p>
</div>
<div class="section" id="adding-nested-compositions">
<span id="composition-add-nested"></span><h4><em>Adding Nested Compositions</em><a class="headerlink" href="#adding-nested-compositions" title="Permalink to this headline">¶</a></h4>
<p>A Composition can be used as a <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> of another Composition, either in the <strong>nodes</strong> argument
of its consructor, in a <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> specified in its <strong>pathways</strong> argument, or in one of the Composition’s <a class="reference internal" href="#composition-addition-methods"><span class="std std-ref">addition
methods</span></a>.  Projections can be specifed to and from the nested composition (or
created automatically if specified in a Pathway) just as for any other Node.</p>
</div>
</div>
<div class="section" id="composition-structure">
<span id="id1"></span><h3>Composition Structure<a class="headerlink" href="#composition-structure" title="Permalink to this headline">¶</a></h3>
<p>This section provides an overview of the structure of a Composition and its <a class="reference internal" href="Component.html"><span class="doc">Components</span></a>. Later sections
describe these in greater detail, and how they are used to implement various forms of Composition.</p>
<div class="section" id="graph">
<span id="composition-graph"></span><h4><em>Graph</em><a class="headerlink" href="#graph" title="Permalink to this headline">¶</a></h4>
<p>The structure of a Composition is a computational graph, the <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> of which are <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> and/or <a class="reference internal" href="#composition-nested"><span class="std std-ref">nested Composition(s)</span></a> that carry out computations, and the edges of which
are <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> that transmit the computational results from one Node to another Node. The information
about this structure is stored in the Composition`s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.graph" title="psyneulink.core.compositions.composition.Composition.graph"><code class="xref any py py-attr docutils literal"><span class="pre">graph</span></code></a> attribute, that is a <code class="xref any docutils literal"><span class="pre">Graph</span></code> object
describing its Nodes and the dependencies defined by their edges.  There are no restrictions on the structure of the
graph, which can be <a class="reference internal" href="#composition-acyclic-cyclic"><span class="std std-ref">acyclic or cyclic</span></a>, and/or hierarchical (i.e., contain one or more
<a class="reference internal" href="#composition-nested"><span class="std std-ref">nested Compositions</span></a>) as described below. A Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.graph" title="psyneulink.core.compositions.composition.Composition.graph"><code class="xref any py py-attr docutils literal"><span class="pre">graph</span></code></a> can be
displayed  using the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> method (see <a class="reference internal" href="#composition-visualization"><span class="std std-ref">Visualizing a Composition</span></a>).</p>
<div class="section" id="acyclic-and-cyclic-graphs">
<span id="composition-acyclic-cyclic"></span><h5>Acyclic and Cyclic Graphs<a class="headerlink" href="#acyclic-and-cyclic-graphs" title="Permalink to this headline">¶</a></h5>
<p>Projections are always directed (that is, information is transimtted in only one direction).  Therefore, if a
Composition has no recurrent Projections then its structure is a <a class="reference external" href="https://en.wikipedia.org/wiki/Acyclic_graph">directed acyclic graph (DAG)</a>, the order in which its nodes are executed can be determined by
the structure of the graph itself.  However if the Composition contains recurrent Projections, then its structure
is a <a class="reference external" href="https://en.wikipedia.org/wiki/Cyclic_graph">cyclic graph</a>, and the value of some nodes must be initialized
(i.e., “break” the cycle) in order to execute the graph.  PsyNeuLink has procedures both for automatically
determinining which nodes need be initialized and initializing them when the Composition is <a class="reference internal" href="#"><span class="doc">run</span></a>,
and also for allowing the user specify how this is done</p>
</div>
</div>
<div class="section" id="nodes">
<span id="composition-nodes"></span><h4><em>Nodes</em><a class="headerlink" href="#nodes" title="Permalink to this headline">¶</a></h4>
<p>Every <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> in a Composition’s graph must be either a <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> or a <a class="reference internal" href="#composition-nested"><span class="std std-ref">nested Composition</span></a>. The Nodes of a Composition’s graph are listed in its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.nodes" title="psyneulink.core.compositions.composition.Composition.nodes"><code class="xref any py py-attr docutils literal"><span class="pre">nodes</span></code></a> attribute.
Each Node is assigned one or more <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a> that designate its status in the graph.  Nodes are assigned
one or more <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a> automatically when a Composition is constructed, and when Nodes or <a class="reference internal" href="#composition-pathways"><span class="std std-ref">Pathways</span></a> are added to it. However, some of these can be explicitly assigned by specifying the desired
<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> in any of the following places:</p>
<blockquote id="composition-node-role-assignment">
<div><ul class="simple">
<li>the <strong>required_roles</strong> argument of the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_node" title="psyneulink.core.compositions.composition.Composition.add_node"><code class="xref any py py-meth docutils literal"><span class="pre">add_node</span></code></a> or <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_nodes" title="psyneulink.core.compositions.composition.Composition.add_nodes"><code class="xref any py py-meth docutils literal"><span class="pre">add_nodes</span></code></a> methods;</li>
<li>a tuple specifying the <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> in the <strong>pathways</strong> argument of the Compositon’s constructor,
a <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>’s constructor, or in one of the methods used to add a <a class="reference internal" href="#composition-pathways"><span class="std std-ref">Pathway</span></a> to the
Composition (see <a class="reference internal" href="#composition-creation"><span class="std std-ref">Creating a Composition</span></a>);  the Node must be the first item of the tuple, and the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> its
2nd item.</li>
<li>the <strong>roles</strong> argument of the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.require_node_roles" title="psyneulink.core.compositions.composition.Composition.require_node_roles"><code class="xref any py py-meth docutils literal"><span class="pre">require_node_roles</span></code></a> called for an
an existing <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a>.</li>
</ul>
</div></blockquote>
<p>For example, by default, the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.ORIGIN" title="psyneulink.core.compositions.composition.NodeRole.ORIGIN"><code class="xref any py py-attr docutils literal"><span class="pre">ORIGIN</span></code></a> Nodes of a Composition are assigned as its <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> nodes (that is, ones that
receive its external input when it is <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a>), and similarly its <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="psyneulink.core.compositions.composition.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> Nodes are assigned as its
<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Nodes (the values of which are reported as the <code class="xref any docutils literal"><span class="pre">results</span></code> of running the Composition).
However, any other nodes can be specified as the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> or <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Nodes using the methods above, in which case
the default assignents are ignored.
.  A NodeRole can also be excluded from being assinged to a <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> using the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.exclude_node_roles" title="psyneulink.core.compositions.composition.Composition.exclude_node_roles"><code class="xref any py py-meth docutils literal"><span class="pre">exclude_node_roles</span></code></a> method.  All of the roles assigned assigned to a particular Node can be
listed using the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.get_roles_by_node" title="psyneulink.core.compositions.composition.Composition.get_roles_by_node"><code class="xref any py py-meth docutils literal"><span class="pre">get_roles_by_node</span></code></a> method, and all of the nodes assigned a
particular role can be listed using the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.get_nodes_by_role" title="psyneulink.core.compositions.composition.Composition.get_nodes_by_role"><code class="xref any py py-meth docutils literal"><span class="pre">get_nodes_by_role</span></code></a> method.</p>
</div>
<div class="section" id="nested-compositions">
<span id="composition-nested"></span><h4><em>Nested Compositions</em><a class="headerlink" href="#nested-compositions" title="Permalink to this headline">¶</a></h4>
<p>A nested Composition is one that is a <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> within another Composition.  When the outer
Composition is <a class="reference internal" href="#composition-execution"><span class="std std-ref">executed</span></a>, the nested Composition is executed when its Node in the outer is
called to execute by the outer Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.scheduler" title="psyneulink.core.compositions.composition.Composition.scheduler"><code class="xref any py py-attr docutils literal"><span class="pre">scheduler</span></code></a>.  Any Node within the outer
Composition can send a`Projection &lt;Projection&gt;` to any <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Node, and can receive a Projection from any <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a>
Node within the nested Composition.  Similarly, a <a class="reference internal" href="ControlMechanism.html"><span class="doc">Control Mechanisms</span></a> within the outer Composition can modulate the
parameter of any <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> within the nested Composition.</p>
<p>If a nested Composition is an <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Node of the outermost Composition then, when the latter is <a class="reference internal" href="#composition-execution"><span class="std std-ref">executed</span></a>, the <a class="reference internal" href="Run.html#composition-execution-inputs"><span class="std std-ref">inputs specified</span></a> to its <a class="reference internal" href="#composition-execution-methods"><span class="std std-ref">execution method</span></a> must include the InputPorts of the nested Composition.  These can be accessed
using the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.external_input_ports" title="psyneulink.core.compositions.composition.Composition.external_input_ports"><code class="xref any py py-attr docutils literal"><span class="pre">exernal_input_ports</span></code></a> attribute.</p>
<p>A nested Composition can also contain one or more <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathways</span></a>,
however a learning Pathway may not extend from an outer Composition to a nested Composition or vice versa.  The
learning Pathways within a nested Composition are executed when that Composition is run, just like any other (see
<a class="reference internal" href="#composition-learning-execution"><span class="std std-ref">Execution of Learning</span></a>).  Any level of nesting of Compositions within others is allowed.</p>
</div>
<div class="section" id="pathways">
<span id="composition-pathways"></span><h4><em>Pathways</em><a class="headerlink" href="#pathways" title="Permalink to this headline">¶</a></h4>
<p>A <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> is an alternating sequence of <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> and <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> in a Composition.
Although a Composition is not required to have any Pathways, these are useful for constructing Compositions, and are
required for implementing <a class="reference internal" href="#composition-learning"><span class="std std-ref">learning</span></a> in a Composition. Pathways can be specified in the
<strong>pathways</strong> argument of the Composition’s constructor, or using one of its <a class="reference internal" href="#composition-pathway-addition-methods"><span class="std std-ref">Pathway addition methods</span></a>.  Pathways must be linear (that is, the cannot have branches), but they can be
continguous, overlapping, intersecting, or disjoint, and can have one degree of converging and/or diverging branches
(meaning that their branches can’t branch). Each Pathway has a name (that can be assigned when it is constructed) and
a set of attributes, including a <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.pathway" title="psyneulink.core.compositions.pathway.Pathway.pathway"><code class="xref any py py-attr docutils literal"><span class="pre">pathway</span></code></a> attribute that lists the Nodes and Projections in the
Pathway, a <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.roles" title="psyneulink.core.compositions.pathway.Pathway.roles"><code class="xref any py py-attr docutils literal"><span class="pre">roles</span></code></a> attribute that lists the <code class="xref any docutils literal"><span class="pre">PathwayRoles</span></code> assigned to it (based on
the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a> assigned to its Nodes), and attributes for particular types of nodes (e.g., <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> and
<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a>) if the Pathway includes nodes assigned the corresponding <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a>. If a Pathway does not have
a particular type of Node, then its attribute returns None. There are
two types of Pathways: processing Pathways and <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathways</span></a>.  Processing
Pathways are ones not configured for learning; learning Pathways are described under <a class="reference internal" href="#composition-learning"><span class="std std-ref">Learning in a Composition</span></a>. All
of the Pathways in a Composition are listed in its <code class="xref any docutils literal"><span class="pre">pathways</span></code> attribute.</p>
</div>
</div>
<div class="section" id="controlling-a-composition">
<span id="composition-controller"></span><h3>Controlling a Composition<a class="headerlink" href="#controlling-a-composition" title="Permalink to this headline">¶</a></h3>
<p>A Composition can be assigned a <code class="xref any docutils literal"><span class="pre">controller</span></code>.  This is a <a class="reference internal" href="ControlMechanism.html"><span class="doc">Control Mechanisms</span></a>, or a subclass of
one, that modulates the parameters of Components within the Composition (including Components of nested Compositions).
It typically does this based on the output of an <a class="reference internal" href="ObjectiveMechanism.html"><span class="doc">ObjectiveMechanism</span></a> that evaluates the value of other Mechanisms in
the Composition, and provides the result to the <code class="xref any docutils literal"><span class="pre">controller</span></code>.</p>
<div class="section" id="assigning-a-controller">
<span id="composition-controller-assignment"></span><h4><em>Assigning a Controller</em><a class="headerlink" href="#assigning-a-controller" title="Permalink to this headline">¶</a></h4>
<p>A <code class="xref any docutils literal"><span class="pre">controller</span></code> can be assigned either by specifying it in the <strong>controller</strong> argument of the
Composition’s constructor, or using its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_controller" title="psyneulink.core.compositions.composition.Composition.add_controller"><code class="xref any py py-meth docutils literal"><span class="pre">add_controller</span></code></a> method.</p>
</div>
<div class="section" id="controller-execution">
<span id="composition-controller-execution"></span><h4><em>Controller Execution</em><a class="headerlink" href="#controller-execution" title="Permalink to this headline">¶</a></h4>
<p>The <code class="xref any docutils literal"><span class="pre">controller</span></code> is executed only if the Composition’s <code class="xref any docutils literal"><span class="pre">enable_controller</span></code> attribute is True.  This generally done automatically when the <code class="xref any docutils literal"><span class="pre">controller</span></code> is <a class="reference internal" href="#composition-controller-assignment"><span class="std std-ref">assigned</span></a>.  If enabled, the <code class="xref any docutils literal"><span class="pre">controller</span></code> is generally executed either before or after all of the other Components in the Composition
have been executed, as determined by the Composition’s <code class="xref any docutils literal"><span class="pre">controller_mode</span></code> attribute.
However, the Composition’s <code class="xref any docutils literal"><span class="pre">controller_condition</span></code> attribute can be used to
customize when it is executed.  All three of these attributes can be specified in corresponding arguments of the
Composition’s constructor, or programmatically after it is constructed by assigning the desired value to the
corresponding attribute.</p>
</div>
</div>
<div class="section" id="learning-in-a-composition">
<span id="composition-learning"></span><h3>Learning in a Composition<a class="headerlink" href="#learning-in-a-composition" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="#composition-learning-standard"><span class="std std-ref">Learning Using PsyNeuLink Components</span></a></li>
<li><a class="reference internal" href="#composition-learning-autodiffcomposition"><span class="std std-ref">Learning Using AutodiffCompositon</span></a></li>
<li><a class="reference internal" href="#composition-learning-udf"><span class="std std-ref">Learning Using UserDefinedFunctions</span></a></li>
</ul>
<p>Learning is used to modify the <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> between Mechanisms in a Composition.  More specifically,
it modifies the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of the <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjections</span></a> within a
<a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a>, which implement the conection weights (i.e., strengths of
associations between representations in the Mechanisms) within a <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>.</p>
<div class="section" id="configuring-learning-in-a-composition">
<span id="composition-learning-configurations"></span><h4><em>Configuring Learning in a Composition</em><a class="headerlink" href="#configuring-learning-in-a-composition" title="Permalink to this headline">¶</a></h4>
<p>There are three ways of configuring learning in a Composition:</p>
<ol class="lowerroman simple">
<li>using <a class="reference internal" href="#composition-learning-standard"><span class="std std-ref">standard PsyNeuLink Components</span></a></li>
<li>using the <a class="reference internal" href="#composition-learning-autodiffcomposition"><span class="std std-ref">AutodiffComposition</span></a> – a specialized subclass of Composition
that executes learning using <a class="reference external" href="https://pytorch.org">PyTorch</a></li>
<li>using <a class="reference internal" href="UserDefinedFunction.html"><span class="doc">UserDefinedFunctions</span></a>.</li>
</ol>
<p>The advantage of using standard PsyNeuLink compoments is that it assigns each operation involved in learning to a
dedicated Component. This helps make clear exactly what those operations are, the sequence in which they are carried
out, and how they interact with one another.  However, this can also make execution inefficient, due to the overhead
incurred by distributing the calculations over different Components.  If more efficient computation is critical,
then the <a class="reference internal" href="AutodiffComposition.html"><span class="doc">AutodiffComposition</span></a> can be used to execute a compatible PsyNeuLink Composition in PyTorch, or one or more
<a class="reference internal" href="UserDefinedFunction.html"><span class="doc">UserDefinedFunctions</span></a> can be assigned to either PyTorch functions or those in any other Python
environment that implements learning and accepts and returns tensors. Each of these approaches is described in more
detail below.</p>
</div>
<div class="section" id="learning-using-psyneulink-components">
<span id="composition-learning-standard"></span><h4><em>Learning Using PsyNeuLink Components</em><a class="headerlink" href="#learning-using-psyneulink-components" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="#composition-learning-unsupervised"><span class="std std-ref">Unsupervised Learning</span></a></li>
<li><a class="reference internal" href="#composition-learning-supervised"><span class="std std-ref">Supervised Learning</span></a></li>
</ul>
<p>When learning is implemented using standard PsyNeuLink Components, each calculation and/or operation involved in
learning – including those responsible for computing errors, and for using those errors to modify the Projections
between Mechanisms, is assigned to a different PsyNeuLink <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning-related Component</span></a>.  These can be used to implement all types of learning.  Learning is generally
considered to fall into two broad classes:  <em>unsupervised</em>, in which connections weights are modified
by mere exposure to the inputs in order to capture structure and/or relationships among them;  and <em>supervised</em>,
which in which the connection weights are modified so that each input generates a desired output (see
<a class="reference external" href="https://www.geeksforgeeks.org/supervised-unsupervised-learning/">https://www.geeksforgeeks.org/supervised-unsupervised-learning/</a> for a useful summary).  Both types of
learning can be implemented in a Composition, using <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a> that compute the
changes to make to the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjections</span></a>
being learned, and <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjections</span></a> that apply those changes to those MappingProjections.
In addition, supervised learning uses an <a class="reference internal" href="ObjectiveMechanism.html"><span class="doc">ObjectiveMechanism</span></a> – usually a <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> – to compute the error
between the response generated by the last Mechanism in a <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a> (to the
input provided to the first Mechanism in the <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>) and the target stimulus used to specify the desired response.
In most cases, the LearningMechanisms, LearningProjections and, where needed, ObjectiveMechanism are generated
automatically, as described for each type of learning below.  However, these can also be configured manually using
their constructors, or modified by assigning values to their attributes.</p>
<div class="section" id="unsupervised-learning">
<span id="composition-learning-unsupervised"></span><h5><strong>Unsupervised Learning</strong><a class="headerlink" href="#unsupervised-learning" title="Permalink to this headline">¶</a></h5>
<p>Undersupervised learning is implemented using a <a class="reference internal" href="RecurrentTransferMechanism.html"><span class="doc">RecurrentTransferMechanism</span></a>, setting its <strong>enable_learning</strong> argument
to True, and specifying the desired <a class="reference internal" href="LearningFunctions.html"><span class="doc">LearningFunction</span></a> in its <strong>learning_function</strong> argument.  The
default is <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.Hebbian" title="psyneulink.core.components.functions.learningfunctions.Hebbian"><code class="xref any py py-class docutils literal"><span class="pre">Hebbian</span></code></a>, however others can be specified (such as <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.ContrastiveHebbian" title="psyneulink.core.components.functions.learningfunctions.ContrastiveHebbian"><code class="xref any py py-class docutils literal"><span class="pre">ContrastiveHebbian</span></code></a> or <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.Kohonen" title="psyneulink.core.components.functions.learningfunctions.Kohonen"><code class="xref any py py-class docutils literal"><span class="pre">Kohonen</span></code></a>). When a
RecurrentTransferMechanism with learning enabled is added to a Composition, an <a class="reference internal" href="AutoAssociativeLearningMechanism.html"><span class="doc">AutoAssociativeLearningMechanism</span></a> that
that is appropriate for the specified learning_function is automatically constructured and added to the Composition,
as is a <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> from the AutoAssociativeLearningMechanism to the RecurrentTransferMechanism’s
<a class="reference internal" href="RecurrentTransferMechanism.html#psyneulink.library.components.mechanisms.processing.transfer.recurrenttransfermechanism.RecurrentTransferMechanism.recurrent_projection" title="psyneulink.library.components.mechanisms.processing.transfer.recurrenttransfermechanism.RecurrentTransferMechanism.recurrent_projection"><code class="xref any py py-attr docutils literal"><span class="pre">recurrent_projection</span></code></a>.  When the Composition is run and the
RecurrentTransferMechanism is executed, its AutoAssociativeLearningMechanism is also executed, which updates the <a class="reference internal" href="AutoAssociativeProjection.html#psyneulink.library.components.projections.pathway.autoassociativeprojection.AutoAssociativeProjection.matrix" title="psyneulink.library.components.projections.pathway.autoassociativeprojection.AutoAssociativeProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> of its <a class="reference internal" href="RecurrentTransferMechanism.html#psyneulink.library.components.mechanisms.processing.transfer.recurrenttransfermechanism.RecurrentTransferMechanism.recurrent_projection" title="psyneulink.library.components.mechanisms.processing.transfer.recurrenttransfermechanism.RecurrentTransferMechanism.recurrent_projection"><code class="xref any py py-attr docutils literal"><span class="pre">recurrent_projection</span></code></a>
in response to its input.</p>
</div>
<div class="section" id="supervised-learning">
<span id="composition-learning-supervised"></span><h5><strong>Supervised Learning</strong><a class="headerlink" href="#supervised-learning" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">Supervised Learning Methods</span></a></li>
<li><a class="reference internal" href="#composition-learning-components"><span class="std std-ref">Supervised Learning Components</span></a></li>
<li><a class="reference internal" href="#composition-learning-execution"><span class="std std-ref">Execution of Learning</span></a></li>
</ul>
<div class="section" id="supervised-learning-methods">
<span id="composition-learning-methods"></span><h6><em>Supervised Learning Methods</em><a class="headerlink" href="#supervised-learning-methods" title="Permalink to this headline">¶</a></h6>
<p>Supervised learning is implemented in a Composition by specifying a <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a>
in the <strong>pathways</strong> argumemt of the Composition’s constructor, its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_pathways" title="psyneulink.core.compositions.composition.Composition.add_pathways"><code class="xref any py py-meth docutils literal"><span class="pre">add_pathways</span></code></a> method,
or one of its learning methods.  If the constructor or <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_pathways" title="psyneulink.core.compositions.composition.Composition.add_pathways"><code class="xref any py py-meth docutils literal"><span class="pre">add_pathways</span></code></a> method is used,
then the <a class="reference internal" href="Pathway.html#pathway-specification"><span class="std std-ref">Pathway specification</span></a> must be the first item in a tuple, followed by a
<a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.LearningFunction" title="psyneulink.core.components.functions.learningfunctions.LearningFunction"><code class="xref any py py-class docutils literal"><span class="pre">LearningFunction</span></code></a> as its 2nd item that specfies the type of learning.  Alternatively, a <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a> can be added to a Composition by specifying the <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> to be learned in the one
of the Composition’s learning methods, of which there are currently three:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_reinforcement_learning_pathway</span></code></a> – uses <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.Reinforcement" title="psyneulink.core.components.functions.learningfunctions.Reinforcement"><code class="xref any py py-class docutils literal"><span class="pre">Reinforcement</span></code></a>;</li>
<li><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_td_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_td_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_td_learning_pathway</span></code></a> – uses <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.TDLearning" title="psyneulink.core.components.functions.learningfunctions.TDLearning"><code class="xref any py py-class docutils literal"><span class="pre">TDLearning</span></code></a>;</li>
<li><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_backpropagation_learning_pathway</span></code></a> – uses <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.BackPropagation" title="psyneulink.core.components.functions.learningfunctions.BackPropagation"><code class="xref any py py-class docutils literal"><span class="pre">BackPropagation</span></code></a>.</li>
</ul>
</div></blockquote>
<p>Each uses the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a> method to create a <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a> using the corresponding <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.LearningFunction" title="psyneulink.core.components.functions.learningfunctions.LearningFunction"><code class="xref any py py-class docutils literal"><span class="pre">LearningFunction</span></code></a>.</p>
</div>
<div class="section" id="supervised-learning-pathways">
<span id="composition-learning-pathway"></span><h6><em>Supervised Learning Pathways</em><a class="headerlink" href="#supervised-learning-pathways" title="Permalink to this headline">¶</a></h6>
<p>A <em>learning pathway</em> is a contiguous sequence of <a class="reference internal" href="ProcessingMechanism.html"><span class="doc">ProcessingMechanisms</span></a> and the
<a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjections</span></a> between them, in which supervised learning is used to modify the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of the MappingProjections in the sequence, so that the input to the first
ProcessingMechanism in the sequence generates an output from the last ProcessingMechanism that matches as closely as
possible the value specified for the target mechanism in the <strong>inputs</strong> argument of the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a> method. The Mechanisms in the pathway must be compatible with learning (that is, their <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> must be compatible with the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.function" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> of the
<a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> for the MappingProjections they receive (see <a class="reference internal" href="LearningMechanism.html#learningmechanism-function"><span class="std std-ref">Learning Function</span></a>).  The Composition’s
<a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning methods</span></a> return a learning <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>, in which its <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.learning_components" title="psyneulink.core.compositions.pathway.Pathway.learning_components"><code class="xref any py py-attr docutils literal"><span class="pre">learning_components</span></code></a> attribute is assigned a dict containing the set of the set of learning components
generated for the Pathway, as described below.</p>
</div>
<div class="section" id="supervised-learning-components">
<span id="composition-learning-components"></span><h6><em>Supervised Learning Components</em><a class="headerlink" href="#supervised-learning-components" title="Permalink to this headline">¶</a></h6>
<p>For each <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning pathway</span></a> specified in the <strong>pathways</strong> argument of a Composition’s
constructor or one of its <a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning methods</span></a>, it creates the following Components,
and assigns to them the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a> indicated:</p>
<blockquote>
<div><ul class="simple">
<li><em>TARGET_MECHANISM</em> – receives the value to be used by the <em>OBJECTIVE_MECHANISM</em> as the target in
computing the error signal (see above);  that value must be specified in the <strong>inputs</strong> argument of the
Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a> method (as the input to the <em>TARGET_MECHANISM</em>; this is assigned the
<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a> <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TARGET" title="psyneulink.core.compositions.composition.NodeRole.TARGET"><code class="xref any py py-attr docutils literal"><span class="pre">TARGET</span></code></a> and <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.LEARNING" title="psyneulink.core.compositions.composition.NodeRole.LEARNING"><code class="xref any py py-attr docutils literal"><span class="pre">LEARNING</span></code></a> in the Composition;</li>
</ul>
<ul class="simple">
<li>a MappingProjection that projects from the <em>TARGET_MECHANISM</em> to the <em>TARGET</em> <a class="reference internal" href="ComparatorMechanism.html#comparatormechanism-structure"><span class="std std-ref">InputPort</span></a> of the <em>OBJECTIVE_MECHANISM</em>;</li>
</ul>
<ul class="simple">
<li>a MappingProjection that projects from the last ProcessingMechanism in the learning Pathway to the <em>SAMPLE</em>
<a class="reference internal" href="ComparatorMechanism.html#comparatormechanism-structure"><span class="std std-ref">InputPort</span></a> of the <em>OBJECTIVE_MECHANISM</em>;</li>
</ul>
<ul class="simple">
<li><em>OBJECTIVE_MECHANISM</em> – usually a <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a>, used to <a class="reference internal" href="ComparatorMechanism.html#comparatormechanism-execution"><span class="std std-ref">calculate an error signal</span></a> for the sequence by comparing the value received by the ComparatorMechanism’s
<em>SAMPLE</em> <a class="reference internal" href="ComparatorMechanism.html#comparatormechanism-structure"><span class="std std-ref">InputPort</span></a> (from the <a class="reference internal" href="LearningMechanism.html#learningmechanism-activation-output"><span class="std std-ref">output</span></a> of
the last Processing Mechanism in the <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a>) with the value received
in the <em>OBJECTIVE_MECHANISM</em>’s <em>TARGET</em> <a class="reference internal" href="ComparatorMechanism.html#comparatormechanism-structure"><span class="std std-ref">InputPort</span></a> (from the <em>TARGET_MECHANISM</em>
generated by the method – see below); this is assigned the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.LEARNING" title="psyneulink.core.compositions.composition.NodeRole.LEARNING"><code class="xref any py py-attr docutils literal"><span class="pre">LEARNING</span></code></a> in the Composition.</li>
</ul>
<ul class="simple">
<li><em>LEARNING_MECHANISMS</em> – a <a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> for each MappingProjection in the sequence, each of which
calculates the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_signal" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_signal"><code class="xref any py py-attr docutils literal"><span class="pre">learning_signal</span></code></a> used to modify the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter for the coresponding MappingProjection, along with a <a class="reference internal" href="LearningSignal.html"><span class="doc">LearningSignal</span></a> and
<a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> that convey the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_signal" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_signal"><code class="xref any py py-attr docutils literal"><span class="pre">learning_signal</span></code></a> to the
MappingProjection’s <em>MATRIX</em> <a class="reference internal" href="MappingProjection.html#mapping-matrix-parameterport"><span class="std std-ref">ParameterPort</span></a>;  depending on learning method,
additional MappingProjections may be created to and/or from the LearningMechanism – see
<a class="reference internal" href="LearningMechanism.html#learningmechanism-learning-configurations"><span class="std std-ref">Learning Configurations</span></a> for details); these are assigned the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.LEARNING" title="psyneulink.core.compositions.composition.NodeRole.LEARNING"><code class="xref any py py-attr docutils literal"><span class="pre">LEARNING</span></code></a> in the
Composition.</li>
</ul>
<ul class="simple">
<li><em>LEARNING_FUNCTION</em> – the <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.LearningFunction" title="psyneulink.core.components.functions.learningfunctions.LearningFunction"><code class="xref any py py-class docutils literal"><span class="pre">LearningFunction</span></code></a> used by each of the <code class="xref any docutils literal"><span class="pre">LEARNING_MECHANISMS</span></code> in the learning pathway.</li>
</ul>
<ul class="simple">
<li><em>LEARNED_PROJECTIONS</em> – a <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> from each <a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> to the <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjection</span></a>
for which it modifies it s`matrix &lt;MappingProjection.matrix&gt;` parameter.</li>
</ul>
</div></blockquote>
<p>The items with names in the list above are placed in a dict that is assigned to the <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.learning_components" title="psyneulink.core.compositions.pathway.Pathway.learning_components"><code class="xref any py py-attr docutils literal"><span class="pre">learning_components</span></code></a> attribute of the <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> returned by the learning method used to create the <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>;
they key for each item in the dict is the name of the item (as listed above), and the object(s) created of that type
are its value (see <a class="reference internal" href="LearningMechanism.html#learningmechanism-single-layer-learning"><span class="std std-ref">Single layer learning</span></a> for a more detailed description and figure showing these
Components).</p>
<p>If the learning Pathway &lt;Composition_Learning_Pathway&gt;` involves more than two ProcessingMechanisms (e.g. using
<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_backpropagation_learning_pathway</span></code></a> for a multilayered neural network), then multiple LearningMechanisms are
created, along with MappingProjections that provide them with the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.error_signal" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.error_signal"><code class="xref any py py-attr docutils literal"><span class="pre">error_signal</span></code></a>
from the preceding LearningMechanism, and <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjections</span></a> that modify the corresponding
MappingProjections (<em>LEARNED_PROJECTION</em>s) in the <code class="xref any docutils literal"><span class="pre">learning</span> <span class="pre">Pathway</span></code>, as shown for an
example in the figure below. These additional learning components are listed in the <em>LEARNING_MECHANISMS</em> and
<em>LEARNED_PROJECTIONS</em> entries of the dictionary assigned to the <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.learning_components" title="psyneulink.core.compositions.pathway.Pathway.learning_components"><code class="xref any py py-attr docutils literal"><span class="pre">learning_components</span></code></a>
attribute of the <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a> return by the learning method.</p>
<p id="composition-multilayerlearning-figure"><strong>Figure: Supervised Learning Components</strong></p>
<div class="figure" id="id13">
<a class="reference internal image-reference" href="_images/Composition_Multilayer_Learning_fig.svg"><img alt="Schematic of LearningMechanism and LearningProjections in a Process" src="_images/Composition_Multilayer_Learning_fig.svg" /></a>
<p class="caption"><span class="caption-text"><em>Components for supervised learning Pathway</em>: the Pathway has three Mechanisms generated by a call to a <a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">supervised
learning method</span></a> (e.g., <code class="docutils literal"><span class="pre">add_backpropagation_learning_pathway(pathway=[A,B,C])</span></code>),
with <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> assigned to each <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> in the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.graph" title="psyneulink.core.compositions.composition.Composition.graph"><code class="xref any py py-attr docutils literal"><span class="pre">graph</span></code></a> (in
italics below Mechanism type) and  the names of the learning components returned by the learning method (capitalized
and in italics, above each Mechanism).</span></p>
</div>
<p id="composition-xor-example">The following example implements a simple three-layered network that learns the XOR function
(see <a class="reference internal" href="#composition-learning-output-vs-terminal-figure"><span class="std std-ref">figure</span></a> below):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Construct Composition:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">input</span> <span class="o">=</span> <span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Input&#39;</span><span class="p">,</span> <span class="n">default_variable</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">hidden</span> <span class="o">=</span> <span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Hidden&#39;</span><span class="p">,</span> <span class="n">default_variable</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">function</span><span class="o">=</span><span class="n">Logistic</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">output</span> <span class="o">=</span> <span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Output&#39;</span><span class="p">,</span> <span class="n">default_variable</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">function</span><span class="o">=</span><span class="n">Logistic</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">input_weights</span> <span class="o">=</span> <span class="n">MappingProjection</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Input Weights&#39;</span><span class="p">,</span> <span class="n">matrix</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">output_weights</span> <span class="o">=</span> <span class="n">MappingProjection</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Output Weights&#39;</span><span class="p">,</span> <span class="n">matrix</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">xor_comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="s1">&#39;XOR Composition&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">backprop_pathway</span> <span class="o">=</span> <span class="n">xor_comp</span><span class="o">.</span><span class="n">add_backpropagation_learning_pathway</span><span class="p">(</span>
<span class="o">&gt;&gt;&gt;</span>                       <span class="n">pathway</span><span class="o">=</span><span class="p">[</span><span class="nb">input</span><span class="p">,</span> <span class="n">input_weights</span><span class="p">,</span> <span class="n">hidden</span><span class="p">,</span> <span class="n">output_weights</span><span class="p">,</span> <span class="n">output</span><span class="p">])</span>

<span class="c1"># Create inputs:            Trial 1  Trial 2  Trial 3  Trial 4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">xor_inputs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stimuli&#39;</span><span class="p">:[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
<span class="o">&gt;&gt;&gt;</span>               <span class="s1">&#39;targets&#39;</span><span class="p">:[</span>  <span class="p">[</span><span class="mi">0</span><span class="p">],</span>     <span class="p">[</span><span class="mi">1</span><span class="p">],</span>     <span class="p">[</span><span class="mi">1</span><span class="p">],</span>     <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">xor_comp</span><span class="o">.</span><span class="n">learn</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="nb">input</span><span class="p">:</span><span class="n">xor_inputs</span><span class="p">[</span><span class="s1">&#39;stimuli&#39;</span><span class="p">],</span>
<span class="o">&gt;&gt;&gt;</span>                      <span class="n">backprop_pathway</span><span class="o">.</span><span class="n">target</span><span class="p">:</span><span class="n">xor_inputs</span><span class="p">[</span><span class="s1">&#39;targets&#39;</span><span class="p">]},</span>
<span class="o">&gt;&gt;&gt;</span>              <span class="n">num_trials</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="o">&gt;&gt;&gt;</span>              <span class="n">animate</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;show_learning&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">})</span>
</pre></div>
</div>
<p>The description and example above pertain to simple linear sequences.  However, more complex configurations,
with convergent, divergent and/or intersecting sequences can be built using multiple calls to the learning method
(see <a class="reference internal" href="BasicsAndPrimer.html#basicsandprimer-rumelhart-model"><span class="std std-ref">example</span></a> in <a class="reference internal" href="BasicsAndPrimer.html"><span class="doc">Basics and Primer</span></a>).  In each call, the learning method determines
how the sequence to be added relates to any existing ones with which it abuts or intersects, and automatically creates
andconfigures the relevant learning components so that the error terms are properly computed and propagated by each
LearningMechanism to the next in the configuration. It is important to note that, in doing so, the status of a
Mechanism in the final configuration takes precedence over its status in any of the individual sequences specified
in the <a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning methods</span></a> when building the Composition.  In particular,
whereas ordinarily the last ProcessingMechanism of a sequence specified in a learning method projects to a
<em>OBJECTIVE_MECHANISM</em>, this may be superceded if multiple sequences are created. This is the case if: i) the
Mechanism is in a seqence that is contiguous (i.e., abuts or intersects) with others already in the Composition,
ii) the Mechanism appears in any of those other sequences and, iii) it is not the last Mechanism in <em>all</em> of them;
in that in that case, it will not project to a <em>OBJECTIVE_MECHANISM</em> (see <a class="reference internal" href="#composition-learning-output-vs-terminal-figure"><span class="std std-ref">figure below</span></a> for an example).  Furthermore, if it <em>is</em> the last Mechanism in all
of them (that is, all of the specified pathways converge on that Mechanism), only one <em>OBJECTIVE_MECHANISM</em> is created
for that Mechanism (i.e., not one for each sequence).  Finally, it should be noted that, by default, learning components
are <em>not</em> assigned the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> of <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> even though they may be the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="psyneulink.core.compositions.composition.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> Mechanism of a Composition;
conversely, even though the last Mechanism of a <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a> projects to a
<em>OBJECTIVE_MECHANISM</em>, and thus is not the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="psyneulink.core.compositions.composition.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> of a Composition, if it does not
project to any other Mechanisms in the Composition it is nevertheless assigned as an <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> of the Composition.
That is, Mechanisms that would otherwise have been the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="psyneulink.core.compositions.composition.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> Mechanism of a Composition preserve their role as
an <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Node of the Composition if they are part of a <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a> even
though  they project to another Mechanism (the <em>OBJECTIVE_MECHANISM</em>) in the Composition.</p>
<blockquote id="composition-learning-output-vs-terminal-figure">
<div><p><strong>OUTPUT</strong> vs. <strong>TERMINAL</strong> Roles in Learning Configuration</p>
<div class="figure" id="id14">
<a class="reference internal image-reference" href="_images/Composition_Learning_OUTPUT_vs_TERMINAL_fig.svg"><img alt="Schematic of Mechanisms and Projections involved in learning" src="_images/Composition_Learning_OUTPUT_vs_TERMINAL_fig.svg" /></a>
<p class="caption"><span class="caption-text">Configuration of Components generated by the creation of two intersecting <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathways</span></a> (e.g., <code class="docutils literal"><span class="pre">add_backpropagation_learning_pathway(pathway=[A,B])</span></code> and
<code class="docutils literal"><span class="pre">add_backpropagation_learning_pathway(pathway=[D,B,C])</span></code>).  Mechanism B is the last Mechanism of the sequence
specified for the first pathway, and so would project to a <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a>, and would be assigned as an
<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> of the Composition, if that pathway was created on its own. However, since
Mechanims B is also in the middle of the sequence specified for the second pathway, it does not project to a
ComparatorMechanism, and is relegated to being an <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INTERNAL" title="psyneulink.core.compositions.composition.NodeRole.INTERNAL"><code class="xref any py py-attr docutils literal"><span class="pre">INTERNAL</span></code></a> Node of the Composition Mechanism C is now the
one that projects to the ComparatorMechanism and assigned as the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Node.</span></p>
</div>
</div></blockquote>
</div>
<div class="section" id="execution-of-learning">
<span id="composition-learning-execution"></span><h6><em>Execution of Learning</em><a class="headerlink" href="#execution-of-learning" title="Permalink to this headline">¶</a></h6>
<p>For learning to occur when a Composition is run, its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a> method must be used instead of the
<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> method, and its <code class="xref any docutils literal"><span class="pre">disable_learning</span></code> attribute must be False.
When the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a> method is used, all Components <em>unrelated</em> to learning are executed in the same
way as with the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> method.  If the Composition has any <a class="reference internal" href="#composition-nested"><span class="std std-ref">nested Composition</span></a>
that have <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathways</span></a>, then learning also occurs on all of those for which
the <code class="xref any docutils literal"><span class="pre">disable_learning</span></code> attribute is False.  This is true even if the <code class="xref any docutils literal"><span class="pre">disable_learning</span></code> attribute is True for which the Composition on which the  <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a>
method was called.</p>
<p>When a Composition is run that contains one or more <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathways</span></a>, all of the
ProcessingMechanisms for a pathway are executed first, and then its <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a>.  This is shown in an animation of the XOR network from the <a class="reference internal" href="#composition-xor-example"><span class="std std-ref">example above</span></a>:</p>
<blockquote id="composition-learning-animation-figure">
<div><p><strong>Composition with Learning</strong></p>
<div class="figure" id="id15">
<a class="reference internal image-reference" href="_images/Composition_XOR_animation.gif"><img alt="Animation of Composition with learning" src="_images/Composition_XOR_animation.gif" style="width: 397.0px; height: 406.0px;" /></a>
<p class="caption"><span class="caption-text">Animation of XOR Composition in example above when it is executed by calling its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a>
method with the argument <code class="docutils literal"><span class="pre">animate={'show_learning':True}</span></code>.</span></p>
</div>
</div></blockquote>
<p>Note that, since the <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a> are not executed until after the
processing components, the change to the weights of the MappingProjections in a learning pathway are not
made until after it has executed.  Thus, as with <a class="reference internal" href="Projection.html#projection-execution"><span class="std std-ref">execution of a Projection</span></a>, those
changes will not be observed in the values of their <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameters until after
they are next executed (see <span class="xref std std-ref">Lazy Evaluation</span> for an explanation of “lazy” updating).</p>
</div>
</div>
</div>
<div class="section" id="learning-using-autodiffcompositon">
<span id="composition-learning-autodiffcomposition"></span><h4><em>Learning Using AutodiffCompositon</em><a class="headerlink" href="#learning-using-autodiffcompositon" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="AutodiffComposition.html"><span class="doc">AutodiffCompositions</span></a> provide the ability to execute a composition using <a class="reference external" href="https://pytorch.org">PyTorch</a> (see <a class="reference internal" href="BasicsAndPrimer.html#basicsandprimer-rumelhart-model"><span class="std std-ref">example</span></a> in <a class="reference internal" href="BasicsAndPrimer.html"><span class="doc">Basics and Primer</span></a>).  The
AutodiffComposition constructor provides arguments for configuring the PyTorch implementation in various ways; the
Composition is then built using the same methods (e.g., <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_node" title="psyneulink.core.compositions.composition.Composition.add_node"><code class="xref any py py-meth docutils literal"><span class="pre">add_node</span></code></a>, <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_projection" title="psyneulink.core.compositions.composition.Composition.add_projection"><code class="xref any py py-meth docutils literal"><span class="pre">add_projection</span></code></a>, <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a>,
etc.) as any other Composition. Note that there is no need to use any <a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning methods</span></a>
— AutodiffCompositions automatically creates backpropagation learning pathways &lt;Composition_Learning_Pathway&gt;` between
all input - output <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> paths. It can be run just as a standard Composition would - using <code class="xref any docutils literal"><span class="pre">learn</span></code> for learning mode, and <code class="xref any docutils literal"><span class="pre">run</span></code> for test mode.</p>
<p>The advantage of this approach is that it allows the Composition to be implemented in PsyNeuLink, while exploiting
the efficiency of execution in PyTorch (which can yield as much as three orders of magnitude improvement).  However,
a disadvantage is that there are restrictions on the kinds of Compositions that be implemented in this way.
First, because it relies on PyTorch, it is best suited for use with <a class="reference internal" href="#composition-learning-supervised"><span class="std std-ref">supervised
learning</span></a>, although it can be used for some forms of <a class="reference internal" href="#composition-learning-unsupervised"><span class="std std-ref">unsupervised learning</span></a> that are supported in PyTorch (e.g., <a class="reference external" href="https://github.com/giannisnik/som">self-organized maps</a>).  Second, all of the Components in the Composition are be subject to and must
be with compatible with learning.   This means that it cannot be used with a Composition that contains any
<a class="reference internal" href="ModulatorySignal.html#modulatorysignal-anatomy-figure"><span class="std std-ref">modulatory components</span></a> or that are subject to modulation, whether by
ControlMechanisms within or outside the Composition;  this includes a <a class="reference internal" href="#composition-controller"><span class="std std-ref">controller</span></a>
or any LearningMechanisms.  An AutodiffComposition can be <a class="reference internal" href="#composition-nested"><span class="std std-ref">nested in a Composition</span></a>
that has such other Components.  During learning, none of the internal Components of the AutodiffComposition (e.g.,
intermediate layers of a neural network model) are accessible to the other Components of the outer Composition,
(e.g., as sources of information, or for modulation).  However, when learning turned off, then the  AutodiffComposition
functions like any other, and all of its internal  Components accessible to other Components of the outer Composition.
Thus, as long as access to its internal Components is not needed during learning, an <a class="reference internal" href="AutodiffComposition.html"><span class="doc">AutodiffComposition</span></a> can be
trained, and then used to execute the trained Composition like any other.</p>
</div>
<div class="section" id="learning-using-userdefinedfunctions">
<span id="composition-learning-udf"></span><h4><em>Learning Using UserDefinedFunctions</em><a class="headerlink" href="#learning-using-userdefinedfunctions" title="Permalink to this headline">¶</a></h4>
<p>If execution efficiency is critical and the <a class="reference internal" href="AutodiffComposition.html"><span class="doc">AutodiffComposition</span></a> is too restrictive, a function from any Python
environment that supports learning can be assigned as the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> of a <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a>, in which case it is automatically  wrapped as <a class="reference internal" href="UserDefinedFunction.html"><span class="doc">UserDefinedFunction</span></a>.  For example, the <a class="reference external" href="https://pytorch.org/docs/master/notes/extending.html">forward and
backward methods</a> of a PyTorch object can be assigned in this
way.  The advanatage of this approach is that it can be applied to any Python function that adheres to the requirements
of a <a class="reference internal" href="UserDefinedFunction.html"><span class="doc">UserDefinedFunction</span></a>.  The disadvantage is that it can’t be <code class="xref any docutils literal"><span class="pre">compiled</span></code>, so efficiency may be compromised.  It must
also be carefully coordinated with the execution of other learning-related Components in the Composition, to insure
that each function is called at the appropriate times during execution.  Furthermore, as with an <a class="reference internal" href="AutodiffComposition.html"><span class="doc">AutodiffComposition</span></a>,
the internal constituents of the object (e.g., intermediates layers of a neural network model) are not accessible to
other Components in the Composition (e.g., as a source of information or for modulation).</p>
</div>
</div>
<div class="section" id="executing-a-composition">
<span id="composition-execution"></span><h3>Executing a Composition<a class="headerlink" href="#executing-a-composition" title="Permalink to this headline">¶</a></h3>
<p id="composition-execution-methods">There are three methods for executing a Composition:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> - executes one or more <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s without learning;</li>
<li><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a> - executes one or more <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s with learning,
if the network is configured for <a class="reference internal" href="#composition-learning"><span class="std std-ref">learning</span></a>.</li>
<li><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.execute" title="psyneulink.core.compositions.composition.Composition.execute"><code class="xref any py py-meth docutils literal"><span class="pre">execute</span></code></a> - executes a single <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> without learning.</li>
</ul>
</div></blockquote>
<p>The <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> and <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a> methods are the most commonly used.  Both of these
can execute multiple trials (specified in their <strong>num_trials</strong> argument), calling the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.execute" title="psyneulink.core.compositions.composition.Composition.execute"><code class="xref any py py-meth docutils literal"><span class="pre">execute</span></code></a> method for each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>.  The <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.execute" title="psyneulink.core.compositions.composition.Composition.execute"><code class="xref any py py-meth docutils literal"><span class="pre">execute</span></code></a> method
can also be called directly, but this is useful mostly for debugging.</p>
<p><em>Inputs</em>. All methods of executing a Composition require specification of an <strong>inputs</strong> argument, which designates
the values assigned to the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> of the Composition for each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>.
A <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> is defined as the opportunity for every Node in the Composition to execute for a given
set of inputs. The inputs for each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> can be specified using an <a class="reference internal" href="#composition-input-dictionary"><span class="std std-ref">input dictionary</span></a>; for the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> and <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a> methods, they
can also be specified <a class="reference internal" href="#composition-programmatic-inputs"><span class="std std-ref">programmatically</span></a> (see <a class="reference internal" href="Run.html#composition-execution-inputs"><span class="std std-ref">Inputs</span></a>).
The same number of inputs must be specified for every <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Node, unless only one value is specified for a Node
(in which case that value is provided as the input to that Node for all <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s executed).</p>
<p id="composition-execution-results"><em>Results</em>. At the end of a <code class="xref any docutils literal"><span class="pre">TRIAL</span></code> (a list of
the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.output_values" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.output_values"><code class="xref any py py-attr docutils literal"><span class="pre">output_values</span></code></a> for all of its <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Nodes) are added to the Composition’s
<code class="xref any docutils literal"><span class="pre">results</span></code> attribute, and the <code class="xref any docutils literal"><span class="pre">output_values</span></code> for the last <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> executed is returned by the <a class="reference internal" href="#composition-execution-methods"><span class="std std-ref">execution method</span></a>.</p>
<p><em>Number of trials</em>. If the the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.execute" title="psyneulink.core.compositions.composition.Composition.execute"><code class="xref any py py-meth docutils literal"><span class="pre">execute</span></code></a> method is used, a single <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> is
executed;  if the <strong>inputs</strong> specifies more than one <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale" title="psyneulink.core.scheduling.time.TimeScale"><code class="xref any py py-class docutils literal"><span class="pre">TRIAL</span></code></a>s worth of input, an error is generated.
For the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> and <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a>, the <strong>num_trials</strong> argument can be used to specify
the number of <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s to execute; if its value execeeds the number of inputs provided for each
Node in the <strong>inputs</strong> argument, then the inputs are recycled from the beginning of the lists, until the number of
<a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s specified in <strong>num_trials</strong> has been executed.  If <strong>num_trials</strong> is not specified,
then a number of <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s is executed equal to the number of inputs provided for each <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> in <strong>inputs</strong> argument.</p>
<p><em>Learning</em>. If a Composition is configured for <a class="reference internal" href="#composition-learning"><span class="std std-ref">learning</span></a> then, for learning to occur, its
<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a> method must be used in place of the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> method, and its
<code class="xref any docutils literal"><span class="pre">disable_learning</span></code> attribute must be False (the default).  The <strong>inputs</strong> argument
must also specify an input for the Composition’s <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">TARGET_MECHANISM</span></a>.  The <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> and <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.execute" title="psyneulink.core.compositions.composition.Composition.execute"><code class="xref any py py-meth docutils literal"><span class="pre">execute</span></code></a> methods can also be used to execute the Composition, but no
learning will occur, irrespective of the value of the <code class="xref any docutils literal"><span class="pre">disable_learning</span></code> attribute.</p>
<div class="section" id="input-formats">
<span id="composition-execution-inputs"></span><h4><em>Input formats</em><a class="headerlink" href="#input-formats" title="Permalink to this headline">¶</a></h4>
<p>The <strong>inputs</strong> argument of the Composition’s <a class="reference internal" href="#composition-execution-methods"><span class="std std-ref">execution methods</span></a> is used to
specify the inputs to the Composition for each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>.  These are provided to the Composition’s
<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> each time it is executed. There are two ways to specify inputs:</p>
<blockquote>
<div><ul class="simple">
<li>using <a class="reference internal" href="#composition-input-dictionary"><span class="std std-ref">a dictionary</span></a>, in which the inputs are specified or each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> explicitly;</li>
<li><a class="reference internal" href="#composition-programmatic-inputs"><span class="std std-ref">programmtically</span></a>, using a function, generator or generator function
that constructs the inputs dynamically on a <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> by <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> basis.</li>
</ul>
</div></blockquote>
<p>The <strong>inputs</strong> argument of the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> and  <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a> methods can be specified in
either way;  however, only the dictionary format can be used for the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.execute" title="psyneulink.core.compositions.composition.Composition.execute"><code class="xref any py py-meth docutils literal"><span class="pre">execute</span></code></a> method, since
it executes only one <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> at a time, and therefore can only accept inputs for a single <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>.</p>
<p><em>Inputs and input_ports</em>. Both formats must specify the inputs to be assigned, on each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>, to
the InputPorts of the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> that require external inputs. These are listed
in the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_ports" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_ports"><code class="xref any py py-attr docutils literal"><span class="pre">external_input_ports</span></code></a> attribute of the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a>
<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a>, and the corresponding attribute (<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.external_input_ports" title="psyneulink.core.compositions.composition.Composition.external_input_ports"><code class="xref any py py-attr docutils literal"><span class="pre">external_input_ports</span></code></a>)
of any <a class="reference internal" href="#composition-nested"><span class="std std-ref">nested Composition</span></a> that is an <a class="reference internal" href="#composition-nested-external-input-ports"><span class="std std-ref">INPUT Node of the Composition being being executed</span></a>)</p>
<p>These factors determine the format of each entry in an <code class="xref any docutils literal"><span class="pre">inputs</span> <span class="pre">dictionary</span></code>
of inputs, as described in detail below (also see <a class="reference internal" href="#composition-examples-input"><span class="std std-ref">examples</span></a>).</p>
<div class="section" id="input-dictionary">
<span id="composition-input-dictionary"></span><h5>Input Dictionary<a class="headerlink" href="#input-dictionary" title="Permalink to this headline">¶</a></h5>
<p>The simplest way to specificy inputs is using a dict, in which each entry specifies the inputs to a given
<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a>.  The key of each entry is a Node, and the value is a list of the inputs
to that Node, one for each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> to be executed (i.e., the i-th item of the list represents
the  input to the Node on <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> i).  The same number of input values must be specified in each
entry, unless only a single input value is specified is in an entry, in which case that input is presented to the
corresonding Node in every <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>.</p>
<div class="figure" id="id16">
<span id="composition-execution-input-dict-fig"></span><img alt="Example input dict specification showing inputs specified for each Node and its InputPorts" src="_static/Composition_input_dict_spec.svg" /><p class="caption"><span class="caption-text">Exaxmple input dict specification, in which the first entry is for Mechanism <code class="docutils literal"><span class="pre">a</span></code> with one <a class="reference internal" href="InputPort.html"><span class="doc">InputPort</span></a> that takes
an array of length 2 as its input, and for which two <code class="xref any docutils literal"><span class="pre">TRIAL</span></code>s worth of input are specified
(<code class="docutils literal"><span class="pre">[1.0,</span> <span class="pre">2.0]</span></code> and <code class="docutils literal"><span class="pre">[3,0,</span> <span class="pre">4.0]</span></code>);  the second entry is for Mechanism <code class="docutils literal"><span class="pre">b</span></code> with two InputPorts, one of which
takes an array of length 1 as its input and the other an array of length 2, and for which two <code class="xref any docutils literal"><span class="pre">TRIAL</span></code>s worth of input are also specified (<code class="docutils literal"><span class="pre">[[1.0],</span> <span class="pre">[2.0,</span> <span class="pre">3.0]]</span></code> and <code class="docutils literal"><span class="pre">[[4.0],</span> <span class="pre">[5.0,</span> <span class="pre">6.0]]</span></code>);
and, finaly, a third entry is for Mechanism <code class="docutils literal"><span class="pre">c</span></code> with only one InputPort that takes an array of length 1 as its
input, and for which only one input is specified (<code class="docutils literal"><span class="pre">[1.0]</span></code>), which is therefore provided as the input to
Mechanism <code class="docutils literal"><span class="pre">c</span></code> on every <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>.</span></p>
</div>
<p>Each input value must be compatible with the number of <a class="reference internal" href="InputPort.html"><span class="doc">InputPorts</span></a> that receive external input for
that Node.  These are listed in its <code class="docutils literal"><span class="pre">external_input_ports</span></code> attribute (<a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_ports" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_ports"><code class="xref any py py-attr docutils literal"><span class="pre">here</span></code></a>
if it is Mechanism, or <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.external_input_ports" title="psyneulink.core.compositions.composition.Composition.external_input_ports"><code class="xref any py py-attr docutils literal"><span class="pre">here</span></code></a> if it is a Composition).  More specifically, the
shape of the input value must be compatible with the shape of the Node’s <code class="xref any docutils literal"><span class="pre">extrernal_input_values</span></code> attribute (<a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_values" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_values"><code class="xref any py py-attr docutils literal"><span class="pre">here</span></code></a> if it is Mechanism, or <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.external_input_values" title="psyneulink.core.compositions.composition.Composition.external_input_values"><code class="xref any py py-attr docutils literal"><span class="pre">here</span></code></a> if it is
a Composition).  While these are always 2d arrays, the number and size of the items (corresponding to each InputPort)
may vary;  in some case shorthand notations are allowed, as illustrated in the <a class="reference internal" href="#composition-examples-input-dictionary"><span class="std std-ref">examples</span></a> below.</p>
</div>
<div class="section" id="specifying-inputs-programmatically">
<span id="composition-programmatic-inputs"></span><h5>Specifying Inputs Programmatically<a class="headerlink" href="#specifying-inputs-programmatically" title="Permalink to this headline">¶</a></h5>
<p>Inputs can also be specified programmticaly, in a <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> by <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> manner,
using a function, generator, or generator function.</p>
<p>A function used as input must take as its sole argument the current <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> number and return a
value that satisfies all rules above for standard input specification. The only difference is that on each execution,
the function must return the input values for each <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> for a single <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Default behavior when passing a function as input to a Composition is to execute for only one <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>. Remember to set the num_trials argument of Composition.run if you intend to cycle through
multiple <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s.</p>
</div>
<p>Complete input specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">default_variable</span><span class="o">=</span><span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">function_as_input</span><span class="p">(</span><span class="n">trial_num</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">a_inputs</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],[</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">]]</span>
<span class="gp">... </span>    <span class="n">this_trials_inputs</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="n">a</span><span class="p">:</span> <span class="n">a_inputs</span><span class="p">[</span><span class="n">trial_num</span><span class="p">]</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">this_trials_inputs</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">function_as_input</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">num_trials</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>A generator can also be used as input. On each yield, it should return a value that satisfies all rules above for
standard input specification. The only difference is that on each execution, the generator must yield the input values
for each <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> for a single <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Default behavior when passing a generator is to execute until the generator is exhausted. If the num_trials
argument of Composition.run is set, the Composition will execute EITHER until exhaustion, or until num_trials has
been reached - whichever comes first.</p>
</div>
<p>Complete input specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="n">default_variable</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">generator_as_input</span><span class="p">():</span>
<span class="gp">... </span>   <span class="n">a_inputs</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">7.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">]]</span>
<span class="gp">... </span>   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a_inputs</span><span class="p">)):</span>
<span class="gp">... </span>       <span class="n">this_trials_inputs</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="n">a_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]}</span>
<span class="gp">... </span>       <span class="k">yield</span> <span class="n">this_trials_inputs</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">generator_instance</span> <span class="o">=</span> <span class="n">generator_as_input</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Because the num_trials argument is set to 2, the below call to run will result in only 2 executions of</span>
<span class="gp">... </span><span class="c1"># comp, even though it would take three executions to exhaust the generator.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">generator_instance</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">num_trials</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>If a generator function is used, the Composition will instantiate the generator and use that as its input. Thus,
the returned generator instance of a generator function must follow the same rules as a generator instance passed
directly to the Composition.</p>
<p>Complete input specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="n">default_variable</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">generator_function_as_input</span><span class="p">():</span>
<span class="gp">... </span>   <span class="n">a_inputs</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">]]</span>
<span class="gp">... </span>   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a_inputs</span><span class="p">)):</span>
<span class="gp">... </span>       <span class="n">this_trials_inputs</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="n">a_inputs</span><span class="p">[</span><span class="n">i</span><span class="p">]}</span>
<span class="gp">... </span>       <span class="k">yield</span> <span class="n">this_trials_inputs</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">generator_function_as_input</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="execution-contexts">
<span id="composition-execution-context"></span><h4><em>Execution Contexts</em><a class="headerlink" href="#execution-contexts" title="Permalink to this headline">¶</a></h4>
<p>A Composition is always executed in a designated <em>execution context</em>, specified by an <a class="reference internal" href="Context.html#psyneulink.core.globals.context.Context.execution_id" title="psyneulink.core.globals.context.Context.execution_id"><code class="xref any py py-attr docutils literal"><span class="pre">execution_id</span></code></a> that can be provided to the <strong>context</strong> argument of the method used to execute the
Composition. Execution contexts make several capabilities possible:</p>
<blockquote>
<div><ul class="simple">
<li>A <a class="reference internal" href="Component.html"><span class="doc">Component</span></a> can be assigned to, and executed in more than one Composition, preserving its <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.value" title="psyneulink.core.components.component.Component.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> and that of its <a class="reference internal" href="Parameters.html#parameter-statefulness"><span class="std std-ref">parameters</span></a> independently for each of
the Compositions to which it is assigned.</li>
<li>The same Composition can be exectued independently in different contexts; this can be used for
parallelizing parameter estimation, both for data fitting (see <code class="xref any docutils literal"><span class="pre">ParameterEstimationMechanism</span></code>), and
for simulating the Composition in <a class="reference internal" href="OptimizationControlMechanism.html#optimizationcontrolmechanism-model-based"><span class="std std-ref">model-based optimization</span></a>
(see <a class="reference internal" href="OptimizationControlMechanism.html"><span class="doc">OptimizationControlMechanism</span></a>).</li>
</ul>
</div></blockquote>
<p>If no <a class="reference internal" href="Context.html#psyneulink.core.globals.context.Context.execution_id" title="psyneulink.core.globals.context.Context.execution_id"><code class="xref any py py-attr docutils literal"><span class="pre">execution_id</span></code></a> is specified, the <code class="xref any docutils literal"><span class="pre">default</span> <span class="pre">execution_id</span></code>
is used, which is generally the Composition’s <code class="xref any docutils literal"><span class="pre">name</span></code>; however, any <a class="reference external" href="https://docs.python.org/3/glossary.html">hashable</a> value (e.g., a string, a number, or <a class="reference internal" href="Component.html"><span class="doc">Component</span></a>) can be used.
That execution_id can then be used to retrieve the <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.value" title="psyneulink.core.components.component.Component.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of any of the Composition’s
Components or their <a class="reference internal" href="Parameters.html#parameter-statefulness"><span class="std std-ref">parameters</span></a> that were assigned during the execution. If a Component is
executed outside of a Composition (e.g, a <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> is executed on its own using its <code class="xref any docutils literal"><span class="pre">execute</span></code> method), then any assignments to its <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.value" title="psyneulink.core.components.component.Component.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> and/or that of its parameters
is given an execution_id of <code class="xref any docutils literal"><span class="pre">None</span></code>.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.value" title="psyneulink.core.components.component.Component.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of a Component or a parameter is queried using <a class="reference internal" href="Parameters.html#parameter-dot-notation"><span class="std std-ref">dot notation</span></a>, then its most recently assigned value is returned.  To retrieve the
value associated with a particular execution context, the parameter’s <a class="reference internal" href="Parameters.html#psyneulink.core.globals.parameters.Parameter.get" title="psyneulink.core.globals.parameters.Parameter.get"><code class="xref any py py-meth docutils literal"><span class="pre">get</span></code></a> method must be used:
<code class="docutils literal"><span class="pre">&lt;Component&gt;.paramters.&lt;parameter_name&gt;.get(execution_id)</span></code>, where <code class="docutils literal"><span class="pre">value</span></code> can used as the paramter_name
to retrieve the Component’s <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.value" title="psyneulink.core.components.component.Component.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a>, and the name of any of its other parameters to get their
value.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="compilation">
<span id="composition-compilation"></span><h4><em>Compilation</em><a class="headerlink" href="#compilation" title="Permalink to this headline">¶</a></h4>
<p>By default, a Composition is executed using the Python interpreter used to run the script from which it is called. In
many cases, a Composition can also be executed in a compiled mode.  While this can add some time to initiate execution,
execution itself can be several orders of magnitude faster than using the Python interpreter.  Thus, using a compiled
mode can be useful for executing Compositions that are complex and/or for large numbers of <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s.
Compilation is supported for most CPUs (including x86, arm64, and powerpc64le).  Several modes can be specified, that
that tradeoff power (i.e., degree of speed-up) against level of support (i.e., likelihood of success).  Most PsyNeuLink
<a class="reference internal" href="Component.html"><span class="doc">Components</span></a> and methods are supported for compilation;  however, Python native functions and methods
(e.g., used to specify the <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.function" title="psyneulink.core.components.component.Component.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> of a Component) are not supported at present, including
their use in a <a class="reference internal" href="UserDefinedFunction.html"><span class="doc">UserDefinedFunction</span></a>.  Users are strongly urged to report any other compilation failures to
<a class="reference external" href="mailto:psyneulinkhelp&#37;&#52;&#48;princeton&#46;edu">psyneulinkhelp<span>&#64;</span>princeton<span>&#46;</span>edu</a>, or as an issue <a class="reference external" href="https://github.com/PrincetonUniversity/PsyNeuLink/issues">here</a>.
Known failure conditions are listed <a class="reference external" href="https://github.com/PrincetonUniversity/PsyNeuLink/milestone/2">here</a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Compiled modes are continuing to be developed and refined, and therefore it is still possible that there are
bugs that will not cause compilation to fail, but could produce erroneous results.  Therefore, it is strongly
advised that if compilation is used, suitable tests are conducted that the results generated are identical to
those generated when the Composition is executed using the Python interpreter.</p>
</div>
<p id="composition-compiled-modes">The <strong>bin_execute</strong> argument of an <a class="reference internal" href="#composition-execution-methods"><span class="std std-ref">execution method</span></a> specifies whether to use a
compiled mode and, if so,  which.  If True is specified, an attempt is made to use the most powerful mode (LLVMRun)
and, if that fails, to try progressively less powerful modes (issueing a warning indicating the unsupported feature
that caused the failure), reverting to the Python interpreter if all compiled modes fail.  If a particular mode is
specified and fails, an error is generated indicating the unsupported feature that failed. The compiled modes,
in order of their power, are:</p>
<blockquote id="composition-compilation-llvm">
<div><ul class="simple">
<li><em>True</em> – try to use the one that yields the greatesst improvement, progressively reverting to less powerful
but more forgiving modes, in the order listed below, for each that fails;</li>
<li><em>LLVMRun</em> – compile and run multiple <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s; if successful, the compiled binary is
semantically equivalent to the execution of the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> method using the Python interpreter;</li>
<li><em>LLVMExec</em> – compile and run each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>, using the Python interpreter to iterate over them;
if successful, the compiled binary for each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> is semantically equivalent the execution
of the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.execute" title="psyneulink.core.compositions.composition.Composition.execute"><code class="xref any py py-meth docutils literal"><span class="pre">execute</span></code></a> method using the Python interpreter;</li>
<li><em>LLVM</em> – compile and run <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> of the <a class="reference internal" href="#"><span class="doc">Composition</span></a> and their <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a>,
using the Python interpreter to call the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.scheduler" title="psyneulink.core.compositions.composition.Composition.scheduler"><code class="xref any py py-attr docutils literal"><span class="pre">scheduler</span></code></a>, execute each Node
and iterate over <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s; note that, in this mode, scheduling <a class="reference internal" href="Condition.html"><span class="doc">Conditions</span></a>
that rely on Node <a class="reference internal" href="Parameters.html"><span class="doc">Parameters</span></a> is not supported;</li>
<li><em>Python</em> (same as <em>False</em>; the default) – use the Python interpreter to execute the <a class="reference internal" href="#"><span class="doc">Composition</span></a>.</li>
</ul>
</div></blockquote>
<p id="composition-compilation-ptx"><em>GPU support.</em>  In addition to compilation for CPUs, support is being developed for <a class="reference external" href="https://developer.nvidia.com/about-cuda">CUDA</a> capable <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_Nvidia_graphics_processing_units">Invidia GPUs</a>.  This can be invoked by specifying one
of the following modes in the <strong>bin_execute</strong> argument of a <a class="reference internal" href="#composition-execution-methods"><span class="std std-ref">Composition execution method</span></a>:</p>
<blockquote>
<div><ul class="simple">
<li><em>PTX|PTXExec|PTXRun</em> – equivalent to the LLVM counterparts but run in a single thread of a CUDA capable GPU.</li>
</ul>
</div></blockquote>
<p>This requires that a working <a class="reference external" href="https://documen.tician.de/pycuda/">pycuda package</a> is
<a class="reference external" href="https://wiki.tiker.net/PyCuda/Installation">installed</a>, and that CUDA execution is explicitly enabled by setting
the <code class="docutils literal"><span class="pre">PNL_LLVM_DEBUG</span></code> environment variable to <code class="docutils literal"><span class="pre">cuda</span></code>.  At present compilation using these modes runs on a single
GPU thread, and therefore does not produce any performance benefits over running in compiled mode on a CPU;  (see
<a class="reference external" href="https://github.com/PrincetonUniversity/PsyNeuLink/projects/1">this</a> for progress extending support of parallization
in compiled modes).</p>
</div>
</div>
<div class="section" id="visualizing-a-composition">
<span id="composition-visualization"></span><h3>Visualizing a Composition<a class="headerlink" href="#visualizing-a-composition" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> method generates a display of the graph structure of Nodes (Mechanisms and
Nested Compositions) and Projections in the Composition (based on the Composition’s <code class="xref any docutils literal"><span class="pre">processing</span> <span class="pre">graph</span></code>).</p>
<p>By default, Nodes are shown as ovals labeled by their <code class="xref any docutils literal"><span class="pre">names</span></code>, with the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Mechanisms shown in green, its <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Mechanisms shown in red, and Projections
shown as unlabeled arrows, as illustrated for the Composition in the example below:</p>
<table border="1" class="docutils" id="composition-show-graph-basic-figure">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">psyneulink</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span>
<span class="go">              name=&#39;A&#39;,</span>
<span class="gp">... </span>          <span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>          <span class="n">output_ports</span><span class="o">=</span><span class="p">[</span><span class="n">RESULT</span><span class="p">,</span> <span class="n">MEAN</span><span class="p">]</span>
<span class="gp">... </span>          <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span>
<span class="gp">... </span>          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">,</span>
<span class="gp">... </span>          <span class="n">size</span><span class="o">=</span><span class="mi">5</span>
<span class="gp">... </span>          <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span>
<span class="gp">... </span>          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span>
<span class="gp">... </span>          <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>          <span class="n">function</span><span class="o">=</span><span class="n">Logistic</span><span class="p">(</span><span class="n">gain</span><span class="o">=</span><span class="n">pnl</span><span class="o">.</span><span class="n">CONTROL</span><span class="p">)</span>
<span class="gp">... </span>          <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span>
<span class="gp">... </span>          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Comp&#39;</span><span class="p">,</span>
<span class="gp">... </span>          <span class="n">enable_controller</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">... </span>          <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">c</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ctlr</span> <span class="o">=</span> <span class="n">OptimizationControlMechanism</span><span class="p">(</span>
<span class="gp">... </span>           <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Controller&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">monitor_for_control</span><span class="o">=</span><span class="p">[(</span><span class="n">pnl</span><span class="o">.</span><span class="n">MEAN</span><span class="p">,</span> <span class="n">a</span><span class="p">)],</span>
<span class="gp">... </span>           <span class="n">control_signals</span><span class="o">=</span><span class="p">(</span><span class="n">GAIN</span><span class="p">,</span> <span class="n">c</span><span class="p">),</span>
<span class="gp">... </span>           <span class="n">agent_rep</span><span class="o">=</span><span class="n">comp</span>
<span class="gp">... </span>           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_controller</span><span class="p">(</span><span class="n">ctlr</span><span class="p">)</span>
</pre></div>
</div>
</td>
<td><div class="first last figure">
<img alt="_images/Composition_show_graph_basic_fig.svg" src="_images/Composition_show_graph_basic_fig.svg" /></div>
</td>
</tr>
</tbody>
</table>
<p>Note that the Composition’s <code class="xref any docutils literal"><span class="pre">controller</span></code> is not shown by default.  However this
can be shown, along with other information, using options in the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a>
method.  The figure below shows several examples.</p>
<p id="composition-show-graph-options-figure"><strong>Output of show_graph using different options</strong></p>
<div class="figure" id="id17">
<a class="reference internal image-reference" href="_images/Composition_show_graph_options_fig.svg"><img alt="Composition graph examples" src="_images/Composition_show_graph_options_fig.svg" /></a>
<p class="caption"><span class="caption-text">Displays of the Composition in the <a class="reference internal" href="#composition-show-graph-basic-figure"><span class="std std-ref">example above</span></a>, generated using various
options of its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> method. <strong>Panel A</strong> shows the graph with its Projections labeled
and Component dimensions displayed.  <strong>Panel B</strong> shows the <code class="xref any docutils literal"><span class="pre">controller</span></code> for the
Composition and its associated <a class="reference internal" href="ObjectiveMechanism.html"><span class="doc">ObjectiveMechanism</span></a> using the <strong>show_controller</strong> option (controller-related
Components are displayed in blue by default).  <strong>Panel C</strong> adds the Composition’s <a class="reference internal" href="CompositionInterfaceMechanism.html"><span class="doc">CompositionInterfaceMechanisms</span></a> using the <strong>show_cim</strong> option. <strong>Panel D</strong> shows a detailed view of the Mechanisms
using the <strong>show_node_structure</strong> option, that includes their <a class="reference internal" href="Port.html"><span class="doc">Ports</span></a> and their <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">roles</span></code></a> in the
Composition. <strong>Panel E</strong> shows an even more detailed view using <strong>show_node_structure</strong> as well as <strong>show_cim</strong>.</span></p>
</div>
<p>If a Composition has one ore more Compositions nested as Nodes within it, these can be shown using the
<strong>show_nested</strong> option. For example, the pathway in the script below contains a sequence of Mechanisms
and nested Compositions in an outer Composition, <code class="docutils literal"><span class="pre">comp</span></code>:</p>
<table border="1" class="docutils" id="composition-show-graph-show-nested-figure">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mech_stim</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;STIMULUS&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mech_A1</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;A1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mech_B1</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;B1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp1</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp1</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">mech_A1</span><span class="p">,</span>
<span class="gp">... </span>                                     <span class="n">mech_B1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mech_A2</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;A2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mech_B2</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;B2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp2</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp2</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">mech_A2</span><span class="p">,</span>
<span class="gp">... </span>                                     <span class="n">mech_B2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mech_resp</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;RESPONSE&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">mech_stim</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">comp1</span><span class="p">,</span> <span class="n">comp2</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">mech_resp</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">show_graph</span><span class="p">(</span><span class="n">show_nested</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</td>
<td><div class="first last figure">
<img alt="_images/Composition_show_graph_show_nested_fig.svg" src="_images/Composition_show_graph_show_nested_fig.svg" /></div>
</td>
</tr>
</tbody>
</table>
<p class="rubric" id="composition-examples">Examples</p>
<div class="section" id="composition-creation-examples">
<span id="id4"></span><h4><em>Creating a Composition</em><a class="headerlink" href="#composition-creation-examples" title="Permalink to this headline">¶</a></h4>
<p><em>Create Mechanisms:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Create Projections:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">A_to_B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">MappingProjection</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;A-to-B&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B_to_C</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">MappingProjection</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;B-to-C&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Create Composition; Add Nodes (Mechanisms) and Projections using the add_linear_processing_pathway method:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp_0</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp-0&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_0</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway</span><span class="o">=</span><span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">A_to_B</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">B_to_C</span><span class="p">,</span> <span class="n">C</span><span class="p">])</span>
</pre></div>
</div>
<p><em>Create Composition; Add Nodes (Mechanisms) and Projections via the add_nodes and add_projection methods:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp_1</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp-1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_1</span><span class="o">.</span><span class="n">add_nodes</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_1</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">A_to_B</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_1</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">B_to_C</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Create Composition; Add Nodes (Mechanisms) and Projections via the add_node and add_projection methods:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp-2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">A</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">B</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">C</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">A_to_B</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">B_to_C</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Run each Composition:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">A</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]]]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_0_output</span> <span class="o">=</span> <span class="n">comp_0</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_1_output</span> <span class="o">=</span> <span class="n">comp_1</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2_output</span> <span class="o">=</span> <span class="n">comp_2</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Create outer Composition:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer_A</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_A&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_comp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">add_nodes</span><span class="p">([</span><span class="n">outer_A</span><span class="p">,</span> <span class="n">outer_B</span><span class="p">])</span>
</pre></div>
</div>
<p><em>Create and configure inner Composition:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">inner_A</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_A&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_comp</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_comp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">inner_A</span><span class="p">,</span> <span class="n">inner_B</span><span class="p">])</span>
</pre></div>
</div>
<p><em>Nest inner Composition within outer Composition using</em> <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_node" title="psyneulink.core.compositions.composition.Composition.add_node"><code class="xref any py py-meth docutils literal"><span class="pre">add_node</span></code></a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">inner_comp</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Create Projections:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">pnl</span><span class="o">.</span><span class="n">MappingProjection</span><span class="p">(),</span> <span class="n">sender</span><span class="o">=</span><span class="n">outer_A</span><span class="p">,</span> <span class="n">receiver</span><span class="o">=</span><span class="n">inner_comp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">pnl</span><span class="o">.</span><span class="n">MappingProjection</span><span class="p">(),</span> <span class="n">sender</span><span class="o">=</span><span class="n">inner_comp</span><span class="p">,</span> <span class="n">receiver</span><span class="o">=</span><span class="n">outer_B</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">outer_A</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]]]}</span>
</pre></div>
</div>
</div>
<div class="section" id="run-composition">
<h4><em>Run Composition</em><a class="headerlink" href="#run-composition" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Using</em> <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a> <em>with nested compositions for
brevity:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer_A</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_A&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_comp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_A</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_A&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_comp</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_comp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">inner_A</span><span class="p">,</span> <span class="n">inner_B</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">outer_A</span><span class="p">,</span> <span class="n">inner_comp</span><span class="p">,</span> <span class="n">outer_B</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">outer_A</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]]]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="composition-examples-input">
<span id="id5"></span><h4><em>Input Formats</em><a class="headerlink" href="#composition-examples-input" title="Permalink to this headline">¶</a></h4>
<div class="section" id="examples-of-input-dictionary-specifications">
<span id="composition-examples-input-dictionary"></span><h5>Examples of Input Dictionary Specifications<a class="headerlink" href="#examples-of-input-dictionary-specifications" title="Permalink to this headline">¶</a></h5>
<p>The following is an example in which the <strong>inputs</strong> argument of the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> method is specified
as an <a class="reference internal" href="#composition-input-dictionary"><span class="std std-ref">input dictionary</span></a>, with entries for the two <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a>
of the <a class="reference internal" href="#"><span class="doc">Composition</span></a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">default_variable</span><span class="o">=</span><span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">default_variable</span><span class="o">=</span><span class="p">[[</span><span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pathway2</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">,</span> <span class="n">pathways</span><span class="o">=</span><span class="p">[</span><span class="n">patway1</span><span class="p">,</span> <span class="n">pathway2</span><span class="p">])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]],</span>
<span class="gp">... </span>                    <span class="n">b</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">]]]}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>Since the specification of the <a class="reference internal" href="Component.html#component-variable"><span class="std std-ref">default_variable</span></a> for Mechanism <code class="docutils literal"><span class="pre">a</span></code> is a single array of
length 2, it is constructed with a single <a class="reference internal" href="InputPort.html"><span class="doc">InputPort</span></a> (see <a class="reference internal" href="Mechanism.html#mechanism-inputports"><span class="std std-ref">InputPorts</span></a>) that takes an array of that
shape as its input; therefore, the input value specified for each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> is a length 2 array
(<code class="docutils literal"><span class="pre">[1.0,</span> <span class="pre">1.0]</span></code>).  In contrast, since the <a class="reference internal" href="Component.html#component-variable"><span class="std std-ref">default_variable</span></a> for Mechanism <code class="docutils literal"><span class="pre">b</span></code> is two
length 1 arrays, so it is constructed with two InputPorts, each of which takes a length 1 array as its input;
therefore, the input specified for each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> must be two length 1 arrays.  See <a class="reference internal" href="#composition-execution-input-dict-fig"><span class="std std-ref">figure</span></a> for an illustration of the format for an input dictionary.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node's</span></a> <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.external_input_values" title="psyneulink.core.compositions.composition.Composition.external_input_values"><code class="xref any py py-attr docutils literal"><span class="pre">external_input_values</span></code></a> attribute is always a 2d list in which the index i
element is the value of the i’th element of the Node’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.external_input_ports" title="psyneulink.core.compositions.composition.Composition.external_input_ports"><code class="xref any py py-attr docutils literal"><span class="pre">external_input_ports</span></code></a> attribute.  For Mechanisms,
the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_values" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_values"><code class="xref any py py-attr docutils literal"><span class="pre">external_input_values</span></code></a> is often the same as its <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.variable" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.variable"><code class="xref any py py-attr docutils literal"><span class="pre">variable</span></code></a>.  However, some Mechanisms may have InputPorts marked as <a class="reference internal" href="InputPort.html#psyneulink.core.components.ports.inputport.InputPort.internal_only" title="psyneulink.core.components.ports.inputport.InputPort.internal_only"><code class="xref any py py-attr docutils literal"><span class="pre">internal_only</span></code></a> which are excluded from its <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_ports" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_ports"><code class="xref any py py-attr docutils literal"><span class="pre">external_input_ports</span></code></a>
and therefore its <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_values" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.external_input_values"><code class="xref any py py-attr docutils literal"><span class="pre">external_input_values</span></code></a>, and so should not receive an
input value.  The same considerations extend to the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.external_input_ports" title="psyneulink.core.compositions.composition.Composition.external_input_ports"><code class="xref any py py-attr docutils literal"><span class="pre">external_input_ports</span></code></a>
and <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.external_input_values" title="psyneulink.core.compositions.composition.Composition.external_input_values"><code class="xref any py py-attr docutils literal"><span class="pre">external_input_values</span></code></a> of a Composition, based on the Mechanisms and/or
<a class="reference internal" href="#composition-nested"><span class="std std-ref">nested Compositions</span></a> that comprise its <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Nodes.</p>
</div>
<p>If num_trials is not in use, the number of inputs provided determines the number of <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s in
the run. For example, if five inputs are provided for each <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a>, and num_trials is not
specified, the Composition executes five times.</p>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="13%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Input to Mechanism a</td>
<td>1.0</td>
<td>2.0</td>
<td>3.0</td>
<td>4.0</td>
<td>5.0</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">3.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">4.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">5.0</span><span class="p">]]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>The number of inputs specified <strong>must</strong> be the same for all Nodes in the input dictionary (except for any Nodes for
which only one input is specified). In other words, all of the values in the input dictionary must have the same length
as each other (or length 1).</p>
<p>If num_trials is in use, <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> iterates over the inputs until num_trials is reached. For example, if five inputs
are provided for each <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a>, and num_trials is not specified, the Composition executes
five times., and num_trials = 7, the system executes seven times. The input values from <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s
0 and 1 are used again on <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s 5 and 6, respectively.</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="11%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr class="row-even"><td>Input to Mechanism a</td>
<td>1.0</td>
<td>2.0</td>
<td>3.0</td>
<td>4.0</td>
<td>5.0</td>
<td>1.0</td>
<td>2.0</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">3.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">4.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">5.0</span><span class="p">]]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">num_trials</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
<p>For convenience, condensed versions of the input specification described above are also accepted in the following
situations:</p>
<ul class="simple">
<li><strong>Case 1:</strong> <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> <strong>has only one InputPort</strong></li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="12%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Input to <strong>Mechanism a</strong></td>
<td>1.0</td>
<td>2.0</td>
<td>3.0</td>
<td>4.0</td>
<td>5.0</td>
</tr>
</tbody>
</table>
<p>Complete input specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">3.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">4.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">5.0</span><span class="p">]]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>Shorthand - drop the outer list on each input because <strong>Mechanism a</strong> only has one InputPort:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">4.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">5.0</span><span class="p">]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>Shorthand - drop the remaining list on each input because <strong>Mechanism a</strong>’s one InputPort’s value is length 1:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>Case 2: Only one input is provided for the</strong> <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a></li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="59%" />
<col width="41%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
</tr>
<tr class="row-even"><td>Input to <strong>Mechanism a</strong></td>
<td>[[1.0], [2.0]]</td>
</tr>
</tbody>
</table>
<p>Complete input specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>
<span class="go">                              default_variable=[[0.0], [0.0]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>Shorthand - drop the outer list on <strong>Mechanism a</strong>’s input specification because there is only one
<a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>Case 3: The same input is used on all</strong> <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>s</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="15%" />
<col width="16%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Input to <strong>Mechanism a</strong></td>
<td>[[1.0], [2.0]]</td>
<td>[[1.0], [2.0]]</td>
<td>[[1.0], [2.0]]</td>
<td>[[1.0], [2.0]]</td>
<td>[[1.0], [2.0]]</td>
</tr>
</tbody>
</table>
<p>Complete input specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">default_variable</span><span class="o">=</span><span class="p">[[</span><span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]]]}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>Shorthand - drop the outer list on <strong>Mechanism a</strong>’s input specification and use <code class="xref any docutils literal"><span class="pre">num_trials</span></code> to repeat the input value</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]]}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">num_trials</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>Case 4: There is only one</strong> <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a></li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="30%" />
<col width="30%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-even"><td>Input to <strong>Mechanism a</strong></td>
<td>[1.0, 2.0, 3.0]</td>
<td>[1.0, 2.0, 3.0]</td>
</tr>
</tbody>
</table>
<p>Complete input specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">default_variable</span><span class="o">=</span><span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]]}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>Shorthand - specify <strong>Mechanism a</strong>’s inputs in a list because it is the only <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="examples-of-programmatic-input-specification">
<span id="composition-examples-programmatic-input"></span><h5>Examples of Programmatic Input Specification<a class="headerlink" href="#examples-of-programmatic-input-specification" title="Permalink to this headline">¶</a></h5>
</div>
</div>
<div class="section" id="composition-examples-execution-context">
<span id="id6"></span><h4><em>Execution Contexts</em><a class="headerlink" href="#composition-examples-execution-context" title="Permalink to this headline">¶</a></h4>
<p>An <em>execution context</em> is a scope of execution which has its own set of values for Components and their <a class="reference internal" href="Parameters.html"><span class="doc">parameters</span></a>. This is designed to prevent computations from interfering with each other, when Components are reused,
which often occurs when using multiple or nested Compositions, or running <a class="reference internal" href="OptimizationControlMechanism.html#optimizationcontrolmechanism-execution"><span class="std std-ref">simulations</span></a>. Each execution context is or is associated with an <em>execution_id</em>,
which is often a user-readable string. An <em>execution_id</em> can be specified in a call to <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">Composition.run</span></code></a>, or left
unspecified, in which case the Composition’s <code class="xref any docutils literal"><span class="pre">default</span> <span class="pre">execution_id</span></code> would be used.
When looking for values after a run, it’s important to know the execution context you are interested in, as shown below.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">({</span><span class="n">t</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
<span class="go">[[array([5.])]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">run</span><span class="p">({</span><span class="n">t</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
<span class="go">[[array([10.])]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">({</span><span class="n">t</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span> <span class="n">context</span><span class="o">=</span><span class="s1">&#39;custom execution id&#39;</span><span class="p">)</span>
<span class="go">[[array([20.])]]</span>

<span class="go"># context None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
<span class="go">[[1.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
<span class="go">[[5.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
<span class="go">[[10.]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;custom execution id&#39;</span><span class="p">))</span>
<span class="go">[[20.]]Composition_Controller</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="class-reference">
<span id="composition-class-reference"></span><h3>Class Reference<a class="headerlink" href="#class-reference" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="psyneulink.core.compositions.composition.Composition">
<em class="property">class </em><code class="descclassname">psyneulink.core.compositions.composition.</code><code class="descname">Composition</code><span class="sig-paren">(</span><em>nodes=None</em>, <em>projections=None</em>, <em>pathways=None</em>, <em>disable_learning=False</em>, <em>controller=None</em>, <em>enable_controller=None</em>, <em>controller_mode='after'</em>, <em>controller_condition=&lt;psyneulink.core.scheduling.condition.Always object&gt;</em>, <em>retain_old_simulation_data=None</em>, <em>name=None</em>, <em>prefs=None</em>, <em>**param_defaults</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for Composition.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>nodes</strong> (<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a>, <a class="reference internal" href="#"><span class="doc">Composition</span></a> or list[<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a>, <a class="reference internal" href="#"><span class="doc">Composition</span></a>] : default None) – specifies one or more <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> to add to the Composition;  these are each treated as
<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.SINGLETON" title="psyneulink.core.compositions.composition.NodeRole.SINGLETON"><code class="xref any py py-attr docutils literal"><span class="pre">SINGLETONs</span></code></a> unless they are explicitly assigned <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a>.</li>
<li><strong>projections</strong> (<a class="reference internal" href="Projection.html"><span class="doc">Projection</span></a> or list[<a class="reference internal" href="Projection.html"><span class="doc">Projection</span></a>] : default None) – specifies one or more <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> to add to the Composition;  these are not functional
unless they are explicitly assigned a <code class="xref any docutils literal"><span class="pre">sender</span></code> and <code class="xref any docutils literal"><span class="pre">receiver</span></code>.</li>
<li><strong>pathways</strong> (<em>Pathway specification</em><em> or </em><em>list</em><em>[</em><em>Pathway specification...</em><em>]</em>) – specifies one or more Pathways to add to the Compositions (see <strong>pathways</strong> argument of <code class="xref any docutils literal"><span class="pre">add_pathways</span>
<span class="pre">`Composition.add_pathways</span></code> for specification format).</li>
<li><strong>disable_learning</strong> (<em>bool : default False</em>) – specifies whether <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a> in the Composition are executed when run in
<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learning</span> <span class="pre">mode</span></code></a>.</li>
<li><strong>controller</strong> (<code class="xref any docutils literal"><span class="pre">OptimizationControlmechanism</span></code> : default None) – specifies the <a class="reference internal" href="OptimizationControlMechanism.html"><span class="doc">OptimizationControlMechanism</span></a> to use as the Composition’s <code class="xref any docutils literal"><span class="pre">controller</span></code> (see <a class="reference internal" href="#composition-controller"><span class="std std-ref">Controlling a Composition</span></a> for details).</li>
<li><strong>enable_controller</strong> (<em>bool : default None</em>) – specifies whether the Composition’s <code class="xref any docutils literal"><span class="pre">controller</span></code> is executed when the
Composition is executed.  Set to True by default if <strong>controller</strong> specified;  if set to False,
the <code class="xref any docutils literal"><span class="pre">controller</span></code> is ignored when the Composition is executed.</li>
<li><strong>controller_mode</strong> (<em>Enum</em><em>[</em><em>BEOFRE|AFTER</em><em>] </em><em>: default AFTER</em>) – specifies whether the controller is executed before or after the rest of the Composition
in each trial.  Must be either the keyword <em>BEFORE</em> or <em>AFTER</em>.</li>
<li><strong>controller_condition</strong> (<em>Condition : default Always</em>) – specifies when the Composition’s <code class="xref any docutils literal"><span class="pre">controller</span></code> is executed in a trial.</li>
<li><strong>name</strong> (str : default see <code class="xref any docutils literal"><span class="pre">name</span></code>) – specifies the name of the Composition.</li>
<li><strong>prefs</strong> (<a class="reference internal" href="Preferences.html#psyneulink.core.globals.preferences.PreferenceSet" title="psyneulink.core.globals.preferences.PreferenceSet"><em>PreferenceSet</em></a><em> or </em><em>specification dict : default Composition.classPreferences</em>) – specifies the <a class="reference internal" href="Preferences.html#psyneulink.core.globals.preferences.PreferenceSet" title="psyneulink.core.globals.preferences.PreferenceSet"><code class="xref any py py-class docutils literal"><span class="pre">PreferenceSet</span></code></a> for the Composition; see <code class="xref any docutils literal"><span class="pre">prefs</span></code> for details.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.graph">
<code class="descname">graph</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.graph" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref any docutils literal"><span class="pre">Graph</span></code> – the full <code class="xref any docutils literal"><span class="pre">Graph</span></code> associated with the Composition. Contains both Nodes (<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> or
<a class="reference internal" href="#"><span class="doc">Compositions</span></a>) and <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a></p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.nodes">
<code class="descname">nodes</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>ContentAddressableList[<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> or <a class="reference internal" href="#"><span class="doc">Composition</span></a>] – a list of all <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> in the Composition.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.node_ordering">
<code class="descname">node_ordering</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.node_ordering" title="Permalink to this definition">¶</a></dt>
<dd><p>list[<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> or <a class="reference internal" href="#"><span class="doc">Composition</span></a>] – a list of all <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> in the order in which they were added to the Composition.
COMENT:</p>
<blockquote>
<div>FIX: HOW IS THIS DIFFERENT THAN Composition.nodes?</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway">
<code class="descname">add_backpropagation_learning_pathway</code><span class="sig-paren">(</span><em>pathway</em>, <em>learning_rate=0.05</em>, <em>error_function=None</em>, <em>loss_function='MSE'</em>, <em>learning_update='after'</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method that calls <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_learning_pathway</span></code></a> with <a href="#id7"><span class="problematic" id="id8">**</span></a>learning_function**=`Backpropagation`</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pathway</strong> (<em>List</em>) – specifies nodes of the <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> for the <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning pathway</span></a> (see
<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a> for details of specification).  Any <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjections</span></a> specified or constructed for the Pathway are assigned as <a class="reference internal" href="AutoAssociativeLearningMechanism.html#psyneulink.library.components.mechanisms.modulatory.learning.autoassociativelearningmechanism.AutoAssociativeLearningMechanism.learned_projections" title="psyneulink.library.components.mechanisms.modulatory.learning.autoassociativelearningmechanism.AutoAssociativeLearningMechanism.learned_projections"><code class="xref any py py-attr docutils literal"><span class="pre">learned_projections</span></code></a>.</li>
<li><strong>learning_rate</strong> (<em>float : default 0.05</em>) – specifies the <code class="xref any docutils literal"><span class="pre">learning_rate</span></code> used for the <code class="xref any docutils literal"><span class="pre">Backpropagation</span></code> function of
the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a> in the <strong>pathway</strong>.</li>
<li><strong>error_function</strong> (<em>function : default LinearCombination</em>) – specifies the function assigned to <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> used to compute the error from the target and the
output (<a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a>) of the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TARGET" title="psyneulink.core.compositions.composition.NodeRole.TARGET"><code class="xref any py py-attr docutils literal"><span class="pre">TARGET</span></code></a> (last) Mechanism in the <strong>pathway</strong>).</li>
<li><strong>loss_function</strong> (<em>MSE</em><em> or </em><em>SSE : default MSE</em>) – specifies the loss function used in computing the error term;
MSE = mean squared error, and SSE = sum squared error.</li>
<li><strong>learning_update</strong> (<em>Optional</em><em>[</em><em>bool|ONLINE|AFTER</em><em>] </em><em>: default AFTER</em>) – specifies when the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameters of the <a class="reference internal" href="AutoAssociativeLearningMechanism.html#psyneulink.library.components.mechanisms.modulatory.learning.autoassociativelearningmechanism.AutoAssociativeLearningMechanism.learned_projections" title="psyneulink.library.components.mechanisms.modulatory.learning.autoassociativelearningmechanism.AutoAssociativeLearningMechanism.learned_projections"><code class="xref any py py-attr docutils literal"><span class="pre">learned_projections</span></code></a> are updated
in each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> when the Composition executes;  it is assigned as the default value for
the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> attribute of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a> in the pathway, and their <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjections</span></a>
(see <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> for meaning of values).</li>
<li><strong>name</strong> (<em>str :</em>) – species the name used for <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>; supercedes <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.name" title="psyneulink.core.compositions.pathway.Pathway.name"><code class="xref any py py-attr docutils literal"><span class="pre">name</span></code></a> of <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> object if it is has one.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">BackPropagation <code class="xref any docutils literal"><span class="pre">learning</span> <span class="pre">Pathway</span></code> &lt;Composition_Learning_Pathway&gt;` added to the Composition.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_controller">
<code class="descname">add_controller</code><span class="sig-paren">(</span><em>controller</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an <a class="reference internal" href="OptimizationControlMechanism.html"><span class="doc">OptimizationControlMechanism</span></a> as the <code class="xref any docutils literal"><span class="pre">controller</span></code> of the Composition, which gives the OCM access to the
<a class="reference internal" href="#"><span class="doc">Composition</span></a>’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.evaluate" title="psyneulink.core.compositions.composition.Composition.evaluate"><code class="xref any py py-meth docutils literal"><span class="pre">evaluate</span></code></a> method. This allows the OCM to use simulations to determine
an optimal Control policy.</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway">
<code class="descname">add_linear_learning_pathway</code><span class="sig-paren">(</span><em>pathway</em>, <em>learning_function</em>, <em>loss_function=None</em>, <em>learning_rate=0.05</em>, <em>error_function=(LinearCombination LinearCombination Function-8)</em>, <em>learning_update='online'</em>, <em>name=None</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement learning pathway (including necessary <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a>.</p>
<blockquote>
<div><p>Generic method for implementing a learning pathway.  Calls <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a> to implement
the processing components including, if necessary, the MappingProjections between Mechanisms.  All of the
MappingProjections (whether specified or created) are subject to learning (and are assigned as the
<code class="xref any docutils literal"><span class="pre">learned_projection</span></code> attribute of the <code class="xref any docutils literal"><span class="pre">LearningMechanisms</span></code> created for the pathway.</p>
<p>If <strong>learning_function</strong> is a sublcass of <a class="reference internal" href="LearningFunctions.html"><span class="doc">LearningFunction</span></a>, a class-specific
<a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning method</span></a> is called.  Some may allow the error_function
to be specified, in which case it must be compatible with the class of LearningFunction specified.</p>
<p>If <strong>learning_function</strong> an instantiated function, it is assigned to all of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a> created for the MappingProjections in the pathway.  A <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> is
created to compute the error for the pathway, and assigned the function specified in <strong>error_function</strong>,
which must be compatible with <strong>learning_function</strong>.</p>
<p>See <a class="reference internal" href="#composition-learning"><span class="std std-ref">Learning in a Composition</span></a> for for a more detailed description of how learning is implemented in a
Composition, including the <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a> that are created,
as well as other <a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning methods</span></a> that can be used to implement specific
algorithms.</p>
</div></blockquote>
<dl class="docutils">
<dt>The <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a> created are placed in a dict the following entries:</dt>
<dd><blockquote class="first">
<div><em>TARGET_MECHANISM</em>: <a class="reference internal" href="ProcessingMechanism.html"><span class="doc">Processing Mechanisms</span></a> (assigned to <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.target" title="psyneulink.core.compositions.pathway.Pathway.target"><code class="xref any py py-attr docutils literal"><span class="pre">target</span></code></a>
<em>OBJECTIVE_MECHANISM</em>: <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> (assigned to <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.learning_objective" title="psyneulink.core.compositions.pathway.Pathway.learning_objective"><code class="xref any py py-attr docutils literal"><span class="pre">learning_objective</span></code></a>
<em>LEARNING_MECHANISMS</em>: <a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> or list[<a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a>]
<em>LEARNING_FUNCTION</em>: <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.LearningFunction" title="psyneulink.core.components.functions.learningfunctions.LearningFunction"><code class="xref any py py-class docutils literal"><span class="pre">LearningFunction</span></code></a> used by all LEARNING_MECHSNISMS in the <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>
<em>LEARNED_PROJECTIONS</em>: <a class="reference internal" href="Projection.html"><span class="doc">Projection</span></a> or list[<a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a>]</div></blockquote>
<p>that is assigned to the <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.learning_components" title="psyneulink.core.compositions.pathway.Pathway.learning_components"><code class="xref any py py-attr docutils literal"><span class="pre">learning_components</span></code></a> attribute of the <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>
returned.</p>
<dl class="docutils">
<dt>pathway <span class="classifier-delimiter">:</span> <span class="classifier">List</span></dt>
<dd>list containing either [Node1, Node2] or [Node1, MappingProjection, Node2]. If a projection is
specified, that projection is the learned projection. Otherwise, a default MappingProjection is
automatically generated for the learned projection.</dd>
<dt>learning_function <span class="classifier-delimiter">:</span> <span class="classifier">LearningFunction</span></dt>
<dd>specifies the type of <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.LearningFunction" title="psyneulink.core.components.functions.learningfunctions.LearningFunction"><code class="xref any py py-class docutils literal"><span class="pre">LearningFunction</span></code></a> to use for the <a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> constructued for each
<a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjection</span></a> in the <strong>pathway</strong>.</dd>
<dt>loss_function <span class="classifier-delimiter">:</span> <span class="classifier">MSE or SSE</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd>specifies the loss function used if <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.BackPropagation" title="psyneulink.core.components.functions.learningfunctions.BackPropagation"><code class="xref any py py-class docutils literal"><span class="pre">BackPropagation</span></code></a> is specified as the <strong>learning_function</strong>
(see <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_backpropagation_learning_pathway</span></code></a>).</dd>
<dt>learning_rate <span class="classifier-delimiter">:</span> <span class="classifier">float</span> <span class="classifier-delimiter">:</span> <span class="classifier">default 0.05</span></dt>
<dd>specifies the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_rate" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_rate"><code class="xref any py py-attr docutils literal"><span class="pre">learning_rate</span></code></a> used for the <strong>learning_function</strong>
of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> in the <strong>pathway</strong>.</dd>
<dt>error_function <span class="classifier-delimiter">:</span> <span class="classifier">function</span> <span class="classifier-delimiter">:</span> <span class="classifier">default LinearCombination</span></dt>
<dd><p class="first">specifies the function assigned to Mechanism used to compute the error from the target and the output
(<a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a>) of the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TARGET" title="psyneulink.core.compositions.composition.NodeRole.TARGET"><code class="xref any py py-attr docutils literal"><span class="pre">TARGET</span></code></a> Mechanism in the <strong>pathway</strong>.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For most learning algorithms (and by default), a <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> is used to compute the error.
However, some learning algorithms may use a different Mechanism (e.g., for <code class="xref any docutils literal"><span class="pre">TDlearning</span></code> a
<a class="reference internal" href="PredictionErrorMechanism.html"><span class="doc">PredictionErrorMechanism</span></a> is used, which uses as its fuction <a class="reference internal" href="CombinationFunctions.html#psyneulink.core.components.functions.combinationfunctions.PredictionErrorDeltaFunction" title="psyneulink.core.components.functions.combinationfunctions.PredictionErrorDeltaFunction"><code class="xref any py py-class docutils literal"><span class="pre">PredictionErrorDeltaFunction</span></code></a>.</p>
</div>
</dd>
<dt>learning_update <span class="classifier-delimiter">:</span> <span class="classifier">Optional[bool|ONLINE|AFTER]</span> <span class="classifier-delimiter">:</span> <span class="classifier">default AFTER</span></dt>
<dd>specifies when the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of the <a class="reference internal" href="KohonenMechanism.html#psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection" title="psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection"><code class="xref any py py-attr docutils literal"><span class="pre">learned_projection</span></code></a> is updated
in each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> when the Composition executes;  it is assigned as the default value for
the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> attribute of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanism</span></a> in the pathway, and its <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> (see <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> for meaning of values).</dd>
<dt>name <span class="classifier-delimiter">:</span> <span class="classifier">str :</span></dt>
<dd>species the name used for <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>; supercedes <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.name" title="psyneulink.core.compositions.pathway.Pathway.name"><code class="xref any py py-attr docutils literal"><span class="pre">name</span></code></a> of <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> object if it is has one.</dd>
</dl>
<dl class="last docutils">
<dt><a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> :</dt>
<dd><code class="xref any docutils literal"><span class="pre">learning</span> <span class="pre">Pathway</span></code> &lt;Composition_Learning_Pathway&gt;` added to the Composition.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway">
<code class="descname">add_linear_processing_pathway</code><span class="sig-paren">(</span><em>pathway</em>, <em>name=None</em>, <em>context=None</em>, <em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Add sequence of Mechanisms and/or Compositions with intercolated Projections.</p>
<p>A <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjection</span></a> is created for each contiguous pair of <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> and/or Compositions
in the <strong>pathway</strong> argument, from the <a class="reference internal" href="OutputPort.html#outputport-primary"><span class="std std-ref">primary OutputPort</span></a> of the first one to the
<a class="reference internal" href="InputPort.html#inputport-primary"><span class="std std-ref">primary InputPort</span></a> of the second.</p>
<p>Tuples (Mechanism, <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a>) can be used to assign <code class="xref any docutils literal"><span class="pre">required_roles</span></code> to Mechanisms.</p>
<p>Note that any specifications of the <strong>monitor_for_control</strong> <a class="reference internal" href="ControlMechanism.html#controlmechanism-monitor-for-control-argument"><span class="std std-ref">argument</span></a> of a constructor for a <a class="reference internal" href="ControlMechanism.html"><span class="doc">Control Mechanisms</span></a> or the <strong>monitor</strong>
argument specified in the constructor for an ObjectiveMechanism in the <strong>objective_mechanism</strong> <a class="reference internal" href="ControlMechanism.html#controlmechanism-objectivemechanism"><span class="std std-ref">argument</span></a> of a ControlMechanism supercede any MappingProjections that would
otherwise be created for them when specified in the <strong>pathway</strong> argument of add_linear_processing_pathway.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pathway</strong> (<a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a>, list or <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>) – specifies the nodes, and optionally Projections, used to construct a processing <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>.
Any standard form of <a class="reference internal" href="Pathway.html#pathway-specification"><span class="std std-ref">Pathway specification</span></a> can be used, however if a 2-item (
Pathway, LearningFunction) tuple is used the <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.LearningFunction" title="psyneulink.core.components.functions.learningfunctions.LearningFunction"><code class="xref any py py-class docutils literal"><span class="pre">LearningFunction</span></code></a> will be ignored (this should be used with
<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_learning_pathway</span></code></a> if a <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a> is desired).  A
<a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> object can also be used;  again, however, any learning-related specifications will be ignored,
as will its <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.name" title="psyneulink.core.compositions.pathway.Pathway.name"><code class="xref any py py-attr docutils literal"><span class="pre">name</span></code></a> if the <strong>name</strong> argument of add_linear_processing_pathway is specified.</li>
<li><strong>name</strong> (<em>str</em>) – species the name used for <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>; supercedes <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.name" title="psyneulink.core.compositions.pathway.Pathway.name"><code class="xref any py py-attr docutils literal"><span class="pre">name</span></code></a> of <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> object if it is has one.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> added to Composition.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_node">
<code class="descname">add_node</code><span class="sig-paren">(</span><em>node</em>, <em>required_roles=None</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a Composition Node (<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> or <a class="reference internal" href="#"><span class="doc">Composition</span></a>) to Composition, if it is not already added</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>node</strong> (<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> or <a class="reference internal" href="#"><span class="doc">Composition</span></a>) – the node to be added to the Composition</li>
<li><strong>required_roles</strong> (<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> or list of NodeRoles) – any NodeRoles roles that this node should have in addition to those determined by analyze graph.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_nodes">
<code class="descname">add_nodes</code><span class="sig-paren">(</span><em>nodes</em>, <em>required_roles=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a list of <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> to the Composition.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>nodes</strong> (<em>list</em>) – the nodes to be added to the Composition.  Each item of the list must be a <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a>,
a <a class="reference internal" href="#"><span class="doc">Composition</span></a> or a role-specification tuple with a Mechanism or Composition as the first item,
and a <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> or list of those as the second item;  any NodeRoles in a role-specification tuple
are applied in addition to those specified in the <strong>required_roles</strong> argument.</li>
<li><strong>required_roles</strong> (<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> or list of NodeRoles) – NodeRoles to assign to the nodes in addition to those determined by analyze graph;
these apply to any items in the list of nodes that are not in a tuple;  these apply to any specified
in any role-specification tuples in the <strong>nodes</strong> argument.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_pathway">
<code class="descname">add_pathway</code><span class="sig-paren">(</span><em>pathway</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an existing <code class="xref any docutils literal"><span class="pre">Pathway</span></code> to the Composition</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pathway</strong> (the <code class="xref any docutils literal"><span class="pre">Pathway</span></code> to be added) – </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_pathways">
<code class="descname">add_pathways</code><span class="sig-paren">(</span><em>pathways</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_pathways" title="Permalink to this definition">¶</a></dt>
<dd><p>Add pathways to the Composition.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pathways</strong> (<a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway" title="psyneulink.core.compositions.pathway.Pathway"><em>Pathway</em></a><em> or </em><em>list</em><em>[</em><a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway" title="psyneulink.core.compositions.pathway.Pathway"><em>Pathway</em></a><em>]</em>) – specifies one or more <a class="reference internal" href="Pathway.html"><span class="doc">Pathways</span></a> to add to the Composition (see <a class="reference internal" href="Pathway.html#pathway-specification"><span class="std std-ref">Pathway Specification</span></a>).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of <a class="reference internal" href="Pathway.html"><span class="doc">Pathways</span></a> added to the Composition.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list[<a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway" title="psyneulink.core.compositions.pathway.Pathway">Pathway</a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_projection">
<code class="descname">add_projection</code><span class="sig-paren">(</span><em>projection=None</em>, <em>sender=None</em>, <em>receiver=None</em>, <em>feedback=False</em>, <em>learning_projection=False</em>, <em>name=None</em>, <em>allow_duplicates=False</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_projection" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <strong>projection</strong> to the Composition, if one with the same sender and receiver doesn’t already exist.</p>
<p>If <strong>projection</strong> is not specified, create a default <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjection</span></a> using <strong>sender</strong> and <strong>receiver</strong>.</p>
<p>If <strong>projection</strong> is specified:</p>
<ul>
<li><p class="first">if <strong>projection</strong> has already been instantiated, and <strong>sender</strong> and <strong>receiver</strong> are also specified,
they must match the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.sender" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> and <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.receiver" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a>
of <strong>projection</strong>.</p>
</li>
<li><p class="first">if <strong>sender</strong> and <strong>receiver</strong> are specified and one or more Projections already exists between them:
- if it is in the Composition:</p>
<blockquote>
<div><ul class="simple">
<li>if there is only one, the request is ignored and the existing Projection is returned</li>
<li>if there is more than one, an exception is raised as this should never be the case</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>it is NOT in the Composition:
- if there is only one, that Projection is used;
- if there is more than one, the last in the list (presumably the most recent) is used;
in either case, processing continues, to activate it for the Compostion,
construct any “shadow” projections that may be specified, and assign feedback if specified,</li>
</ul>
</li>
<li><p class="first">if the status of <strong>projection</strong> is <code class="xref any docutils literal"><span class="pre">deferred_init</span></code>:</p>
<ul class="simple">
<li>if its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> and/or <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a> attributes are not
specified, then <strong>sender</strong> and/or <strong>receiver</strong> are used.</li>
<li>if <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> and/or <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a> attributes are specified,
they must match <strong>sender</strong> and/or <strong>receiver</strong> if those have also been specified.</li>
<li>if a Projection between the specified sender and receiver does <em>not</em> already exist, it is initialized; if
it <em>does</em> already exist, the request to add it is ignored, however requests to shadow it and/or mark it as
a <code class="xref any docutils literal"><span class="pre">feedback</span></code> Projection are implemented (in case it has not already been done for the existing Projection).</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <strong>projection</strong> is an instantiated Projection (i.e., not in <code class="xref any docutils literal"><span class="pre">deferred_init</span></code>) and one already exists between
its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> and <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a> a warning is generated.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sender</strong> (<em>Mechanism</em><em>, </em><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition" title="psyneulink.core.compositions.composition.Composition"><em>Composition</em></a><em>, or </em><a class="reference internal" href="OutputPort.html#psyneulink.core.components.ports.outputport.OutputPort" title="psyneulink.core.components.ports.outputport.OutputPort"><em>OutputPort</em></a>) – the sender of <strong>projection</strong></li>
<li><strong>projection</strong> (<em>Projection</em><em>, </em><a class="reference internal" href="AutoAssociativeProjection.html#psyneulink.library.components.projections.pathway.autoassociativeprojection.AutoAssociativeProjection.matrix" title="psyneulink.library.components.projections.pathway.autoassociativeprojection.AutoAssociativeProjection.matrix"><em>matrix</em></a>) – the projection to add</li>
<li><strong>receiver</strong> (<em>Mechanism</em><em>, </em><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition" title="psyneulink.core.compositions.composition.Composition"><em>Composition</em></a><em>, or </em><a class="reference internal" href="InputPort.html#psyneulink.core.components.ports.inputport.InputPort" title="psyneulink.core.components.ports.inputport.InputPort"><em>InputPort</em></a>) – the receiver of <strong>projection</strong></li>
<li><strong>feedback</strong> (<em>bool</em>) – When False (default) all Nodes within a cycle containing this Projection execute in parallel. This
means that each Projections within the cycle actually passes to its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a>
the <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.value" title="psyneulink.core.components.projections.projection.Projection_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> from the previous execution.
When True, this Projection “breaks” the cycle, such that all Nodes execute in sequence, and only the
Projection marked as ‘feedback’ passes to its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a> the
<a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.value" title="psyneulink.core.components.projections.projection.Projection_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> from the previous execution.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> if added, else None</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_projections">
<code class="descname">add_projections</code><span class="sig-paren">(</span><em>projections=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_projections" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_projection" title="psyneulink.core.compositions.composition.Composition.add_projection"><code class="xref any py py-meth docutils literal"><span class="pre">add_projection</span></code></a> for each Projection in the <em>projections</em> list. Each
Projection must have its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> and <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a>
already specified.  If an item in the list is a list of projections, called recursively on that list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>projections</strong> (<em>list of Projections</em>) – list of Projections to be added to the Composition</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway">
<code class="descname">add_reinforcement_learning_pathway</code><span class="sig-paren">(</span><em>pathway</em>, <em>learning_rate=0.05</em>, <em>error_function=None</em>, <em>learning_update='online'</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method that calls <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_learning_pathway</span></code></a> with <a href="#id9"><span class="problematic" id="id10">**</span></a>learning_function**=`Reinforcement`</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pathway</strong> (<em>List</em>) – list containing either [Node1, Node2] or [Node1, MappingProjection, Node2]. If a projection is
specified, that projection is the learned projection. Otherwise, a default MappingProjection is
automatically generated for the learned projection.</li>
<li><strong>learning_rate</strong> (<em>float : default 0.05</em>) – specifies the <code class="xref any docutils literal"><span class="pre">learning_rate</span></code> used for the <code class="xref any docutils literal"><span class="pre">ReinforcementLearning</span></code>
function of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> in the <strong>pathway</strong>.</li>
<li><strong>error_function</strong> (<em>function : default LinearCombination</em>) – specifies the function assigned to <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> used to compute the error from the target and
the output (<a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a>) of the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TARGET" title="psyneulink.core.compositions.composition.NodeRole.TARGET"><code class="xref any py py-attr docutils literal"><span class="pre">TARGET</span></code></a> Mechanism in the <strong>pathway</strong>).</li>
<li><strong>learning_update</strong> (<em>Optional</em><em>[</em><em>bool|ONLINE|AFTER</em><em>] </em><em>: default AFTER</em>) – specifies when the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of the <a class="reference internal" href="KohonenMechanism.html#psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection" title="psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection"><code class="xref any py py-attr docutils literal"><span class="pre">learned_projection</span></code></a> is updated
in each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> when the Composition executes;  it is assigned as the default value for
the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> attribute of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanism</span></a> in the pathway, and its <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> (see <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> for meaning of values).</li>
<li><strong>name</strong> (<em>str :</em>) – species the name used for <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>; supercedes <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.name" title="psyneulink.core.compositions.pathway.Pathway.name"><code class="xref any py py-attr docutils literal"><span class="pre">name</span></code></a> of <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> object if it is has one.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Reinforcement <code class="xref any docutils literal"><span class="pre">learning</span> <span class="pre">Pathway</span></code> &lt;Composition_Learning_Pathway&gt;` added to the Composition.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_td_learning_pathway">
<code class="descname">add_td_learning_pathway</code><span class="sig-paren">(</span><em>pathway</em>, <em>learning_rate=0.05</em>, <em>error_function=None</em>, <em>learning_update='online'</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_td_learning_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method that calls <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_learning_pathway</span></code></a> with <a href="#id11"><span class="problematic" id="id12">**</span></a>learning_function**=`TDLearning`</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pathway</strong> (<em>List</em>) – list containing either [Node1, Node2] or [Node1, MappingProjection, Node2]. If a projection is
specified, that projection is the learned projection. Otherwise, a default MappingProjection is
automatically generated for the learned projection.</li>
<li><strong>learning_rate</strong> (<em>float : default 0.05</em>) – specifies the <code class="xref any docutils literal"><span class="pre">learning_rate</span></code> used for the <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.TDLearning" title="psyneulink.core.components.functions.learningfunctions.TDLearning"><code class="xref any py py-class docutils literal"><span class="pre">TDLearning</span></code></a> function of the
<a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> in the <strong>pathway</strong>.</li>
<li><strong>error_function</strong> (<em>function : default LinearCombination</em>) – specifies the function assigned to <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> used to compute the error from the target and
the output (<a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a>) of the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TARGET" title="psyneulink.core.compositions.composition.NodeRole.TARGET"><code class="xref any py py-attr docutils literal"><span class="pre">TARGET</span></code></a> Mechanism in the <strong>pathway</strong>).</li>
<li><strong>learning_update</strong> (<em>Optional</em><em>[</em><em>bool|ONLINE|AFTER</em><em>] </em><em>: default AFTER</em>) – specifies when the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of the <a class="reference internal" href="KohonenMechanism.html#psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection" title="psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection"><code class="xref any py py-attr docutils literal"><span class="pre">learned_projection</span></code></a> is updated
in each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> when the Composition executes;  it is assigned as the default value for
the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> attribute of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanism</span></a> in the pathway, and its <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> (see <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.modulatory.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> for meaning of values).</li>
<li><strong>name</strong> (<em>str :</em>) – species the name used for <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>; supercedes <a class="reference internal" href="Pathway.html#psyneulink.core.compositions.pathway.Pathway.name" title="psyneulink.core.compositions.pathway.Pathway.name"><code class="xref any py py-attr docutils literal"><span class="pre">name</span></code></a> of <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> object if it is has one.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">TD Reinforcement <code class="xref any docutils literal"><span class="pre">learning</span> <span class="pre">Pathway</span></code> &lt;Composition_Learning_Pathway&gt;` added to the Composition.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.default_external_input_values">
<code class="descname">default_external_input_values</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.default_external_input_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the default values of all external InputPorts that belong to the
Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.disable_all_history">
<code class="descname">disable_all_history</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.disable_all_history" title="Permalink to this definition">¶</a></dt>
<dd><p>When run, disables history tracking for all Parameters of all Components used in the Composition</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.evaluate">
<code class="descname">evaluate</code><span class="sig-paren">(</span><em>predicted_input=None</em>, <em>control_allocation=None</em>, <em>num_simulation_trials=None</em>, <em>runtime_params=None</em>, <em>base_context=&lt;psyneulink.core.globals.context.Context object&gt;</em>, <em>context=None</em>, <em>execution_mode=False</em>, <em>return_results=False</em>, <em>block_simulate=False</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a simulation of the <a class="reference internal" href="#"><span class="doc">Composition</span></a>, with the specified control_allocation, excluding its
<code class="xref any docutils literal"><span class="pre">controller</span></code> in order to return the
<a class="reference internal" href="ControlMechanism.html#psyneulink.core.components.mechanisms.modulatory.control.controlmechanism.ControlMechanism.net_outcome" title="psyneulink.core.components.mechanisms.modulatory.control.controlmechanism.ControlMechanism.net_outcome"><code class="xref any py py-attr docutils literal"><span class="pre">net_outcome</span></code></a> of the Composition, according to its
<code class="xref any docutils literal"><span class="pre">controller</span></code> under that control_allocation. All values are
reset to pre-simulation values at the end of the simulation.</p>
<p>If <code class="xref any docutils literal"><span class="pre">block_simulate</span></code> is set to True, the <code class="xref any docutils literal"><span class="pre">controller</span></code> will attempt to use the
entire input set provided to the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> method of the <a class="reference internal" href="#"><span class="doc">Composition</span></a> as input for the
simulated call to <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a>. If it is not, the <code class="xref any docutils literal"><span class="pre">controller</span></code> will
use the inputs slated for its next or previous execution, depending on whether the <code class="xref any docutils literal"><span class="pre">controller_mode</span></code> of the
<a class="reference internal" href="#"><span class="doc">Composition</span></a> is set to <code class="xref any docutils literal"><span class="pre">before</span></code> or <code class="xref any docutils literal"><span class="pre">after</span></code>, respectively.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Block simulation can not be used if the Composition’s stimuli were specified as a generator. If
<code class="xref any docutils literal"><span class="pre">block_simulate</span></code> is set to True and the input type for the Composition was a generator,
block simulation will be disabled for the current execution of <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.evaluate" title="psyneulink.core.compositions.composition.Composition.evaluate"><code class="xref any py py-meth docutils literal"><span class="pre">evaluate</span></code></a>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.exclude_node_roles">
<code class="descname">exclude_node_roles</code><span class="sig-paren">(</span><em>node</em>, <em>roles</em>, <em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.exclude_node_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>Excludes the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a>(s) specified in <strong>roles</strong> from being assigned to <strong>node</strong>.</p>
<p>Removes specified roles if they had been previous assigned either by default as a <a class="reference internal" href="#composition-node-role-assignment"><span class="std std-ref">required_node_role</span></a> or using the <code class="xref any docutils literal"><span class="pre">required_node_roles</span></code>
method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>node</strong> (<a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a>) – <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> from which <strong>role</strong> should be removed.</li>
<li><strong>roles</strong> (<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> or list[<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a>]) – <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a>(s) to remove and/or exclude from <strong>node</strong>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>inputs=None</em>, <em>scheduler=None</em>, <em>termination_processing=None</em>, <em>call_before_time_step=None</em>, <em>call_before_pass=None</em>, <em>call_after_time_step=None</em>, <em>call_after_pass=None</em>, <em>context=None</em>, <em>base_context=&lt;psyneulink.core.globals.context.Context object&gt;</em>, <em>clamp_input='soft_clamp'</em>, <em>runtime_params=None</em>, <em>skip_initialization=False</em>, <em>bin_execute=False</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Passes inputs to any Nodes receiving inputs directly from the user (via the “inputs” argument) then
coordinates with the Scheduler to execute sets of nodes that are eligible to execute until
termination conditions are met.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>inputs</strong> ({ <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> or <a class="reference internal" href="#"><span class="doc">Composition</span></a> : list }) – a dictionary containing a key-value pair for each node in the composition that receives inputs from
the user. For each pair, the key is the node (Mechanism or Composition) and the value is an input,
the shape of which must match the node’s default variable.</li>
<li><strong>scheduler</strong> (<a class="reference internal" href="Scheduler.html#psyneulink.core.scheduling.scheduler.Scheduler" title="psyneulink.core.scheduling.scheduler.Scheduler"><em>Scheduler</em></a>) – the scheduler object that owns the conditions that will instruct the execution of the Composition
If not specified, the Composition will use its automatically generated scheduler.</li>
<li><strong>context</strong> – context will be set to self.default_execution_id if unspecified</li>
<li><strong>base_context</strong> – the context corresponding to the execution context from which this execution will be initialized,
if values currently do not exist for <strong>context</strong></li>
<li><strong>call_before_time_step</strong> (<em>callable</em>) – called before each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TIME_STEP" title="psyneulink.core.scheduling.time.TimeScale.TIME_STEP"><code class="xref any py py-attr docutils literal"><span class="pre">TIME_STEP</span></code></a> is executed
passed the current <em>context</em> (but it is not necessary for your callable to take)</li>
<li><strong>call_after_time_step</strong> (<em>callable</em>) – called after each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TIME_STEP" title="psyneulink.core.scheduling.time.TimeScale.TIME_STEP"><code class="xref any py py-attr docutils literal"><span class="pre">TIME_STEP</span></code></a> is executed
passed the current <em>context</em> (but it is not necessary for your callable to take)</li>
<li><strong>call_before_pass</strong> (<em>callable</em>) – called before each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.PASS" title="psyneulink.core.scheduling.time.TimeScale.PASS"><code class="xref any py py-attr docutils literal"><span class="pre">PASS</span></code></a> is executed
passed the current <em>context</em> (but it is not necessary for your callable to take)</li>
<li><strong>call_after_pass</strong> (<em>callable</em>) – called after each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.PASS" title="psyneulink.core.scheduling.time.TimeScale.PASS"><code class="xref any py py-attr docutils literal"><span class="pre">PASS</span></code></a> is executed
passed the current <em>context</em> (but it is not necessary for your callable to take)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>output value of the final Mechanism executed in the Composition</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">various</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.external_input_ports">
<code class="descname">external_input_ports</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.external_input_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all external InputPorts that belong to the Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.external_input_values">
<code class="descname">external_input_values</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.external_input_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns values of all external InputPorts that belong to the Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.get_nodes_by_role">
<code class="descname">get_nodes_by_role</code><span class="sig-paren">(</span><em>role</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.get_nodes_by_role" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> in the Composition that are assigned the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a>
specified in <strong>role</strong>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>role</strong> (<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a>) – role for which <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> are desired.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> assigned the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> specified in <strong>role</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list[<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> and/or <a class="reference internal" href="#"><span class="doc">Compositions</span></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.get_roles_by_node">
<code class="descname">get_roles_by_node</code><span class="sig-paren">(</span><em>node</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.get_roles_by_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a> assigned to <strong>node</strong>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>node</strong> (<a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a>) – <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> for which assigned <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a> are desired.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a> assigned to <strong>node</strong>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">List[<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> and/or <a class="reference internal" href="#"><span class="doc">Compositions</span></a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.graph_processing">
<code class="descname">graph_processing</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.graph_processing" title="Permalink to this definition">¶</a></dt>
<dd><p>The Composition’s processing graph (contains only <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Getter:</th><td class="field-body">Returns the processing graph, and builds the graph if it needs updating since the last access.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.infer_backpropagation_learning_pathways">
<code class="descname">infer_backpropagation_learning_pathways</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.infer_backpropagation_learning_pathways" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method that automatically creates backpropapagation learning pathways for every
Input Node –&gt; Output Node pathway</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.input_port">
<code class="descname">input_port</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.input_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the index 0 InputPort that belongs to the Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.input_ports">
<code class="descname">input_ports</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.input_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all InputPorts that belong to the Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.input_values">
<code class="descname">input_values</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.input_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns values of all InputPorts that belong to the Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.learn">
<code class="descname">learn</code><span class="sig-paren">(</span><em>inputs</em>, <em>targets=None</em>, <em>num_trials=None</em>, <em>epochs=1</em>, <em>minibatch_size=1</em>, <em>patience=None</em>, <em>min_delta=0</em>, <em>context=None</em>, <em>bin_execute=False</em>, <em>randomize_minibatches=False</em>, <em>call_before_minibatch=None</em>, <em>call_after_minibatch=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.learn" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the composition in learning mode - that is, any components with disable_learning False will be
executed in learning mode. See <a class="reference internal" href="#composition-learning"><span class="std std-ref">Learning in a Composition</span></a> for details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>inputs</strong> ({ <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> or <a class="reference internal" href="#"><span class="doc">Composition</span></a> : list }) – a dictionary containing a key-value pair for each node in the composition that receives inputs from
the user. There are several equally valid ways that this dict could be structured:
1. For each pair, the key is the node (Mechanism or Composition) and the value is an input,
the shape of which must match the node’s default variable. This is identical to the input dict in
<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">the</span> <span class="pre">run</span> <span class="pre">method</span></code></a>;
2. A dict with keys ‘inputs’, ‘targets’, and ‘epochs’. The <code class="xref any docutils literal"><span class="pre">inputs</span></code> key stores a dict that is the same
same structure as input specification (1) of learn. The <a class="reference internal" href="System.html#psyneulink.core.components.system.System.targets" title="psyneulink.core.components.system.System.targets"><code class="xref any py py-attr docutils literal"><span class="pre">targets</span></code></a> and <code class="xref any docutils literal"><span class="pre">epochs</span></code> keys should contain
values of the same shape as <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">targets</span></code></a> and <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">epochs</span></code></a>.</li>
<li><strong>targets</strong> ({ <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> or <a class="reference internal" href="#"><span class="doc">Composition</span></a> : list }) – a dictionary containing a key-value pair for each node in the composition that receives target values
to train on from the user. This could be either target mechanisms or output nodes in backpropagation
learning pathways.</li>
<li><strong>num_trials</strong> (<em>int</em><em> (</em><em>default=None</em><em>)</em>) – typically, the composition will infer the number of trials from the length of its input specification.
To reuse the same inputs across many trials, you may specify an input dictionary with lists of length 1,
or use default inputs, and select a number of trials with num_trials.</li>
<li><strong>epochs</strong> (<em>int</em><em> (</em><em>default=1</em><em>)</em>) – specifies the number of training epochs (that is, repetitions of the batched input set) to run with</li>
<li><strong>minibatch_size</strong> (<em>int</em><em> (</em><em>default=1</em><em>)</em>) – specifies the size of the minibatches to use. The input trials will be batched and ran, after which
learning mechanisms with learning mode TRIAL will update weights</li>
<li><strong>randomize_minibatch</strong> (<em>bool</em><em> (</em><em>default=False</em><em>)</em>) – specifies whether the order of the input trials should be randomized on each epoch</li>
<li><strong>patience</strong> (<em>int</em><em> or </em><em>None</em><em> (</em><em>default=None</em><em>)</em>) – used for early stopping of training; If a model has more than <code class="xref any docutils literal"><span class="pre">patience</span></code> bad consecutive epochs,
then <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a> will prematurely return. A bad epoch is determined by the <code class="xref any docutils literal"><span class="pre">min_delta</span></code> value</li>
<li><strong>min_delta</strong> (<em>float</em><em> (</em><em>default=0</em><em>)</em>) – the minimum reduction in average loss that an epoch must provide in order to qualify as a ‘good’ epoch;
Any reduction less than this value is considered to be a bad epoch.
Used for early stopping of training, in combination with <code class="xref any docutils literal"><span class="pre">patience</span></code>.</li>
<li><strong>scheduler</strong> (<a class="reference internal" href="Scheduler.html#psyneulink.core.scheduling.scheduler.Scheduler" title="psyneulink.core.scheduling.scheduler.Scheduler"><em>Scheduler</em></a>) – the scheduler object that owns the conditions that will instruct the execution of the Composition
If not specified, the Composition will use its automatically generated scheduler.</li>
<li><strong>context</strong> (<code class="xref py py-data docutils literal"><span class="pre">Optional</span></code>[<a class="reference internal" href="Context.html#psyneulink.core.globals.context.Context" title="psyneulink.core.globals.context.Context"><code class="xref py py-class docutils literal"><span class="pre">Context</span></code></a>]) – context will be set to self.default_execution_id if unspecified</li>
<li><strong>call_before_minibatch</strong> (<em>callable</em>) – called before each minibatch is executed</li>
<li><strong>call_after_minibatch</strong> (<em>callable</em>) – called after each minibatch is executed</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>the results of the final epoch of training</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.output_port">
<code class="descname">output_port</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.output_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the index 0 OutputPort that belongs to the Output CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.output_ports">
<code class="descname">output_ports</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.output_ports" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all OutputPorts that belong to the Output CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.output_values">
<code class="descname">output_values</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.output_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns values of all OutputPorts that belong to the Output CompositionInterfaceMechanism in the most recently executed context</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.require_node_roles">
<code class="descname">require_node_roles</code><span class="sig-paren">(</span><em>node</em>, <em>roles</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.require_node_roles" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a>(s) specified in <strong>roles</strong> to <strong>node</strong>.  Remove exclusion of those NodeRoles if
it any had previously been specified in <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.exclude_node_roles" title="psyneulink.core.compositions.composition.Composition.exclude_node_roles"><code class="xref any py py-meth docutils literal"><span class="pre">exclude_node_roles</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>node</strong> (<a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a>) – <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> to which <strong>role</strong> should be assigned.</li>
<li><strong>roles</strong> (<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> or list[<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a>]) – <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a>(s) to assign to <strong>node</strong>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>inputs=None</em>, <em>num_trials=None</em>, <em>initialize_cycle_values=None</em>, <em>reinitialize_values=None</em>, <em>reinitialize_nodes_when=&lt;psyneulink.core.scheduling.condition.Never object&gt;</em>, <em>skip_initialization=False</em>, <em>clamp_input='soft_clamp'</em>, <em>runtime_params=None</em>, <em>call_before_time_step=None</em>, <em>call_after_time_step=None</em>, <em>call_before_pass=None</em>, <em>call_after_pass=None</em>, <em>call_before_trial=None</em>, <em>call_after_trial=None</em>, <em>termination_processing=None</em>, <em>skip_analyze_graph=False</em>, <em>animate=False</em>, <em>log=False</em>, <em>scheduler=None</em>, <em>bin_execute=False</em>, <em>context=None</em>, <em>base_context=&lt;psyneulink.core.globals.context.Context object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass inputs to Composition, then execute sets of nodes that are eligible to run until termination
conditions are met.</p>
<p>See <a class="reference internal" href="#composition-execution"><span class="std std-ref">Executing a Composition</span></a> for details of formatting input specifications.
Use <strong>animate</strong> to generate a gif of the execution sequence.</p>
<blockquote>
<div><dl class="docutils">
<dt>inputs: { <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> <span class="classifier-delimiter">:</span> <span class="classifier">list } or { <a class="reference internal" href="#"><span class="doc">Composition</span></a></span> <span class="classifier-delimiter">:</span> <span class="classifier">list }</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd>a dictionary containing a key-value pair for each Node in the composition that receives inputs from
the user. For each pair, the key is the Node and the value is a list of inputs. Each input in the
list corresponds to a certain <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>.</dd>
<dt>num_trials <span class="classifier-delimiter">:</span> <span class="classifier">int</span> <span class="classifier-delimiter">:</span> <span class="classifier">default 1</span></dt>
<dd>typically, the composition will infer the number of trials from the length of its input specification.
To reuse the same inputs across many trials, you may specify an input dictionary with lists of length 1,
or use default inputs, and select a number of trials with num_trials.</dd>
<dt>initialize_cycle_values <span class="classifier-delimiter">:</span> <span class="classifier">Dict { Node: Node Value }</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd><p class="first">sets the values of nodes before the start of the run. This is useful in cases where a node is part of a
cycle, because nodes in cycles receive their preceding nodes’ values as of the previous trial. Thus,
this argument allows you to seed the values of nodes in cycles for use on the initial execution. If this
is not specified, the nodes will use their default values.
..technical_note:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">the</span> <span class="n">initial</span> <span class="n">value</span> <span class="n">of</span> <span class="n">a</span> <span class="n">node</span> <span class="ow">is</span> <span class="n">only</span> <span class="n">relevant</span> <span class="n">when</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">embedded</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">Cycle</span><span class="p">,</span> <span class="n">because</span> <span class="n">this</span>
<span class="ow">is</span> <span class="n">the</span> <span class="n">only</span> <span class="n">case</span> <span class="ow">in</span> <span class="n">which</span> <span class="n">its</span> <span class="n">value</span> <span class="n">Parameter</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span> <span class="n">before</span> <span class="n">being</span> <span class="n">updated</span><span class="o">.</span>
</pre></div>
</div>
</dd>
<dt>reinitialize_values <span class="classifier-delimiter">:</span> <span class="classifier">Dict { Node</span> <span class="classifier-delimiter">:</span> <span class="classifier">Object | iterable [Object] }</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd><p class="first">object or iterable of objects to be passed as arguments to nodes’ reinitialize methods when their
respective reinitialize_when conditions are met. These are used to seed the previous_value parameters
of Mechanisms that have active integrator functions.
..technical_note:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">reinitialize</span> <span class="n">values</span> <span class="n">are</span> <span class="n">used</span> <span class="n">to</span> <span class="n">seed</span> <span class="n">the</span> <span class="n">previous_value</span> <span class="n">Parameter</span> <span class="n">of</span> <span class="n">Mechanisms</span> <span class="k">with</span>
<span class="n">active</span> <span class="n">IntegratorFunctions</span><span class="p">,</span> <span class="n">thus</span> <span class="n">effectively</span> <span class="n">starting</span> <span class="n">Integration</span> <span class="n">at</span> <span class="n">a</span> <span class="n">user</span><span class="o">-</span><span class="n">specified</span> <span class="n">point</span> <span class="k">for</span> <span class="n">a</span>
<span class="n">call</span> <span class="n">to</span> <span class="n">run</span><span class="o">.</span>
</pre></div>
</div>
</dd>
<dt>reinitialize_nodes_when <span class="classifier-delimiter">:</span> <span class="classifier">Condition</span> <span class="classifier-delimiter">:</span> <span class="classifier">default Never()</span></dt>
<dd>sets the reinitialize_when condition for all nodes in the Composition that currently have their
reinitialize_when condition set to <a class="reference internal" href="Condition.html#psyneulink.core.scheduling.condition.Never" title="psyneulink.core.scheduling.condition.Never"><code class="xref any py py-class docutils literal"><span class="pre">Never</span></code></a> for the duration of the run.</dd>
</dl>
<p>skip_initialization : bool : default False</p>
<p>clamp_input : Enum[SOFT_CLAMP|HARD_CLAMP|PULSE_CLAMP|NO_CLAMP] : default SOFT_CLAMP</p>
<dl class="docutils">
<dt>runtime_params <span class="classifier-delimiter">:</span> <span class="classifier">Dict[Node: Dict[Parameter: Tuple(Value, Condition)]]</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd><p class="first">nested dictionary of (value, <a class="reference internal" href="Condition.html"><span class="doc">Condition</span></a>) tuples for parameters of Nodes (<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> or
<a class="reference internal" href="#"><span class="doc">Compositions</span></a> of the Composition; specifies alternate parameter values to be used only
during this <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.RUN" title="psyneulink.core.scheduling.time.TimeScale.RUN"><code class="xref any py py-attr docutils literal"><span class="pre">RUN</span></code></a> when the specified <a class="reference internal" href="Condition.html"><span class="doc">Condition</span></a> is met.</p>
<dl class="docutils">
<dt>Outer dictionary:</dt>
<dd><ul class="first last simple">
<li><em>key</em> - Node</li>
<li><em>value</em> - Runtime Parameter Specification Dictionary</li>
</ul>
</dd>
<dt>Runtime Parameter Specification Dictionary:</dt>
<dd><ul class="first last simple">
<li><em>key</em> - keyword corresponding to a parameter of the Node</li>
<li><em>value</em> - tuple in which the index 0 item is the runtime parameter value, and the index 1 item is
a <a class="reference internal" href="Condition.html"><span class="doc">Condition</span></a></li>
</ul>
</dd>
</dl>
<p class="last">See <a class="reference internal" href="Run.html#run-runtime-parameters"><span class="std std-ref">Runtime Parameters</span></a> for more details and examples of valid dictionaries.</p>
</dd>
<dt>call_before_time_step <span class="classifier-delimiter">:</span> <span class="classifier">callable</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd>will be called before each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TIME_STEP" title="psyneulink.core.scheduling.time.TimeScale.TIME_STEP"><code class="xref any py py-attr docutils literal"><span class="pre">TIME_STEP</span></code></a> is executed.</dd>
<dt>call_after_time_step <span class="classifier-delimiter">:</span> <span class="classifier">callable</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd>will be called after each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TIME_STEP" title="psyneulink.core.scheduling.time.TimeScale.TIME_STEP"><code class="xref any py py-attr docutils literal"><span class="pre">TIME_STEP</span></code></a> is executed.</dd>
<dt>call_before_pass <span class="classifier-delimiter">:</span> <span class="classifier">callable</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd>will be called before each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.PASS" title="psyneulink.core.scheduling.time.TimeScale.PASS"><code class="xref any py py-attr docutils literal"><span class="pre">PASS</span></code></a> is executed.</dd>
<dt>call_after_pass <span class="classifier-delimiter">:</span> <span class="classifier">callable</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd>will be called after each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.PASS" title="psyneulink.core.scheduling.time.TimeScale.PASS"><code class="xref any py py-attr docutils literal"><span class="pre">PASS</span></code></a> is executed.</dd>
<dt>call_before_trial <span class="classifier-delimiter">:</span> <span class="classifier">callable</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd>will be called before each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> is executed.</dd>
<dt>call_after_trial <span class="classifier-delimiter">:</span> <span class="classifier">callable</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd>will be called after each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> is executed.</dd>
</dl>
<p>termination_processing : Condition  : default None</p>
<p>skip_analyze_graph : bool : default False</p>
<dl class="docutils">
<dt>animate <span class="classifier-delimiter">:</span> <span class="classifier">dict or bool</span> <span class="classifier-delimiter">:</span> <span class="classifier">default False</span></dt>
<dd><p class="first">specifies use of the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> method to generate a gif movie showing the
sequence of Components executed in a run.  A dict can be specified containing options to pass to
the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> method;  each key must be a legal argument for the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> method, and its value a specification for that argument.  The entries listed
below can also be included in the dict to specify parameters of the animation.  If the <strong>animate</strong>
argument is specified simply as <code class="xref any docutils literal"><span class="pre">True</span></code>, defaults are used for all arguments of <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> and the options below:</p>
<ul class="last simple">
<li><em>UNIT</em>: <em>EXECUTION_SET</em> or <em>COMPONENT</em> (default=<em>EXECUTION_SET</em>) – specifies which Components
to treat as active in each call to <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a>. <em>COMPONENT</em> generates an
image for the execution of each Component.  <em>EXECUTION_SET</em> generates an image for each <code class="xref any docutils literal"><span class="pre">execution_set</span></code>, showing all of the Components in that set as active.</li>
<li><em>DURATION</em>: float (default=0.75) – specifies the duration (in seconds) of each image in the movie.</li>
<li><em>NUM_RUNS</em>: int (default=1) – specifies the number of runs to animate;  by default, this is 1.
If the number specified is less than the total number of runs executed, only the number specified
are animated; if it is greater than the number of runs being executed, only the number being run are
animated.</li>
<li><em>NUM_TRIALS</em>: int (default=1) – specifies the number of trials to animate;  by default, this is 1.
If the number specified is less than the total number of trials being run, only the number specified
are animated; if it is greater than the number of trials being run, only the number being run are
animated.</li>
<li><em>MOVIE_DIR</em>: str (default=project root dir) – specifies the directdory to be used for the movie file;
by default a subdirectory of &lt;root_dir&gt;/show_graph_OUTPUT/GIFS is created using the <code class="xref any docutils literal"><span class="pre">name</span></code> of the  <a class="reference internal" href="#"><span class="doc">Composition</span></a>, and the gif files are stored there.</li>
<li><em>MOVIE_NAME</em>: str (default=<code class="xref any docutils literal"><span class="pre">name</span></code> + ‘movie’) – specifies the name to be used for
the movie file; it is automatically appended with ‘.gif’.</li>
<li><em>SAVE_IMAGES</em>: bool (default=<code class="xref any docutils literal"><span class="pre">False</span></code>) – specifies whether to save each of the images used to
construct the animation in separate gif files, in addition to the file containing the animation.</li>
<li><em>SHOW</em>: bool (default=<code class="xref any docutils literal"><span class="pre">False</span></code>) – specifies whether to show the animation after it is
constructed, using the OS’s default viewer.</li>
</ul>
</dd>
<dt>log <span class="classifier-delimiter">:</span> <span class="classifier">bool, LogCondition</span> <span class="classifier-delimiter">:</span> <span class="classifier">default False</span></dt>
<dd><p class="first">Sets the <a class="reference internal" href="Parameters.html#psyneulink.core.globals.parameters.Parameter.log_condition" title="psyneulink.core.globals.parameters.Parameter.log_condition"><code class="xref any py py-attr docutils literal"><span class="pre">log_condition</span></code></a> for every primary <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.nodes" title="psyneulink.core.compositions.composition.Composition.nodes"><code class="xref any py py-attr docutils literal"><span class="pre">node</span></code></a> and
<code class="xref any docutils literal"><span class="pre">projection</span></code> in the Composition, if it is not already set.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">as when setting the <a class="reference internal" href="Parameters.html#psyneulink.core.globals.parameters.Parameter.log_condition" title="psyneulink.core.globals.parameters.Parameter.log_condition"><code class="xref any py py-attr docutils literal"><span class="pre">log_condition</span></code></a> directly, a value of <code class="xref any docutils literal"><span class="pre">True</span></code> will
correspond to the <code class="xref any docutils literal"><span class="pre">EXECUTION</span> <span class="pre">LogCondition</span></code>.</p>
</div>
</dd>
<dt>scheduler <span class="classifier-delimiter">:</span> <span class="classifier">Scheduler</span> <span class="classifier-delimiter">:</span> <span class="classifier">default None</span></dt>
<dd>the scheduler object that owns the conditions that will instruct the execution of the Composition.
If not specified, the Composition will use its automatically generated scheduler.</dd>
<dt>bin_execute <span class="classifier-delimiter">:</span> <span class="classifier">bool or Enum[LLVM|LLVMexec|LLVMRun|Python|PTXExec|PTXRun]</span> <span class="classifier-delimiter">:</span> <span class="classifier">default Python</span></dt>
<dd>specifies whether to run using the Python interpreter or a <a class="reference internal" href="#composition-compilation"><span class="std std-ref">compiled mode</span></a>.
False is the same as <code class="docutils literal"><span class="pre">Python</span></code>;  True tries LLVM compilation modes, in order of power, progressively
reverting less powerful modes (in the order of the options listed), and to Python if no compilation
mode succeeds (see <a class="reference internal" href="#composition-compilation"><span class="std std-ref">Compilation</span></a> for explanation of modes). PTX modes are used for
CUDA compilation.</dd>
<dt>context <span class="classifier-delimiter">:</span> <span class="classifier"><code class="xref any docutils literal"><span class="pre">Context.execution_id&gt;</span></code></span> <span class="classifier-delimiter">:</span> <span class="classifier">default <code class="xref any docutils literal"><span class="pre">default_execution_id</span></code></span></dt>
<dd>context in which the <a class="reference internal" href="#"><span class="doc">Composition</span></a> will be eecuted;  set to self.default_execution_id ifunspecified.</dd>
<dt>base_context <span class="classifier-delimiter">:</span> <span class="classifier"><code class="xref any docutils literal"><span class="pre">Context.execution_id&gt;</span></code></span> <span class="classifier-delimiter">:</span> <span class="classifier">Context(execution_id=None)</span></dt>
<dd>the context corresponding to the execution context from which this execution will be initialized,
if values currently do not exist for <strong>context</strong></dd>
</dl>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>2d list of values of OUTPUT Nodes at end of last trial</strong> – each item in the list is the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.output_values" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.output_values"><code class="xref any py py-attr docutils literal"><span class="pre">output_values</span></code></a> for an <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> of the Composition, listed in the order listed in <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.get_nodes_by_role" title="psyneulink.core.compositions.composition.Composition.get_nodes_by_role"><code class="xref any py py-meth docutils literal"><span class="pre">get_nodes_by_role</span></code></a>(<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a>.OUTPUT).<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="xref any docutils literal"><span class="pre">results</span></code> attribute of the Compositon contains a list of the outputs for all
trials.</p>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list[list]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.scheduler">
<code class="descname">scheduler</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.scheduler" title="Permalink to this definition">¶</a></dt>
<dd><p>A default <a class="reference internal" href="Scheduler.html"><span class="doc">Scheduler</span></a> automatically generated by the Composition, and used for its execution
when it is <a class="reference internal" href="#composition-execution"><span class="std std-ref">run</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Getter:</th><td class="field-body">Returns the default scheduler, and builds it if it needs updating since the last access.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.show_graph">
<code class="descname">show_graph</code><span class="sig-paren">(</span><em>show_node_structure=False</em>, <em>show_nested='all'</em>, <em>show_controller=False</em>, <em>show_cim=False</em>, <em>show_learning=False</em>, <em>show_headers=True</em>, <em>show_types=False</em>, <em>show_dimensions=False</em>, <em>show_projection_labels=False</em>, <em>direction='BT'</em>, <em>active_items=None</em>, <em>active_color='bold'</em>, <em>input_color='green'</em>, <em>output_color='red'</em>, <em>input_and_output_color='brown'</em>, <em>controller_color='blue'</em>, <em>learning_color='orange'</em>, <em>composition_color='pink'</em>, <em>control_projection_arrow='box'</em>, <em>feedback_shape='septagon'</em>, <em>cim_shape='square'</em>, <em>output_fmt='pdf'</em>, <em>context=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Show graphical display of Components in a Composition’s graph.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method relies on <a class="reference external" href="http://www.graphviz.org">graphviz</a>, which must be installed and imported
(standard with PsyNeuLink pip install)</p>
</div>
<p>See <a class="reference internal" href="#composition-visualization"><span class="std std-ref">Visualizing a Composition</span></a> for details and examples.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>show_node_structure</strong> (<em>bool</em><em>, </em><em>VALUES</em><em>, </em><em>LABELS</em><em>, </em><em>FUNCTIONS</em><em>, </em><em>MECH_FUNCTION_PARAMS</em><em>, </em><em>PORT_FUNCTION_PARAMS</em><em>, </em><em>ROLES</em><em>,         or </em><em>ALL : default False</em>) – <p>show a detailed representation of each <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> in the graph, including its <a class="reference internal" href="Port.html"><span class="doc">Ports</span></a>;
can have any of the following settings alone or in a list:</p>
<ul>
<li><code class="xref any docutils literal"><span class="pre">True</span></code> – show Ports of Mechanism, but not information about the <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.value" title="psyneulink.core.components.component.Component.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> or <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.function" title="psyneulink.core.components.component.Component.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> of the Mechanism or its Ports.</li>
<li><em>VALUES</em> – show the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of the Mechanism and the <a class="reference internal" href="Port.html#psyneulink.core.components.ports.port.Port_Base.value" title="psyneulink.core.components.ports.port.Port_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of each of its Ports.</li>
<li><em>LABELS</em> – show the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of the Mechanism and the <a class="reference internal" href="Port.html#psyneulink.core.components.ports.port.Port_Base.value" title="psyneulink.core.components.ports.port.Port_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of each of its Ports, using any labels for the values of InputPorts and
OutputPorts specified in the Mechanism’s <code class="xref any docutils literal"><span class="pre">input_labels_dict</span></code> and
<code class="xref any docutils literal"><span class="pre">output_labels_dict</span></code>, respectively.</li>
<li><em>FUNCTIONS</em> – show the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> of the Mechanism and the <a class="reference internal" href="Port.html#psyneulink.core.components.ports.port.Port_Base.function" title="psyneulink.core.components.ports.port.Port_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> of its InputPorts and OutputPorts.</li>
<li><em>MECH_FUNCTION_PARAMS_</em> – show the parameters of the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> for each
Mechanism in the Composition (only applies if <em>FUNCTIONS</em> is True).</li>
<li><em>PORT_FUNCTION_PARAMS_</em> – show the parameters of the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> for each
Port of each Mechanism in the Composition (only applies if <em>FUNCTIONS</em> is True).</li>
<li><em>ROLES</em> – show the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">role</span></code></a> of the Mechanism in the Composition
(but not any of the other information;  use <em>ALL</em> to show ROLES with other information).</li>
<li><em>ALL</em> – shows the role, <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.function" title="psyneulink.core.components.component.Component.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a>, and <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.value" title="psyneulink.core.components.component.Component.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of the
Mechanisms in the <a class="reference internal" href="#"><span class="doc">Composition</span></a> and their <a class="reference internal" href="Port.html"><span class="doc">Ports</span></a> (using labels for
the values, if specified – see above), including parameters for all functions.</li>
</ul>
</li>
<li><strong>show_nested</strong> (<em>bool | dict : default ALL</em>) – specifies whether any nested Composition(s) are shown in details as inset graphs.  A dict can be used to
specify any of the arguments allowed for show_graph to be used for the nested Composition(s);  <em>ALL</em>
passes all arguments specified for the main Composition to the nested one(s);  True uses the default
values of show_graph args for the nested Composition(s).</li>
<li><strong>show_controller</strong> (<em>bool</em><em> or </em><em>AGENT_REP : default False</em>) – specifies whether or not to show the Composition’s <code class="xref any docutils literal"><span class="pre">controller</span></code> and associated
<a class="reference internal" href="ControlMechanism.html#psyneulink.core.components.mechanisms.modulatory.control.controlmechanism.ControlMechanism.objective_mechanism" title="psyneulink.core.components.mechanisms.modulatory.control.controlmechanism.ControlMechanism.objective_mechanism"><code class="xref any py py-attr docutils literal"><span class="pre">objective_mechanism</span></code></a> if it has one.  If the controller is an
OptimizationControlMechanism and it has an <a class="reference internal" href="OptimizationControlMechanism.html"><span class="doc">agent_rep</span></a>, then specifying
<em>AGENT_REP</em> will also show that.  All of these items are displayed in the color specified for
<strong>controller_color</strong>.</li>
<li><strong>show_cim</strong> (<em>bool : default False</em>) – specifies whether or not to show the Composition’s input and out CompositionInterfaceMechanisms (CIMs)</li>
<li><strong>show_learning</strong> (<em>bool</em><em> or </em><em>ALL : default False</em>) – specifies whether or not to show the <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a> of the
<a class="reference internal" href="#"><span class="doc">Composition</span></a>; they will all be displayed in the color specified for <strong>learning_color</strong>.
Projections that receive a <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> will be shown as a diamond-shaped node.
If set to <em>ALL</em>, all Projections associated with learning will be shown:  the LearningProjections
as well as from <a class="reference internal" href="ProcessingMechanism.html"><span class="doc">ProcessingMechanisms</span></a> to <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a>
that convey error and activation information;  if set to <code class="xref any docutils literal"><span class="pre">True</span></code>, only the LearningPojections are shown.</li>
<li><strong>show_projection_labels</strong> (<em>bool : default False</em>) – specifies whether or not to show names of projections.</li>
<li><strong>show_headers</strong> (<em>bool : default True</em>) – specifies whether or not to show headers in the subfields of a Mechanism’s node;  only takes effect if
<strong>show_node_structure</strong> is specified (see above).</li>
<li><strong>show_types</strong> (<em>bool : default False</em>) – specifies whether or not to show type (class) of <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> in each node label.</li>
<li><strong>show_dimensions</strong> (<em>bool : default False</em>) – <p>specifies whether or not to show dimensions for the <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.variable" title="psyneulink.core.components.component.Component.variable"><code class="xref any py py-attr docutils literal"><span class="pre">variable</span></code></a> and <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.value" title="psyneulink.core.components.component.Component.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of each Component in the graph (and/or MappingProjections when show_learning
is <code class="xref any docutils literal"><span class="pre">True</span></code>);  can have the following settings:</p>
<ul>
<li><em>MECHANISMS</em> – shows <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> input and output dimensions.  Input dimensions are shown
in parentheses below the name of the Mechanism; each number represents the dimension of the <a class="reference internal" href="InputPort.html#psyneulink.core.components.ports.inputport.InputPort.variable" title="psyneulink.core.components.ports.inputport.InputPort.variable"><code class="xref any py py-attr docutils literal"><span class="pre">variable</span></code></a> for each <a class="reference internal" href="InputPort.html"><span class="doc">InputPort</span></a> of the Mechanism; Output dimensions are shown above
the name of the Mechanism; each number represents the dimension for <a class="reference internal" href="OutputPort.html#psyneulink.core.components.ports.outputport.OutputPort.value" title="psyneulink.core.components.ports.outputport.OutputPort.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of each
of <a class="reference internal" href="OutputPort.html"><span class="doc">OutputPort</span></a> of the Mechanism.</li>
<li><em>PROJECTIONS</em> – shows <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjection</span></a> <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> dimensions.  Each is
shown in (&lt;dim&gt;x&lt;dim&gt;…) format;  for standard 2x2 “weight” matrix, the first entry is the number of
rows (input dimension) and the second the number of columns (output dimension).</li>
<li><em>ALL</em> – eqivalent to <code class="xref any docutils literal"><span class="pre">True</span></code>; shows dimensions for both Mechanisms and Projections (see above for
formats).</li>
</ul>
</li>
<li><strong>direction</strong> (<em>keyword : default 'BT'</em>) – ‘BT’: bottom to top; ‘TB’: top to bottom; ‘LR’: left to right; and ‘RL`: right to left.</li>
<li><strong>active_items</strong> (<em>List</em><em>[</em><a class="reference internal" href="Component.html#psyneulink.core.components.component.Component" title="psyneulink.core.components.component.Component"><em>Component</em></a><em>] </em><em>: default None</em>) – specifies one or more items in the graph to display in the color specified by <em>active_color*</em>.</li>
<li><strong>active_color</strong> (<em>keyword : default 'yellow'</em>) – specifies how to highlight the item(s) specified in <em>active_items*</em>:  either a color recognized
by GraphViz, or the keyword <em>BOLD</em>.</li>
<li><strong>input_color</strong> (<em>keyword : default 'green'</em><em>,</em>) – specifies the display color for <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Nodes in the Composition</li>
<li><strong>output_color</strong> (<em>keyword : default 'red'</em><em>,</em>) – specifies the display color for <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Nodes in the Composition</li>
<li><strong>input_and_output_color</strong> (<em>keyword : default 'brown'</em>) – specifies the display color of nodes that are both an <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> and an <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Node in the Composition</li>
<li><strong>controller_color</strong> (<em>keyword : default 'blue'</em>) – specifies the color in which the controller components are displayed</li>
<li><strong>learning_color</strong> (<em>keyword : default 'orange'</em>) – specifies the color in which the learning components are displayed</li>
<li><strong>composition_color</strong> (<em>keyword : default 'brown'</em>) – specifies the display color of nodes that represent nested Compositions.</li>
<li><strong>feedback_shape</strong> (<em>keyword : default 'septagon'</em>) – specifies the display shape of nodes that are assigned the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole" title="psyneulink.core.compositions.composition.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.FEEDBACK_SENDER" title="psyneulink.core.compositions.composition.NodeRole.FEEDBACK_SENDER"><code class="xref any py py-attr docutils literal"><span class="pre">FEEDBACK_SENDER</span></code></a>.</li>
<li><strong>cim_shape</strong> (<em>default 'square'</em>) – specifies the display color input_CIM and output_CIM nodes</li>
<li><strong>output_fmt</strong> (<em>keyword</em><em> or </em><em>None : default 'pdf'</em>) – ‘pdf’: generate and open a pdf with the visualization;
‘jupyter’: return the object (for working in jupyter/ipython notebooks);
‘gv’: return graphviz object
‘gif’: return gif used for animation
None : return None</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">PDF: (placed in current directory) if <code class="xref std std-keyword docutils literal"><span class="pre">output_fmt</span></code> arg is ‘pdf’;
Graphviz graph object if <code class="xref std std-keyword docutils literal"><span class="pre">output_fmt</span></code> arg is ‘gv’ or ‘jupyter’;
gif if <code class="xref std std-keyword docutils literal"><span class="pre">output_fmt</span></code> arg is ‘gif’.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref any docutils literal"><span class="pre">pdf</span></code> or Graphviz graph object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.stateful_nodes">
<code class="descname">stateful_nodes</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.stateful_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>List of all nodes in the system that are currently marked as stateful. For Mechanisms, statefulness is
determined by checking whether node.has_initializers is True. For Compositions, statefulness is determined
by checking whether any of its nodes are stateful.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>all stateful nodes in the system</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">List[Nodes]</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="psyneulink.core.compositions.composition.NodeRole">
<em class="property">class </em><code class="descclassname">psyneulink.core.compositions.composition.</code><code class="descname">NodeRole</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole" title="Permalink to this definition">¶</a></dt>
<dd><p>Roles assigned to <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Nodes</span></a> of a <a class="reference internal" href="#"><span class="doc">Composition</span></a>.</p>
<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.ORIGIN">
<code class="descname">ORIGIN</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.ORIGIN" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> that does not receive any <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> from any other Nodes
within its own <a class="reference internal" href="#"><span class="doc">Composition</span></a>, though if it is in a <a class="reference internal" href="#composition-nested"><span class="std std-ref">nested Composition</span></a> it may
receive Projections from the outer Composition.  <code class="xref any docutils literal"><span class="pre">Execution</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">`Composition</span></code>
always begins with an <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.ORIGIN" title="psyneulink.core.compositions.composition.NodeRole.ORIGIN"><code class="xref any py py-attr docutils literal"><span class="pre">ORIGIN</span></code></a> Node.  A Composition may have many <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.ORIGIN" title="psyneulink.core.compositions.composition.NodeRole.ORIGIN"><code class="xref any py py-attr docutils literal"><span class="pre">ORIGIN</span></code></a> Nodes.  This role cannot be
modified programmatically.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.INPUT">
<code class="descname">INPUT</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> that receives input from outside its <a class="reference internal" href="#"><span class="doc">Composition</span></a>, either from the Composition’s
<code class="xref any docutils literal"><span class="pre">run</span></code> method or, if it is in a <a class="reference internal" href="#composition-nested"><span class="std std-ref">nested Composition</span></a>, from the outer
outer Composition.  By default, the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.ORIGIN" title="psyneulink.core.compositions.composition.NodeRole.ORIGIN"><code class="xref any py py-attr docutils literal"><span class="pre">ORIGIN</span></code></a> Nodes of a Composition are also its <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Nodes; however this
can be modified by <a class="reference internal" href="#composition-node-role-assignment"><span class="std std-ref">assigning specified NodeRoles</span></a> to Nodes.  A Composition
can have many <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.INPUT" title="psyneulink.core.compositions.composition.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Nodes.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.SINGLETON">
<code class="descname">SINGLETON</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.SINGLETON" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> that is both an <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.ORIGIN" title="psyneulink.core.compositions.composition.NodeRole.ORIGIN"><code class="xref any py py-attr docutils literal"><span class="pre">ORIGIN</span></code></a> and a <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="psyneulink.core.compositions.composition.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a>.  This role cannot be modified
programmatically.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.INTERNAL">
<code class="descname">INTERNAL</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.INTERNAL" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> that is neither <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.ORIGIN" title="psyneulink.core.compositions.composition.NodeRole.ORIGIN"><code class="xref any py py-attr docutils literal"><span class="pre">ORIGIN</span></code></a> nor <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="psyneulink.core.compositions.composition.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a>.  This role cannot be modified
programmatically.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.CYCLE">
<code class="descname">CYCLE</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.CYCLE" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> that belongs to a cycle. This role cannot be modified programmatically.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.FEEDBACK_SENDER">
<code class="descname">FEEDBACK_SENDER</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.FEEDBACK_SENDER" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> with one or more efferent <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> the <code class="xref any docutils literal"><span class="pre">feedback</span></code> attribute of which is True.  This means that the Node is at the end of a <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a>
that would otherwise form a <code class="xref any docutils literal"><span class="pre">cycle</span></code>. This role cannot be  modified directly,
but will be modified if the <code class="xref any docutils literal"><span class="pre">feedback</span></code> attribute of the relelvant <a class="reference internal" href="Projection.html"><span class="doc">Projection</span></a>(s) is modified.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.FEEDBACK_RECEIVER">
<code class="descname">FEEDBACK_RECEIVER</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.FEEDBACK_RECEIVER" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> with one or more afferent <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a>  the <code class="xref any docutils literal"><span class="pre">feedback</span></code> attribute of which is True.  This means that the Node is at the start of a
<a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> that would otherwise form a <code class="xref any docutils literal"><span class="pre">cycle</span></code>. This role cannot be
modified directly, but will be modified if the <code class="xref any docutils literal"><span class="pre">feedback</span></code> attribute of the
relelvant <a class="reference internal" href="Projection.html"><span class="doc">Projection</span></a>(s) is modified.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.CONTROL_OBJECTIVE">
<code class="descname">CONTROL_OBJECTIVE</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.CONTROL_OBJECTIVE" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> that is an <a class="reference internal" href="ObjectiveMechanism.html"><span class="doc">ObjectiveMechanism</span></a> associated with a <a class="reference internal" href="ControlMechanism.html"><span class="doc">Control Mechanisms</span></a> other
than the Composition’s <code class="xref any docutils literal"><span class="pre">controller</span></code> (if it has one).</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.CONTROLLER_OBJECTIVE">
<code class="descname">CONTROLLER_OBJECTIVE</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.CONTROLLER_OBJECTIVE" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> that is an <a class="reference internal" href="ObjectiveMechanism.html"><span class="doc">ObjectiveMechanism</span></a> associated with a Composition’s <code class="xref any docutils literal"><span class="pre">controller</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.LEARNING">
<code class="descname">LEARNING</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.LEARNING" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> that is only executed when learning is enabled;  if it is not also assigned
<a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TARGET" title="psyneulink.core.compositions.composition.NodeRole.TARGET"><code class="xref any py py-attr docutils literal"><span class="pre">TARGET</span></code></a> or <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.LEARNING_OBJECTIVE" title="psyneulink.core.compositions.composition.NodeRole.LEARNING_OBJECTIVE"><code class="xref any py py-attr docutils literal"><span class="pre">LEARNING_OBJECTIVE</span></code></a>, then it is a <a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a>. This role cannot be modified
programmatically.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.TARGET">
<code class="descname">TARGET</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.TARGET" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> that receives the target for a <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning pathway</span></a> specified in the <strong>inputs</strong> argument of the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learn" title="psyneulink.core.compositions.composition.Composition.learn"><code class="xref any py py-meth docutils literal"><span class="pre">learn</span></code></a> method (see <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">TARGET_MECHANISM</span></a>).</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.LEARNING_OBJECTIVE">
<code class="descname">LEARNING_OBJECTIVE</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.LEARNING_OBJECTIVE" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> that is the <a class="reference internal" href="ObjectiveMechanism.html"><span class="doc">ObjectiveMechanism</span></a> of a <a class="reference internal" href="#composition-learning-pathway"><span class="std std-ref">learning Pathway</span></a>; usually a <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> (see <code class="xref any docutils literal"><span class="pre">OBJECTIVE_MECHANISM</span></code>).</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.OUTPUT">
<code class="descname">OUTPUT</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.output_values" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.output_values"><code class="xref any py py-attr docutils literal"><span class="pre">output_values</span></code></a> of which are included in
the Composition’s <code class="xref any docutils literal"><span class="pre">results</span></code> attribute.  By default, the <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="psyneulink.core.compositions.composition.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> Nodes of a
Composition are also its <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Nodes; however this can be modified by <a class="reference internal" href="#composition-node-role-assignment"><span class="std std-ref">assigning specified NodeRoles</span></a> to Nodes.  A Composition can have many <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.OUTPUT" title="psyneulink.core.compositions.composition.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Nodes.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.NodeRole.TERMINAL">
<code class="descname">TERMINAL</code><a class="headerlink" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#composition-nodes"><span class="std std-ref">Node</span></a> that does not send any <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> to any other Nodes within
its own <a class="reference internal" href="#"><span class="doc">Composition</span></a>, though if it is in a <a class="reference internal" href="#composition-nested"><span class="std std-ref">nested Composition</span></a> it may send Projections
to the outer Composition. A Composition may have many <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="psyneulink.core.compositions.composition.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> Nodes. The <a class="reference internal" href="ObjectiveMechanism.html"><span class="doc">ObjectiveMechanism</span></a> associated
with the Composition’s <code class="xref any docutils literal"><span class="pre">controller</span></code> (assigned the role <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.CONTROLLER_OBJECTIVE" title="psyneulink.core.compositions.composition.NodeRole.CONTROLLER_OBJECTIVE"><code class="xref any py py-attr docutils literal"><span class="pre">CONTROLLER_OBJECTIVE</span></code></a>)
cannot be a <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="psyneulink.core.compositions.composition.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> Node of a Composition.  <code class="xref any docutils literal"><span class="pre">Execution</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">Composition</span></code> itself
always ends with a <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="psyneulink.core.compositions.composition.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> Node, although the <code class="xref any docutils literal"><span class="pre">controller</span></code> and its associated
<a class="reference internal" href="ObjectiveMechanism.html"><span class="doc">ObjectiveMechanism</span></a> may execute after that; some <a class="reference internal" href="#psyneulink.core.compositions.composition.NodeRole.TERMINAL" title="psyneulink.core.compositions.composition.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> Nodes may also execute earlier (i.e., if they
belong to a <a class="reference internal" href="Pathway.html"><span class="doc">Pathway</span></a> that is shorter than the longest one in the Composition).
This role cannot be modified programmatically.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


             </article>
             
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Pathway.html" class="btn btn-neutral float-right" title="Pathway" accesskey="n" rel="next">Next <img src="_static/images/chevron-right-orange.svg" class="next-page"></a>
      
      
        <a href="LearningFunctions.html" class="btn btn-neutral" title="LearningFunctions" accesskey="p" rel="prev"><img src="_static/images/chevron-right-orange.svg" class="previous-page"> Previous</a>
      
    </div>
  

  

    <hr>

  

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Jonathan D. Cohen.

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
      </div>
     

</footer>

          </div>
        </div>

        <div class="psyneulink-content-right" id="psyneulink-content-right">
          <div class="psyneulink-right-menu" id="psyneulink-right-menu">
            <div class="psyneulink-side-scroll" id="psyneulink-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">Composition</a><ul>
<li><a class="reference internal" href="#related">Related</a><ul>
<li><a class="reference internal" href="#contents">Contents</a></li>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#creating-a-composition">Creating a Composition</a><ul>
<li><a class="reference internal" href="#using-the-constructor"><em>Using the Constructor</em></a></li>
<li><a class="reference internal" href="#adding-components-and-pathways"><em>Adding Components and Pathways</em></a></li>
<li><a class="reference internal" href="#adding-nested-compositions"><em>Adding Nested Compositions</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#composition-structure">Composition Structure</a><ul>
<li><a class="reference internal" href="#graph"><em>Graph</em></a><ul>
<li><a class="reference internal" href="#acyclic-and-cyclic-graphs">Acyclic and Cyclic Graphs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nodes"><em>Nodes</em></a></li>
<li><a class="reference internal" href="#nested-compositions"><em>Nested Compositions</em></a></li>
<li><a class="reference internal" href="#pathways"><em>Pathways</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#controlling-a-composition">Controlling a Composition</a><ul>
<li><a class="reference internal" href="#assigning-a-controller"><em>Assigning a Controller</em></a></li>
<li><a class="reference internal" href="#controller-execution"><em>Controller Execution</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#learning-in-a-composition">Learning in a Composition</a><ul>
<li><a class="reference internal" href="#configuring-learning-in-a-composition"><em>Configuring Learning in a Composition</em></a></li>
<li><a class="reference internal" href="#learning-using-psyneulink-components"><em>Learning Using PsyNeuLink Components</em></a><ul>
<li><a class="reference internal" href="#unsupervised-learning"><strong>Unsupervised Learning</strong></a></li>
<li><a class="reference internal" href="#supervised-learning"><strong>Supervised Learning</strong></a><ul>
<li><a class="reference internal" href="#supervised-learning-methods"><em>Supervised Learning Methods</em></a></li>
<li><a class="reference internal" href="#supervised-learning-pathways"><em>Supervised Learning Pathways</em></a></li>
<li><a class="reference internal" href="#supervised-learning-components"><em>Supervised Learning Components</em></a></li>
<li><a class="reference internal" href="#execution-of-learning"><em>Execution of Learning</em></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#learning-using-autodiffcompositon"><em>Learning Using AutodiffCompositon</em></a></li>
<li><a class="reference internal" href="#learning-using-userdefinedfunctions"><em>Learning Using UserDefinedFunctions</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#executing-a-composition">Executing a Composition</a><ul>
<li><a class="reference internal" href="#input-formats"><em>Input formats</em></a><ul>
<li><a class="reference internal" href="#input-dictionary">Input Dictionary</a></li>
<li><a class="reference internal" href="#specifying-inputs-programmatically">Specifying Inputs Programmatically</a></li>
</ul>
</li>
<li><a class="reference internal" href="#execution-contexts"><em>Execution Contexts</em></a></li>
<li><a class="reference internal" href="#compilation"><em>Compilation</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#visualizing-a-composition">Visualizing a Composition</a><ul>
<li><a class="reference internal" href="#composition-creation-examples"><em>Creating a Composition</em></a></li>
<li><a class="reference internal" href="#run-composition"><em>Run Composition</em></a></li>
<li><a class="reference internal" href="#composition-examples-input"><em>Input Formats</em></a><ul>
<li><a class="reference internal" href="#examples-of-input-dictionary-specifications">Examples of Input Dictionary Specifications</a></li>
<li><a class="reference internal" href="#examples-of-programmatic-input-specification">Examples of Programmatic Input Specification</a></li>
</ul>
</li>
<li><a class="reference internal" href="#composition-examples-execution-context"><em>Execution Contexts</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#class-reference">Class Reference</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  


  

     
       <script type="text/javascript">
           var DOCUMENTATION_OPTIONS = {
               URL_ROOT:'./',
               VERSION:'0.7.5.4+105.g9067cd5',
               LANGUAGE:'None',
               COLLAPSE_INDEX:false,
               FILE_SUFFIX:'.html',
               HAS_SOURCE:  true,
               SOURCELINK_SUFFIX: '.txt'
           };
       </script>
         <script type="text/javascript" src="_static/jquery.js"></script>
         <script type="text/javascript" src="_static/underscore.js"></script>
         <script type="text/javascript" src="_static/doctools.js"></script>
         <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
     

  

  <script type="text/javascript" src="_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="_static/js/vendor/bootstrap.min.js"></script>
  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <!-- Begin Footer -->

  <footer class="site-footer" id="docs-tutorials-resources">
    <div class="container footer-container">
      <div class="footer-logo-wrapper">
        <a href="https://princetonuniversity.github.io/PsyNeuLink/" class="footer-logo"></a>
      </div>

  </footer>

  

  <!-- End Footer -->

  <!-- Begin Mobile Menu -->

  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container mobile-logo-container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://princetonuniversity.github.io/PsyNeuLink/" aria-label="PsyNeuLink"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="https://github.com/PrincetonUniversity/PsyNeuLink">Github</a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      psyneulinkAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.psyneulink-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>