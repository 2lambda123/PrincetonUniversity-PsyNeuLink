

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Composition &mdash; PsyNeuLink 0.5.3.2+692.g16d5a55 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'0.5.3.2+692.g16d5a55',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CompositionFunctionApproximator" href="CompositionFunctionApproximator.html" />
    <link rel="prev" title="LearningFunctions" href="LearningFunctions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> PsyNeuLink
          

          
          </a>

          
            
            
              <div class="version">
                0.5.3.2+692
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Welcome to PsyNeuLink </a></li>
<li class="toctree-l1"><a class="reference internal" href="BasicsAndSampler.html">Basics and Sampler</a></li>
<li class="toctree-l1"><a class="reference internal" href="QuickReference.html">Quick Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Core.html">Core</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Component.html">Components</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Compositions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="CompositionFunctionApproximator.html">CompositionFunctionApproximator</a></li>
<li class="toctree-l3"><a class="reference internal" href="AutodiffComposition.html">AutodiffComposition</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Scheduling.html">Scheduling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Library.html">Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="ContributorsGuide.html">Contributors Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PsyNeuLink</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="Core.html">Core</a> &raquo;</li>
        
      <li>Composition</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Composition.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="composition">
<h1>Composition<a class="headerlink" href="#composition" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="CompositionFunctionApproximator.html">CompositionFunctionApproximator</a></li>
<li class="toctree-l1"><a class="reference internal" href="AutodiffComposition.html">AutodiffComposition</a></li>
</ul>
</div>
<span class="target" id="module-psyneulink.core.compositions.composition"></span><div class="section" id="sections">
<h2>Sections<a class="headerlink" href="#sections" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#composition-overview"><span class="std std-ref">Overview</span></a></li>
<li><a class="reference internal" href="#composition-creation"><span class="std std-ref">Creating a Composition</span></a></li>
<li><a class="reference internal" href="#composition-run"><span class="std std-ref">Running a Composition</span></a></li>
<li><a class="reference internal" href="#composition-controller"><span class="std std-ref">Controlling a Composition</span></a></li>
<li><a class="reference internal" href="#composition-learning"><span class="std std-ref">Learning in a Composition</span></a></li>
<li><a class="reference internal" href="#composition-visualization"><span class="std std-ref">Visualizing a Composition</span></a></li>
<li><a class="reference internal" href="#composition-class-reference"><span class="std std-ref">Class Reference</span></a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="overview">
<span id="composition-overview"></span><h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Composition is the base class for objects that combine PsyNeuLink <a class="reference internal" href="Component.html"><span class="doc">Components</span></a> into an executable model.
It defines a common set of attributes possessed, and methods used by all Composition objects.</p>
<p>Composition “Nodes” are <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> and/or nested <a class="reference internal" href="#"><span class="doc">Compositions</span></a>. <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> connect two Nodes. The Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.graph" title="psyneulink.core.compositions.composition.Composition.graph"><code class="xref any py py-attr docutils literal"><span class="pre">graph</span></code></a> stores the structural relationships
among the Nodes of a Composition and the Projections that connect them.  The Composition’s <a class="reference internal" href="Scheduler.html"><span class="doc">scheduler</span></a>
generates an execution queue based on these structural dependencies, allowing for other user-specified scheduling
and termination conditions to be specified.</p>
</div>
<div class="section" id="creating-a-composition">
<span id="composition-creation"></span><h2>Creating a Composition<a class="headerlink" href="#creating-a-composition" title="Permalink to this headline">¶</a></h2>
<p>A generic Composition can be created by calling the constructor, and then adding <a class="reference internal" href="Component.html"><span class="doc">Components</span></a> using the
following Composition methods:</p>
<blockquote>
<div><ul>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_node" title="psyneulink.core.compositions.composition.Composition.add_node"><code class="xref any py py-meth docutils literal"><span class="pre">add_node</span></code></a></p>
<blockquote>
<div><p>adds a node to the Composition</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_nodes" title="psyneulink.core.compositions.composition.Composition.add_nodes"><code class="xref any py py-meth docutils literal"><span class="pre">add_nodes</span></code></a></p>
<blockquote>
<div><p>adds mutiple nodes to the Composition</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_projection" title="psyneulink.core.compositions.composition.Composition.add_projection"><code class="xref any py py-meth docutils literal"><span class="pre">add_projection</span></code></a></p>
<blockquote>
<div><p>adds a connection between a pair of nodes in the Composition</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_projections" title="psyneulink.core.compositions.composition.Composition.add_projections"><code class="xref any py py-meth docutils literal"><span class="pre">add_projections</span></code></a></p>
<blockquote>
<div><p>adds connection between multiple pairs of nodes in the Composition</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a></p>
<blockquote>
<div><p>adds and connects a list of nodes and/or Projections to the Composition;
Inserts a default Projection between any adjacent Nodes.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>In addition, a Composition has the following set of <a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning methods</span></a> that can also
be used to create a Composition from (or add) pathways that implement <a class="reference internal" href="#composition-learning"><span class="std std-ref">learning</span></a>:</p>
<blockquote>
<div><ul>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_learning_pathway</span></code></a> &lt;Composition.add_linear_learning_pathway&gt;`</p>
<blockquote>
<div><p>adds and connects a list of nodes, including <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a>
needed to implement the algorithm specified in its <strong>learning_function</strong> argument in the specified pathway.</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_reinforcement_learning_pathway</span></code></a></p>
<blockquote>
<div><p>adds and connects a list of nodes, including <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a>
needed to implement <code class="xref any docutils literal"><span class="pre">reinforcement</span> <span class="pre">learning</span></code> in the specified pathway;</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_td_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_td_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_td_learning_pathway</span></code></a></p>
<blockquote>
<div><p>adds and connects a list of nodes, including <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a>
needed to implement the <code class="xref any docutils literal"><span class="pre">temporal</span> <span class="pre">differences</span></code> method of reinforcement learning` in the specified pathway;</p>
</div></blockquote>
</li>
<li><p class="first"><code class="xref any docutils literal"><span class="pre">add_backpopagation_learning_pathway</span></code></p>
<blockquote>
<div><p>adds and connects a list of nodes, including <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a>
needed to implement the <code class="xref any docutils literal"><span class="pre">backpropagation</span> <span class="pre">learning</span> <span class="pre">algorithm</span></code> in the specified pathway.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only Mechanisms and Projections added to a Composition via the methods above constitute a Composition, even if
other Mechanism and/or Projections are constructed in the same script.</p>
</div>
<p>In the following script comp_0, comp_1 and comp_2 are identical, but constructed using different methods.</p>
<blockquote>
<div><p><em>Create Mechanisms:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Create Projections:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">A_to_B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">MappingProjection</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;A-to-B&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B_to_C</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">MappingProjection</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;B-to-C&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Create Composition; Add Nodes (Mechanisms) and Projections via the add_linear_processing_pathway method:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp_0</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp-0&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_0</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway</span><span class="o">=</span><span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">A_to_B</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">B_to_C</span><span class="p">,</span> <span class="n">C</span><span class="p">])</span>
</pre></div>
</div>
<p><em>Create Composition; Add Nodes (Mechanisms) and Projections via the add_nodes and add_projection methods:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp_1</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp-1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_1</span><span class="o">.</span><span class="n">add_nodes</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_1</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">A_to_B</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_1</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">B_to_C</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Create Composition; Add Nodes (Mechanisms) and Projections via the add_node and add_projection methods:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp-2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">A</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">B</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">node</span><span class="o">=</span><span class="n">C</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">A_to_B</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">B_to_C</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Run each Composition:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">A</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]]]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_0_output</span> <span class="o">=</span> <span class="n">comp_0</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_1_output</span> <span class="o">=</span> <span class="n">comp_1</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp_2_output</span> <span class="o">=</span> <span class="n">comp_2</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<div class="section" id="nested-compositions">
<span id="composition-nested"></span><h3><em>Nested Compositions</em><a class="headerlink" href="#nested-compositions" title="Permalink to this headline">¶</a></h3>
<p>A Composition can be used as a node of another Composition, by calling <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_node" title="psyneulink.core.compositions.composition.Composition.add_node"><code class="xref any py py-meth docutils literal"><span class="pre">add_node</span></code></a>
from the parent composition using the child Composition as an argument. Projections can then be specifed to and from
the nested composition just as for any other node.</p>
<blockquote>
<div><p><em>Create outer Composition:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer_A</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_A&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_comp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">add_nodes</span><span class="p">([</span><span class="n">outer_A</span><span class="p">,</span> <span class="n">outer_B</span><span class="p">])</span>
</pre></div>
</div>
<p><em>Create and configure inner Composition:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">inner_A</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_A&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_comp</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_comp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">inner_A</span><span class="p">,</span> <span class="n">inner_B</span><span class="p">])</span>
</pre></div>
</div>
<p><em>Nest inner Composition within outer Composition using `add_node &lt;Composition.add_node&gt;`:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">inner_comp</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Create Projections:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">pnl</span><span class="o">.</span><span class="n">MappingProjection</span><span class="p">(),</span> <span class="n">sender</span><span class="o">=</span><span class="n">outer_A</span><span class="p">,</span> <span class="n">receiver</span><span class="o">=</span><span class="n">inner_comp</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">add_projection</span><span class="p">(</span><span class="n">pnl</span><span class="o">.</span><span class="n">MappingProjection</span><span class="p">(),</span> <span class="n">sender</span><span class="o">=</span><span class="n">inner_comp</span><span class="p">,</span> <span class="n">receiver</span><span class="o">=</span><span class="n">outer_B</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">outer_A</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]]]}</span>
</pre></div>
</div>
<p><em>Run Composition:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Using `add_linear_processing_pathway &lt;Composition.add_linear_processing_pathway&gt;` with nested compositions for brevity:</em></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">outer_A</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_A&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;outer_comp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_A</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_A&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_B</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">ProcessingMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_B&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_comp</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;inner_comp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inner_comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">inner_A</span><span class="p">,</span> <span class="n">inner_B</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">outer_A</span><span class="p">,</span> <span class="n">inner_comp</span><span class="p">,</span> <span class="n">outer_B</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">outer_A</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]]]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outer_comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="running-a-composition">
<span id="composition-run"></span><h2>Running a Composition<a class="headerlink" href="#running-a-composition" title="Permalink to this headline">¶</a></h2>
<div class="section" id="inputs">
<span id="composition-run-inputs"></span><h3><em>Inputs</em><a class="headerlink" href="#inputs" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> method presents the inputs for each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> to the input_states of the INPUT Nodes in the
<code class="xref any docutils literal"><span class="pre">scope</span> <span class="pre">of</span> <span class="pre">execution</span></code>. These input values are specified in the <strong>inputs</strong> argument of
a Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.execute" title="psyneulink.core.compositions.composition.Composition.execute"><code class="xref any py py-meth docutils literal"><span class="pre">execute</span></code></a> or <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> methods.</p>
<p>The standard way to specificy inputs is a Python dictionary in which each key is an <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.INPUT" title="psyneulink.core.globals.utilities.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Node and
each value is a list. The lists represent the inputs to the key <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.INPUT" title="psyneulink.core.globals.utilities.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Nodes, in which the i-th
element of the list represents the input value to the key Node on trial i.</p>
<div class="figure" id="composition-run-inputs-fig-states">
<img alt="Example input specifications with input states" src="_images/input_spec_states.svg" /></div>
<p>Each input value must be compatible with the shape of the key <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.INPUT" title="psyneulink.core.globals.utilities.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Node’s <code class="xref any docutils literal"><span class="pre">external_input_values</span></code>. As a result, each item in the list of inputs is typically a 2d list/array,
though <a class="reference internal" href="#composition-input-specification-examples"><span class="std std-ref">some shorthand notations are allowed</span></a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">default_variable</span><span class="o">=</span><span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">default_variable</span><span class="o">=</span><span class="p">[[</span><span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pathway2</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]],</span>
<span class="gp">... </span>                    <span class="n">b</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">]]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A Node’s <code class="xref any docutils literal"><span class="pre">external_input_values</span></code> attribute is always a 2d list in which the
index i element is the value of the Node’s index i <code class="xref any docutils literal"><span class="pre">external_input_state</span></code>. In
many cases, <code class="xref any docutils literal"><span class="pre">external_input_values</span></code> is the same as <code class="xref any docutils literal"><span class="pre">variable</span></code>. Keep in mind that any InputStates marked as “internal” are excluded from
<code class="xref any docutils literal"><span class="pre">external_input_values</span></code>, and do not receive user-specified input values.</p>
</div>
<p>If num_trials is not in use, the number of inputs provided determines the number of trials in the run. For example, if
five inputs are provided for each INPUT Node, and num_trials is not specified, the Composition executes five times.</p>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="13%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Input to Mechanism a</td>
<td>1.0</td>
<td>2.0</td>
<td>3.0</td>
<td>4.0</td>
<td>5.0</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">3.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">4.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">5.0</span><span class="p">]]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>The number of inputs specified <strong>must</strong> be the same for all Nodes in the input dictionary (except for any Nodes for
which only one input is specified). In other words, all of the values in the input dictionary must have the same length
as each other (or length 1).</p>
<p>If num_trials is in use, <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> iterates over the inputs until num_trials is reached. For example, if five inputs
are provided for each <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.INPUT" title="psyneulink.core.globals.utilities.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Node, and num_trials = 7, the system executes seven times. The input
values from trials 0 and 1 are used again on trials 5 and 6, respectively.</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="11%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr class="row-even"><td>Input to Mechanism a</td>
<td>1.0</td>
<td>2.0</td>
<td>3.0</td>
<td>4.0</td>
<td>5.0</td>
<td>1.0</td>
<td>2.0</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">3.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">4.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">5.0</span><span class="p">]]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">num_trials</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
<p id="composition-input-specification-examples">For convenience, condensed versions of the input specification described above are also accepted in the following
situations:</p>
<ul class="simple">
<li><strong>Case 1: INPUT Node has only one input state</strong></li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="12%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Input to <strong>Mechanism a</strong></td>
<td>1.0</td>
<td>2.0</td>
<td>3.0</td>
<td>4.0</td>
<td>5.0</td>
</tr>
</tbody>
</table>
<p>Complete input specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">3.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">4.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">5.0</span><span class="p">]]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>Shorthand - drop the outer list on each input because <strong>Mechanism a</strong> only has one input state:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">4.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">5.0</span><span class="p">]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>Shorthand - drop the remaining list on each input because <strong>Mechanism a</strong>’s one input state’s value is length 1:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>Case 2: Only one input is provided for the INPUT Node</strong></li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="59%" />
<col width="41%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
</tr>
<tr class="row-even"><td>Input to <strong>Mechanism a</strong></td>
<td>[[1.0], [2.0]]</td>
</tr>
</tbody>
</table>
<p>Complete input specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>
<span class="go">                              default_variable=[[0.0], [0.0]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>Shorthand - drop the outer list on <strong>Mechanism a</strong>’s input specification because there is only one trial:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]]}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>Case 3: The same input is used on all trials</strong></li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="15%" />
<col width="16%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Input to <strong>Mechanism a</strong></td>
<td>[[1.0], [2.0]]</td>
<td>[[1.0], [2.0]]</td>
<td>[[1.0], [2.0]]</td>
<td>[[1.0], [2.0]]</td>
<td>[[1.0], [2.0]]</td>
</tr>
</tbody>
</table>
<p>Complete input specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">default_variable</span><span class="o">=</span><span class="p">[[</span><span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]],</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]]]}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>Shorthand - drop the outer list on <strong>Mechanism a</strong>’s input specification and use <code class="xref any docutils literal"><span class="pre">num_trials</span></code> to repeat the input value</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">]]}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">num_trials</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>Case 4: There is only one INPUT Node</strong></li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="30%" />
<col width="30%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Trial #</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="row-even"><td>Input to <strong>Mechanism a</strong></td>
<td>[1.0, 2.0, 3.0]</td>
<td>[1.0, 2.0, 3.0]</td>
</tr>
</tbody>
</table>
<p>Complete input specification:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">psyneulink</span> <span class="k">as</span> <span class="nn">pnl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">default_variable</span><span class="o">=</span><span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">pnl</span><span class="o">.</span><span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pathway1</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">(</span><span class="n">pathway1</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">input_dictionary</span> <span class="o">=</span> <span class="n">input_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]]}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_dictionary</span><span class="p">)</span>
</pre></div>
</div>
<p>Shorthand - specify <strong>Mechanism a</strong>’s inputs in a list because it is the only INPUT Node</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_list</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="n">input_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="interactive-inputs">
<span id="composition-input-as-function"></span><h3><em>Interactive Inputs</em><a class="headerlink" href="#interactive-inputs" title="Permalink to this headline">¶</a></h3>
<p>An alternative way to specify inputs is with a function. The function must return a dictionary that satisfies
the rules above for standard input specification. The only difference is that on each execution, the function returns
the input values for each INPUT Node for a single trial.</p>
</div>
</div>
<div class="section" id="controlling-a-composition">
<span id="composition-controller"></span><h2>Controlling a Composition<a class="headerlink" href="#controlling-a-composition" title="Permalink to this headline">¶</a></h2>
<p>A Composition can be assigned a <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a>.  This is a <a class="reference internal" href="ModulatoryMechanism.html"><span class="doc">ModulatoryMechanism</span></a>, or a subclass
of one, that modulates the parameters of Components within the Composition (including Components of nested Compositions).
It typically does this based on the output of an <a class="reference internal" href="ObjectiveMechanism.html"><span class="doc">ObjectiveMechanism</span></a> that evaluates the value of other Mechanisms in
the Composition, and provides the result to the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a>.</p>
<div class="section" id="assigning-a-controller">
<span id="composition-controller-assignment"></span><h3>Assigning a Controller<a class="headerlink" href="#assigning-a-controller" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> can be assigned either by specifying it in the <strong>controller</strong> argument of the
Composition’s constructor, or using its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_controller" title="psyneulink.core.compositions.composition.Composition.add_controller"><code class="xref any py py-meth docutils literal"><span class="pre">add_controller</span></code></a> method.</p>
</div>
<div class="section" id="controller-execution">
<span id="composition-controller-execution"></span><h3>Controller Execution<a class="headerlink" href="#controller-execution" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> is executed only if the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.enable_controller" title="psyneulink.core.compositions.composition.Composition.enable_controller"><code class="xref any py py-attr docutils literal"><span class="pre">enable_controller</span></code></a> attribute is True.  This generally done automatically when the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> is <a class="reference internal" href="#composition-controller-assignment"><span class="std std-ref">assigned</span></a>.  If enabled, the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> is generally executed either before or after all of the other Components in the Composition
have been executed, as determined by the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller_mode" title="psyneulink.core.compositions.composition.Composition.controller_mode"><code class="xref any py py-attr docutils literal"><span class="pre">controller_mode</span></code></a> attribute.
However, the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller_condition" title="psyneulink.core.compositions.composition.Composition.controller_condition"><code class="xref any py py-attr docutils literal"><span class="pre">controller_condition</span></code></a> attribute can be used to
customize when it is executed.  All three of these attributes can be specified in corresponding arguments of the
Composition’s constructor, or programmatically after it is constructed by assigning the desired value to the
attribute.</p>
</div>
</div>
<div class="section" id="learning-in-a-composition">
<span id="composition-learning"></span><h2>Learning in a Composition<a class="headerlink" href="#learning-in-a-composition" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="#composition-learning-standard"><span class="std std-ref">Learning Using PsyNeuLink Components</span></a></li>
<li><a class="reference internal" href="#composition-learning-autodiffcomposition"><span class="std std-ref">Learning Using AutodiffCompositon</span></a></li>
<li><a class="reference internal" href="#composition-learning-udf"><span class="std std-ref">Learning Using UserDefinedFunctions</span></a></li>
</ul>
<p>Learning is used to modify the <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> between Mechanisms in a Composition.  More specifically,
it modifies the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of those <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjections</span></a>,
which implements the strengths (“weights”) of the associations between representations in the Mechanisms they connect.
There are three ways of implementing learning in a Composition:  i) using <a class="reference internal" href="#composition-learning-standard"><span class="std std-ref">standard PsyNeuLink Components</span></a>; ii) using the <a class="reference internal" href="#composition-learning-autodiffcomposition"><span class="std std-ref">AutodiffComposition</span></a> – a
specialized subclass of Composition that executes learning using <a class="reference external" href="https://pytorch.org">PyTorch</a>; and iii) by using
<a class="reference internal" href="UserDefinedFunction.html"><span class="doc">UserDefinedFunctions</span></a>.  The advantage of using standard PsyNeuLink compoments is that it
assigns each operation involved in learning to a dedicated Component. This helps make clear exactly what those
operations are, the sequence in which they are carried out, and how they interact with one another.  However,
this can also make execution inefficient, due to the “overhead” incurred by distributing the calculations over
different Components.  If more efficient computation is critical, then the <a class="reference internal" href="AutodiffComposition.html"><span class="doc">AutodiffComposition</span></a> can be used to
execute a compatible PsyNeuLink Composition in PyTorch, or one or more <a class="reference internal" href="UserDefinedFunction.html"><span class="doc">UserDefinedFunctions</span></a>
can be assigned to either PyTorch functions or those in any other Python environment that implements learning and
accepts and returns tensors. Each of these approaches is described in more detail below.</p>
<div class="section" id="learning-using-psyneulink-components">
<span id="composition-learning-standard"></span><h3><em>Learning Using PsyNeuLink Components</em><a class="headerlink" href="#learning-using-psyneulink-components" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="#composition-learning-unsupervised"><span class="std std-ref">Unsupervised Learning</span></a></li>
<li><a class="reference internal" href="#composition-learning-supervised"><span class="std std-ref">Supervised Learning</span></a></li>
</ul>
<p>When learning is <a class="reference internal" href="#composition-learning-standard"><span class="std std-ref">implemented using standard PsyNeuLink Components</span></a>, each calculation
and/or operation involved in learning – including those responsible for computing errors, and for using those to
modify the Projections between Mechanisms, is assigned to a different PsyNeuLink <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning-related Component</span></a>.  These can be used to implement any form of learning.  Learning is generally
considered to fall into two broad classes:  <em>unsupervised</em>, in which associative strenghts are modified
by mere exposure to the inputs, in order to capture structure and/or relationships among them;  and <em>supervised</em>,
which in which the associative strengths are modified so that each input generates a desired output (see
<a class="reference external" href="https://www.geeksforgeeks.org/supervised-unsupervised-learning/">https://www.geeksforgeeks.org/supervised-unsupervised-learning/</a> for a useful summary).  Both forms of
learning can be implemented in a Composition, using <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a> that compute the
changes to make to the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjections</span></a>
being learned, and <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjections</span></a> that apply those changes to the MappingProjections).
In addition, supervised learning uses a <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> to compute the error between the response generated by
the Composition to the input stimulus, and the target stimulus used to designate the desired response.  In most
cases, the LearningMechanisms, LearningProjections and, where needed, ComparatorMechanism are generated automatically,
as described for each form of learning below.  However, these can also be configured manually using their constructors,
or modified by assigning values to their attributes.</p>
<div class="section" id="unsupervised-learning">
<span id="composition-learning-unsupervised"></span><h4>Unsupervised Learning<a class="headerlink" href="#unsupervised-learning" title="Permalink to this headline">¶</a></h4>
<p>Undersupervised learning is implemented using a <a class="reference internal" href="RecurrentTransferMechanism.html"><span class="doc">RecurrentTransferMechanism</span></a>, setting its <strong>enable_learning</strong> argument
to True, and specifying the desired <a class="reference internal" href="LearningFunctions.html"><span class="doc">LearningFunction</span></a> in its <strong>learning_function</strong> argument.  The
default is <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.Hebbian" title="psyneulink.core.components.functions.learningfunctions.Hebbian"><code class="xref any py py-class docutils literal"><span class="pre">Hebbian</span></code></a>, however others can be specified (such as <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.ContrastiveHebbian" title="psyneulink.core.components.functions.learningfunctions.ContrastiveHebbian"><code class="xref any py py-class docutils literal"><span class="pre">ContrastiveHebbian</span></code></a> or <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.Kohonen" title="psyneulink.core.components.functions.learningfunctions.Kohonen"><code class="xref any py py-class docutils literal"><span class="pre">Kohonen</span></code></a>). When a
RecurrentTransferMechanism with learning enabled is added to a Composition, an <a class="reference internal" href="AutoAssociativeLearningMechanism.html"><span class="doc">AutoAssociativeLearningMechanism</span></a> that
that is appropriate for the specified learning_function is automatically constructured and added to the Composition,
as is a <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> from the AutoAssociativeLearningMechanism to the RecurrentTransferMechanism’s
<a class="reference internal" href="RecurrentTransferMechanism.html#psyneulink.library.components.mechanisms.processing.transfer.recurrenttransfermechanism.RecurrentTransferMechanism.recurrent_projection" title="psyneulink.library.components.mechanisms.processing.transfer.recurrenttransfermechanism.RecurrentTransferMechanism.recurrent_projection"><code class="xref any py py-attr docutils literal"><span class="pre">recurrent_projection</span></code></a>.  When the Composition is run and the
RecurrentTransferMechanism is executed, its AutoAssociativeLearningMechanism is also executed, which updates the <a class="reference internal" href="AutoAssociativeProjection.html#psyneulink.library.components.projections.pathway.autoassociativeprojection.AutoAssociativeProjection.matrix" title="psyneulink.library.components.projections.pathway.autoassociativeprojection.AutoAssociativeProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> of its <a class="reference internal" href="RecurrentTransferMechanism.html#psyneulink.library.components.mechanisms.processing.transfer.recurrenttransfermechanism.RecurrentTransferMechanism.recurrent_projection" title="psyneulink.library.components.mechanisms.processing.transfer.recurrenttransfermechanism.RecurrentTransferMechanism.recurrent_projection"><code class="xref any py py-attr docutils literal"><span class="pre">recurrent_projection</span></code></a>
in response to its input.</p>
</div>
<div class="section" id="supervised-learning">
<span id="composition-learning-supervised"></span><h4>Supervised Learning<a class="headerlink" href="#supervised-learning" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">Learning Methods</span></a></li>
<li><a class="reference internal" href="#composition-learning-components"><span class="std std-ref">Learning Components</span></a></li>
<li><a class="reference internal" href="#compositon-learning-execution"><span class="std std-ref">Execution of Learning</span></a></li>
</ul>
<div class="section" id="learning-methods">
<span id="composition-learning-methods"></span><h5><em>Learning Methods</em><a class="headerlink" href="#learning-methods" title="Permalink to this headline">¶</a></h5>
<p>Supervised learning is implemented using a Composition’s method for the desired type of learning.  There are currently
three such methods:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_learning_pathway</span></code></a></li>
<li><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_reinforcement_learning_pathway</span></code></a></li>
<li><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_td_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_td_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_td_learning_pathway</span></code></a></li>
<li><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_backpropagation_learning_pathway</span></code></a>.</li>
</ul>
</div></blockquote>
<p>Each uses the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a> method to create a  <em>learning sequence</em> specified in their
<strong>pathway</strong> argument: a contiguous sequence of <a class="reference internal" href="ProcessingMechanism.html"><span class="doc">ProcessingMechanisms</span></a> and the <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjections</span></a> between them, in which learning modifies the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of the
MappingProjections in the sequence, so that the input to the first ProcessingMechanism in the sequence generates an
output from the last ProcessingMechanism that matches as closely as possible the value specified for the <a class="reference internal" href="Process.html#process-learning-components"><span class="std std-ref">target
mechanism</span></a> in the <strong>inputs</strong> argument of the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> method.
The Mechanisms in the pathway must be compatible with learning (that is, their <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> must
be compatible with the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.function" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> for the MappingProjections
they receive (see <a class="reference internal" href="LearningMechanism.html#learningmechanism-function"><span class="std std-ref">Learning Function</span></a>).  The Composition’s <a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning methods</span></a>
return the set of learning components generates for the pathway, as described below.</p>
</div>
<div class="section" id="learning-components">
<span id="composition-learning-components"></span><h5><em>Learning Components</em><a class="headerlink" href="#learning-components" title="Permalink to this headline">¶</a></h5>
<p>For each learning sequence specified in a <a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning method</span></a>, it creates the
following Components, and assigns to them the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a> indicated:</p>
<blockquote>
<div><ul class="simple">
<li><em>COMPARATOR_MECHANISM</em> <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> – used to <a class="reference internal" href="ComparatorMechanism.html#comparatormechanism-function"><span class="std std-ref">calculate an error signal</span></a> for the sequence by comparing the value received by the ComparatorMechanism’s
<em>SAMPLE</em> <a class="reference internal" href="ComparatorMechanism.html#comparatormechanism-structure"><span class="std std-ref">InputState</span></a> (from the <a class="reference internal" href="LearningMechanism.html#learningmechanism-activation-output"><span class="std std-ref">output</span></a> of
the last Processing Mechanism in the learning sequence) with the value received in the <em>COMPARATOR_MECHANISM</em>’s
<em>TARGET</em> <a class="reference internal" href="ComparatorMechanism.html#comparatormechanism-structure"><span class="std std-ref">InputState</span></a> (from the <em>TARGET_MECHANISM</em> generated by the method –
see below); this is assigned the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.LEARNING" title="psyneulink.core.globals.utilities.NodeRole.LEARNING"><code class="xref any py py-attr docutils literal"><span class="pre">LEARNING</span></code></a> in the Composition.</li>
</ul>
<ul class="simple">
<li><em>TARGET_MECHANISM</em> – receives the value to be used by the <em>COMPARATOR_MECHANISM</em> as the target in
computing the error signal (see above);  that value must be specified in the <strong>inputs</strong> argument of the
Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a> method (as the input to the <em>TARGET_MECHANISM</em>; this is assigned the
<a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a> <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.TARGET" title="psyneulink.core.globals.utilities.NodeRole.TARGET"><code class="xref any py py-attr docutils literal"><span class="pre">TARGET</span></code></a> and <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.LEARNING" title="psyneulink.core.globals.utilities.NodeRole.LEARNING"><code class="xref any py py-attr docutils literal"><span class="pre">LEARNING</span></code></a> in the Composition;</li>
</ul>
<ul class="simple">
<li>a MappingProjection that projects from the last ProcessingMechanism in the learning sequence to the <em>SAMPLE</em>
<a class="reference internal" href="ComparatorMechanism.html#comparatormechanism-structure"><span class="std std-ref">InputState</span></a> of the <em>COMPARATOR_MECHANISM</em>;</li>
</ul>
<ul class="simple">
<li>a MappingProjection that projects from the <em>TARGET_MECHANISM</em> to the <em>TARGET</em> <a class="reference internal" href="ComparatorMechanism.html#comparatormechanism-structure"><span class="std std-ref">InputState</span></a> of the <em>COMPARATOR_MECHANISM</em>;</li>
</ul>
<ul class="simple">
<li>a <em>LEARNING_MECHANISM</em> for each MappingProjection in the sequence, each of which calculates the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_signal" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_signal"><code class="xref any py py-attr docutils literal"><span class="pre">learning_signal</span></code></a> used to modify the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter for the
coresponding MappingProjection, along with a <a class="reference internal" href="LearningSignal.html"><span class="doc">LearningSignal</span></a> and <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> that convey the
<a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_signal" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_signal"><code class="xref any py py-attr docutils literal"><span class="pre">learning_signal</span></code></a> to the MappingProjection’s <em>MATRIX</em> <a class="reference internal" href="MappingProjection.html#mapping-matrix-parameterstate"><span class="std std-ref">ParameterState</span></a>;  depending on learning method, additional MappingProjections may be created to
and/or from the LearningMechanism – see <a class="reference internal" href="LearningMechanism.html#learningmechanism-learning-configurations"><span class="std std-ref">Learning Configurations</span></a> for details);
these are assigned the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.LEARNING" title="psyneulink.core.globals.utilities.NodeRole.LEARNING"><code class="xref any py py-attr docutils literal"><span class="pre">LEARNING</span></code></a> in the Composition.</li>
</ul>
</div></blockquote>
<p>The items with names in the list above are returned by the learning method in a dictionary, in which each name is the
key of an entry, and the object(s) created of that type are its value.  See <a class="reference internal" href="LearningMechanism.html#learningmechanism-single-layer-learning"><span class="std std-ref">Single layer learning</span></a>
for a more detailed description and figure showing these Components.</p>
<p>If the learning sequence involves more than two ProcessingMechanisms (e.g. using <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_backpropagation_learning_pathway</span></code></a>
for a multilayered neural network), then additional LearningMechanisms are created, along with MappingProjections
that provides them with the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.error_signal" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.error_signal"><code class="xref any py py-attr docutils literal"><span class="pre">error_signal</span></code></a> from the preceding LearningMechanism,
and <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjections</span></a> that modify the additional MappingProjections (<em>LEARNED_PROJECTION</em>s)
in the sequence, as shown for an example in the figure below.  These additional learning components are listed in the
<em>LEARNING_MECHANISM</em> and <em>LEARNED_PROJECTION</em> entries of the dictionary returned by the learning method.</p>
<p id="composition-multilayerlearning-figure"><strong>Learning Components</strong></p>
<div class="figure" id="id10">
<a class="reference internal image-reference" href="_images/Composition_Multilayer_Learning_fig.svg"><img alt="Schematic of LearningMechanism and LearningProjections in a Process" src="_images/Composition_Multilayer_Learning_fig.svg" /></a>
<p class="caption"><span class="caption-text">Components for sequence of three Mechanisms generated by a call to a learning method (e.g.,
<code class="docutils literal"><span class="pre">add_backpropagation_learning_pathway(pathway=[A,B,C])</span></code>), with <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> assigned to each node in the
Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.graph" title="psyneulink.core.compositions.composition.Composition.graph"><code class="xref any py py-attr docutils literal"><span class="pre">graph</span></code></a> (in italics below Mechanism type) and the names of the learning
components (capitalized in italics) returned by the learning method.</span></p>
</div>
<p id="composition-xor-example">The following example implements a simple three-layered network that learns the XOR function
(see <a class="reference internal" href="#composition-learning-output-vs-terminal-figure"><span class="std std-ref">figure</span></a> below):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Construct Composition:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">input</span> <span class="o">=</span> <span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Input&#39;</span><span class="p">,</span> <span class="n">default_variable</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">hidden</span> <span class="o">=</span> <span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Hidden&#39;</span><span class="p">,</span> <span class="n">default_variable</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">function</span><span class="o">=</span><span class="n">Logistic</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">output</span> <span class="o">=</span> <span class="n">TransferMechanism</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Output&#39;</span><span class="p">,</span> <span class="n">default_variable</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">function</span><span class="o">=</span><span class="n">Logistic</span><span class="p">())</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">input_weights</span> <span class="o">=</span> <span class="n">MappingProjection</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Input Weights&#39;</span><span class="p">,</span> <span class="n">matrix</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">output_weights</span> <span class="o">=</span> <span class="n">MappingProjection</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Output Weights&#39;</span><span class="p">,</span> <span class="n">matrix</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">xor_comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span><span class="s1">&#39;XOR Composition&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">learning_components</span> <span class="o">=</span> <span class="n">xor_comp</span><span class="o">.</span><span class="n">add_backpropagation_learning_pathway</span><span class="p">(</span>
<span class="o">&gt;&gt;&gt;</span>                       <span class="n">pathway</span><span class="o">=</span><span class="p">[</span><span class="nb">input</span><span class="p">,</span> <span class="n">input_weights</span><span class="p">,</span> <span class="n">hidden</span><span class="p">,</span> <span class="n">output_weights</span><span class="p">,</span> <span class="n">output</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">target</span> <span class="o">=</span> <span class="n">learning_components</span><span class="p">[</span><span class="n">TARGET_MECHANISM</span><span class="p">]</span>

<span class="c1"># Create inputs:            Trial 1  Trial 2  Trial 3  Trial 4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">xor_inputs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;stimuli&#39;</span><span class="p">:[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>  <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
<span class="o">&gt;&gt;&gt;</span>               <span class="s1">&#39;targets&#39;</span><span class="p">:[</span>  <span class="p">[</span><span class="mi">0</span><span class="p">],</span>     <span class="p">[</span><span class="mi">1</span><span class="p">],</span>     <span class="p">[</span><span class="mi">1</span><span class="p">],</span>     <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">xor_comp</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="nb">input</span><span class="p">:</span><span class="n">xor_inputs</span><span class="p">[</span><span class="s1">&#39;stimuli&#39;</span><span class="p">],</span>
<span class="o">&gt;&gt;&gt;</span>                      <span class="n">target</span><span class="p">:</span><span class="n">xor_inputs</span><span class="p">[</span><span class="s1">&#39;targets&#39;</span><span class="p">]},</span>
<span class="o">&gt;&gt;&gt;</span>              <span class="n">num_trials</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="o">&gt;&gt;&gt;</span>              <span class="n">animate</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;show_learning&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">})</span>
</pre></div>
</div>
<p>The description and example above pertain to simple linear sequences.  However, more complex configurations,
with convergent, divergent and/or intersecting sequences can be built using multiple calls to the learning method
(see <a class="reference internal" href="BasicsAndSampler.html#basicsandsampler-rumelhart-model"><span class="std std-ref">example</span></a> in <a class="reference internal" href="BasicsAndSampler.html"><span class="doc">Basics and Sampler</span></a>).  In each call, the learning method determines
how the sequence to be added relates to any existing ones with which it abuts or intersects, and automatically creates
andconfigures the relevant learning components so that the error terms are properly computed and propagated by each
LearningMechanism to the next in the configuration. It is important to note that, in doing so, the status of a
Mechanism in the final configuration takes precedence over its status in any of the individual sequences specified
in the <a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning methods</span></a> when building the Composition.  In particular,
whereas ordinarily the last ProcessingMechanism of a sequence specified in a learning method projects to a
<em>COMPARATOR_MECHANISM</em>, this may be superceded if multiple sequences are created. This is the case if: i) the
Mechanism is in a seqence that is contiguous (i.e., abuts or intersects) with others already in the Composition,
ii) the Mechanism appears in any of those other sequences and, iii) it is not the last Mechanism in <em>all</em> of them;
in that in that case, it will not project to a <em>COMPARATOR_MECHANISM</em> (see <a class="reference internal" href="#composition-learning-output-vs-terminal-figure"><span class="std std-ref">figure below</span></a> for an example).  Furthermore, if it <em>is</em> the last Mechanism in all of
them (that is, all of the specified pathways converge on that Mechanism), only one <em>COMPARATOR_MECHANISM</em> is created
for that Mechanism (i.e., not one for each sequence).  Finally, it should be noted that, by default, learning components
are <em>not</em> assigned the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> of <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.OUTPUT" title="psyneulink.core.globals.utilities.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> even though they may be the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.TERMINAL" title="psyneulink.core.globals.utilities.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> Mechanism of a Composition;
conversely, even though the last Mechanism of a learning sequence projects to a <em>COMPARATOR_MECHANISM</em>, and thus is not
the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.TERMINAL" title="psyneulink.core.globals.utilities.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> node of a Composition, if it does not project to any other Mechanisms in the Composition it is
nevertheless assigned as an <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.OUTPUT" title="psyneulink.core.globals.utilities.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> of the Composition.  That is, Mechanisms that would otherwise have been the
<a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.TERMINAL" title="psyneulink.core.globals.utilities.NodeRole.TERMINAL"><code class="xref any py py-attr docutils literal"><span class="pre">TERMINAL</span></code></a> Mechanism of a Composition preserve their role as an <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.OUTPUT" title="psyneulink.core.globals.utilities.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> of the Composition if they are part of a
learning sequence even though they project to another Mechanism (the <em>COMPARATOR_MECHANISM</em>) in the Composition.</p>
<blockquote id="composition-learning-output-vs-terminal-figure">
<div><p><strong>OUTPUT</strong> vs. <strong>TERMINAL</strong> Roles in Learning Configuration</p>
<div class="figure" id="id11">
<a class="reference internal image-reference" href="_images/Composition_Learning_OUTPUT_vs_TERMINAL_fig.svg"><img alt="Schematic of Mechanisms and Projections involved in learning" src="_images/Composition_Learning_OUTPUT_vs_TERMINAL_fig.svg" /></a>
<p class="caption"><span class="caption-text">Configuration of Components generated by the creation of two intersecting learning sequences
(e.g., <code class="docutils literal"><span class="pre">add_backpropagation_learning_pathway(pathway=[A,B])</span></code> and
<code class="docutils literal"><span class="pre">add_backpropagation_learning_pathway(pathway=[D,B,C])</span></code>).  Mechanism B is the last Mechanism of the
sequence specified for the first pathway, and so would project to a <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a>, and would be
assigned as an <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.OUTPUT" title="psyneulink.core.globals.utilities.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> node of the Composition, if that pathway was created on its own.  However,
since Mechanims B is also in the middle of the sequence specified for the second pathway, it does not
project to a ComparatorMechanism, and is relegated to being an <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.INTERNAL" title="psyneulink.core.globals.utilities.NodeRole.INTERNAL"><code class="xref any py py-attr docutils literal"><span class="pre">INTERNAL</span></code></a> node of the Composition
Mechanism C is now the one that projects to the ComparatorMechanism and assigned as the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.OUTPUT" title="psyneulink.core.globals.utilities.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> node.</span></p>
</div>
</div></blockquote>
</div>
<div class="section" id="execution-of-learning">
<span id="compositon-learning-execution"></span><h5><em>Execution of Learning</em><a class="headerlink" href="#execution-of-learning" title="Permalink to this headline">¶</a></h5>
<p>When a Composition is run that contains one or more learning sequences, all of the ProcessingMechanisms for a
sequence are executed first, and then its LearningComponents. This is shown in an animation of the XOR network
from the <a class="reference internal" href="#composition-xor-example"><span class="std std-ref">example above</span></a>:</p>
<blockquote id="composition-learning-animation-figure">
<div><p><strong>Composition with Learning</strong></p>
<div class="figure" id="id12">
<a class="reference internal image-reference" href="_images/Composition_XOR_animation.gif"><img alt="Animation of Composition with learning" src="_images/Composition_XOR_animation.gif" style="width: 397.0px; height: 406.0px;" /></a>
<p class="caption"><span class="caption-text">Animation of XOR Composition in example above when it is executed by calling its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a>
method with the argument <code class="docutils literal"><span class="pre">animate={'show_learning':True}</span></code>.</span></p>
</div>
</div></blockquote>
<p>Note that, since the <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a> are not executed until after the
processing components, the change to the weights of the MappingProjections in the processing pathway are not
made until after it has executed.  Thus, as with <a class="reference internal" href="Projection.html#projection-execution"><span class="std std-ref">execution of a Projection</span></a>, those
changes will not be observed in the values of their <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameters until after
they are next executed (see <span class="xref std std-ref">Lazy Evaluation</span> for an explanation of “lazy” updating).</p>
</div>
</div>
</div>
<div class="section" id="learning-using-autodiffcompositon">
<span id="composition-learning-autodiffcomposition"></span><h3><em>Learning Using AutodiffCompositon</em><a class="headerlink" href="#learning-using-autodiffcompositon" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="AutodiffComposition.html"><span class="doc">AutodiffComposition</span></a> can be used to implement a Composition in PsyNeuLink, which is then executed using <a class="reference external" href="https://pytorch.org">PyTorch</a> (see <a class="reference internal" href="BasicsAndSampler.html#basicsandsampler-rumelhart-model"><span class="std std-ref">example</span></a> in <a class="reference internal" href="BasicsAndSampler.html"><span class="doc">Basics and Sampler</span></a>).  The
AutodiffComposition constructor provides arguments for configuring the PyTorch implementation in various ways; the
Composition is then built using the same methods (e.g., <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_node" title="psyneulink.core.compositions.composition.Composition.add_node"><code class="xref any py py-meth docutils literal"><span class="pre">add_node</span></code></a>, <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_projection" title="psyneulink.core.compositions.composition.Composition.add_projection"><code class="xref any py py-meth docutils literal"><span class="pre">add_projection</span></code></a>, <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a>,
etc.) as any other Composition, and it is executed using its <code class="xref any docutils literal"><span class="pre">run</span></code> method.   Note that
there is no need to use any <a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning methods</span></a> — the Composition is translated into
PyTorch objects and functions, which are called when it is run.  It can be run in training mode (during which
learning occurs) or test mode (which runs the Composition without learning).</p>
<p>The advantage of this approach is that it allows the Composition to be implemented in PsyNeuLink, while exploiting
the efficiency of execution in PyTorch (which can yield as much as three orders of magnitude improvement).  However,
a disadvantage is that there are restrictions on the kinds of Compositions that be implemented in this way.
First, because it relies on PyTorch, it is best suited for use with <a class="reference internal" href="#composition-learning-supervised"><span class="std std-ref">supervised
learning</span></a>, although it can be used for some forms of <a class="reference internal" href="#composition-learning-unsupervised"><span class="std std-ref">unsupervised learning</span></a> that are supported in PyTorch (e.g., <a class="reference external" href="https://github.com/giannisnik/som">self-organized maps</a>).  Second, all of the Components in the Composition are be subject to and must
be with compatible with learning.   This means that it cannot be used with a Composition that contains any
<a class="reference internal" href="ModulatorySignal.html#modulatorysignal-anatomy-figure"><span class="std std-ref">modulatory components</span></a> or that are subject to modulation, whether by
ModulatoryMechanisms within or outside the Composition;  this includes a <a class="reference internal" href="#composition-controller"><span class="std std-ref">controller</span></a>
or any LearningMechanisms.  An AutodiffComposition can be <a class="reference internal" href="#composition-nested"><span class="std std-ref">nested in a Composition</span></a>
that has such other Components.  During learning, none of the internal Components of the AutodiffComposition (e.g.,
intermediate layers of a neural network model) are accessible to the other Components of the outer Composition,
(e.g., as sources of information, or for modulation).  However, when learning turned off, then the  AutodiffComposition
functions like any other, and all of its internal  Components accessible to other Components of the outer Composition.
Thus, as long as access to its internal Components is not needed during learning, an <a class="reference internal" href="AutodiffComposition.html"><span class="doc">AutodiffComposition</span></a> can be
trained, and then used to execute the trained Composition like any other.</p>
</div>
<div class="section" id="learning-using-userdefinedfunctions">
<span id="composition-learning-udf"></span><h3><em>Learning Using UserDefinedFunctions</em><a class="headerlink" href="#learning-using-userdefinedfunctions" title="Permalink to this headline">¶</a></h3>
<p>If execution efficiency is critical and the <a class="reference internal" href="AutodiffComposition.html"><span class="doc">AutodiffComposition</span></a> is too restrictive, a function from any Python
environment that supports learning can be assigned as the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> of a <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a>,
in which case it is automatically  wrapped as <a class="reference internal" href="UserDefinedFunction.html"><span class="doc">UserDefinedFunction</span></a>.  For example, the <a class="reference external" href="https://pytorch.org/docs/master/notes/extending.html">forward and backward methods</a> of a PyTorch object can be assigned in this way.  The
advanatage of this approach is that it can be applied to any Python function that adheres to the requirements of a
<a class="reference internal" href="UserDefinedFunction.html"><span class="doc">UserDefinedFunction</span></a>.  The disadvantage is that it can’t be <code class="xref any docutils literal"><span class="pre">compiled</span></code>, so efficiency may be compromised.  It must
also be carefully coordinated with the execution of other learning-related Components in the Composition, to insure
that each function is called at the appropriate times during execution.  Furthermore, as with an <a class="reference internal" href="AutodiffComposition.html"><span class="doc">AutodiffComposition</span></a>,
the internal constituents of the object (e.g., intermediates layers of a neural network model) are not accessible to
other Components in the Composition (e.g., as a source of information or for modulation).</p>
</div>
</div>
<div class="section" id="visualizing-a-composition">
<span id="composition-visualization"></span><h2>Visualizing a Composition<a class="headerlink" href="#visualizing-a-composition" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> method generates a display of the graph structure of Nodes (Mechanisms and
Nested Compositions) and Projections in the Composition (based on the Composition’s <code class="xref any docutils literal"><span class="pre">processing</span> <span class="pre">graph</span></code>).</p>
<p>By default, Nodes are shown as ovals labeled by their <code class="xref any docutils literal"><span class="pre">names</span></code>, with the Composition’s <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.INPUT" title="psyneulink.core.globals.utilities.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Mechanisms shown in green, its <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.OUTPUT" title="psyneulink.core.globals.utilities.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Mechanisms shown in red, and Projections
shown as unlabeled arrows, as illustrated for the Composition in the example below:</p>
<table border="1" class="docutils" id="system-show-graph-basic-figure">
<colgroup>
<col width="58%" />
<col width="42%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">psyneulink</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span>
<span class="go">              name=&#39;A&#39;,</span>
<span class="gp">... </span>          <span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>          <span class="n">output_states</span><span class="o">=</span><span class="p">[</span><span class="n">RESULTS</span><span class="p">,</span> <span class="n">OUTPUT_MEAN</span><span class="p">]</span>
<span class="gp">... </span>          <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span>
<span class="gp">... </span>          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">,</span>
<span class="gp">... </span>          <span class="n">size</span><span class="o">=</span><span class="mi">5</span>
<span class="gp">... </span>          <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">ProcessingMechanism</span><span class="p">(</span>
<span class="gp">... </span>          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span>
<span class="gp">... </span>          <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>          <span class="n">function</span><span class="o">=</span><span class="n">Logistic</span><span class="p">(</span><span class="n">gain</span><span class="o">=</span><span class="n">pnl</span><span class="o">.</span><span class="n">CONTROL</span><span class="p">)</span>
<span class="gp">... </span>          <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">Composition</span><span class="p">(</span>
<span class="gp">... </span>          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Comp&#39;</span><span class="p">,</span>
<span class="gp">... </span>          <span class="n">enable_controller</span><span class="o">=</span><span class="kc">True</span>
<span class="gp">... </span>          <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">c</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_linear_processing_pathway</span><span class="p">([</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ctlr</span> <span class="o">=</span> <span class="n">OptimizationControlMechanism</span><span class="p">(</span>
<span class="gp">... </span>           <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Controller&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">monitor_for_control</span><span class="o">=</span><span class="p">[(</span><span class="n">pnl</span><span class="o">.</span><span class="n">OUTPUT_MEAN</span><span class="p">,</span> <span class="n">a</span><span class="p">)],</span>
<span class="gp">... </span>           <span class="n">function</span><span class="o">=</span><span class="n">GridSearch</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">control_signals</span><span class="o">=</span><span class="p">(</span><span class="n">GAIN</span><span class="p">,</span> <span class="n">c</span><span class="p">),</span>
<span class="gp">... </span>           <span class="n">agent_rep</span><span class="o">=</span><span class="n">comp</span>
<span class="gp">... </span>           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">add_controller</span><span class="p">(</span><span class="n">ctlr</span><span class="p">)</span>
</pre></div>
</div>
</td>
<td><div class="first last figure">
<img alt="_images/show_graph_basic.svg" src="_images/show_graph_basic.svg" /></div>
</td>
</tr>
</tbody>
</table>
<p>Note that the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> is not shown by default.  However this
can be shown, along with other information, using options in the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a>
method.  The figure below shows several examples.</p>
<p id="system-show-graph-figure"><strong>Output of show_graph using different options</strong></p>
<div class="figure" id="id13">
<a class="reference internal image-reference" href="_images/show_graph_figure.svg"><img alt="Composition graph examples" src="_images/show_graph_figure.svg" /></a>
<p class="caption"><span class="caption-text">Displays of the Composition used in the <a class="reference internal" href="#system-show-graph-basic-figure"><span class="std std-ref">example above</span></a>, generated using various
options of its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> method. <strong>Panel A</strong> shows the graph with its Projections labeled
and Component dimensions displayed.  <strong>Panel B</strong> shows the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> for the
Composition and its associated <a class="reference internal" href="ObjectiveMechanism.html"><span class="doc">ObjectiveMechanism</span></a> using the <strong>show_controller</strong> option (controller-related
Components are displayed in blue by default).  <strong>Panel C</strong> adds the Composition’s <a class="reference internal" href="CompositionInterfaceMechanism.html"><span class="doc">CompositionInterfaceMechanisms</span></a> using the <strong>show_cim</strong> option. <strong>Panel D</strong> shows a detailed view of the Mechanisms
using the <strong>show_node_structure</strong> option, that includes their <a class="reference internal" href="State.html"><span class="doc">States</span></a> and their <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">roles</span></code></a> in the
Composition. <strong>Panel E</strong> show an even more detailed view using <strong>show_node_structure</strong> as well as <strong>show_cim</strong>.</span></p>
</div>
<p>If a Composition has one ore more Compositions nested as Nodes within it, then these can be shown using the
<strong>show_nested</strong> option. For example, if two Compositions identical to <strong>comp</strong> in the <a class="reference internal" href="#system-show-graph-basic-figure"><span class="std std-ref">example above</span></a> are added as the nodes of the linear processing pathway of a third* <strong>comp</strong> <a href="#id2"><span class="problematic" id="id3">*</span></a>,
these can be shown as follows:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">show_graph</span><span class="p">()</span>
</pre></div>
</div>
</td>
<td><div class="first last figure">
<img alt="_images/nested.svg" src="_images/nested.svg" /></div>
</td>
</tr>
<tr class="row-even"><td><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">show_graph</span><span class="p">(</span><span class="n">show_nested</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</td>
<td><div class="first last figure">
<img alt="_images/show_nested.svg" src="_images/show_nested.svg" /></div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="class-reference">
<span id="composition-class-reference"></span><h2>Class Reference<a class="headerlink" href="#class-reference" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="psyneulink.core.compositions.composition.Composition">
<em class="property">class </em><code class="descclassname">psyneulink.core.compositions.composition.</code><code class="descname">Composition</code><span class="sig-paren">(</span><em>name=None</em>, <em>controller: psyneulink.core.components.mechanisms.adaptive.modulatorymechanism.ModulatoryMechanism = None</em>, <em>enable_controller=None</em>, <em>controller_mode: &lt;typecheck.tc_predicates.enum object at 0x112cfd358&gt; = 'after'</em>, <em>controller_condition: psyneulink.core.scheduling.condition.Condition = &lt;psyneulink.core.scheduling.condition.Always object&gt;</em>, <em>enable_learning=False</em>, <em>retain_old_simulation_data=None</em>, <em>**param_defaults</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>str</em>) – </li>
<li><strong>controller</strong> (<code class="xref any docutils literal"><span class="pre">OptimizationControlmechanism</span></code> : default None) – specifies the <a class="reference internal" href="OptimizationControlMechanism.html"><span class="doc">OptimizationControlMechanism</span></a> to use as the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> (see <a class="reference internal" href="#composition-controller"><span class="std std-ref">Controlling a Composition</span></a> for details).</li>
<li><strong>enable_controller</strong> (<em>bool : default None</em>) – specifies whether the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> is executed when the
Composition is executed.  Set to True by default if <strong>controller</strong> specified;  if set to False,
the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> is ignored when the Composition is executed.</li>
<li><strong>controller_mode</strong> (<em>Enum</em><em>[</em><em>BEOFRE|AFTER</em><em>] </em><em>: default AFTER</em>) – specifies whether the controller is executed before or after the rest of the Composition
in each trial.  Must be either the keyword <em>BEFORE</em> or <em>AFTER</em>.</li>
<li><strong>controller_condition</strong> (<em>Condition : default Always</em>) – specifies when the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> is executed in a trial.</li>
<li><strong>enable_learning</strong> (<em>bool : default True</em>) – specifies whether <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a> in the Composition are executed when it is
executed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.graph">
<code class="descname">graph</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.graph" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref any docutils literal"><span class="pre">Graph</span></code> – the full <code class="xref any docutils literal"><span class="pre">Graph</span></code> associated with this Composition. Contains both Nodes (<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> or
<a class="reference internal" href="#"><span class="doc">Compositions</span></a>) and <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a></p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.nodes">
<code class="descname">nodes</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.nodes" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref any docutils literal"><span class="pre">list[Mechanisms</span> <span class="pre">and</span> <span class="pre">Compositions]</span></code> – a list of all Nodes (<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> and/or <a class="reference internal" href="#"><span class="doc">Compositions</span></a>) contained in
this Composition</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.input_CIM">
<code class="descname">input_CIM</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.input_CIM" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="CompositionInterfaceMechanism.html"><span class="doc">CompositionInterfaceMechanism</span></a> – aggregates input values for the INPUT nodes of the Composition. If the Composition is nested, then the
input_CIM and its InputStates serve as proxies for the Composition itself in terms of afferent projections.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.input_CIM_states">
<code class="descname">input_CIM_states</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.input_CIM_states" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em> – a dictionary in which keys are InputStates of INPUT Nodes in a composition, and values are lists
containing two items: the corresponding InputState and OutputState on the input_CIM.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.afferents">
<code class="descname">afferents</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.afferents" title="Permalink to this definition">¶</a></dt>
<dd><p><em>ContentAddressableList</em> – a list of all of the <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> to the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.input_CIM" title="psyneulink.core.compositions.composition.Composition.input_CIM"><code class="xref any py py-attr docutils literal"><span class="pre">input_CIM</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.output_CIM">
<code class="descname">output_CIM</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.output_CIM" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="CompositionInterfaceMechanism.html"><span class="doc">CompositionInterfaceMechanism</span></a> – aggregates output values from the OUTPUT nodes of the Composition. If the Composition is nested, then the
output_CIM and its OutputStates serve as proxies for Composition itself in terms of efferent projections.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.output_CIM_states">
<code class="descname">output_CIM_states</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.output_CIM_states" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em> – a dictionary in which keys are OutputStates of OUTPUT Nodes in a composition, and values are lists
containing two items: the corresponding InputState and OutputState on the input_CIM.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.efferents">
<code class="descname">efferents</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.efferents" title="Permalink to this definition">¶</a></dt>
<dd><p><em>ContentAddressableList</em> – a list of all of the <a class="reference internal" href="Projection.html"><span class="doc">Projections</span></a> from the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.output_CIM" title="psyneulink.core.compositions.composition.Composition.output_CIM"><code class="xref any py py-attr docutils literal"><span class="pre">output_CIM</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.env">
<code class="descname">env</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.env" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Gym Forager Environment : default: None</em> – stores a Gym Forager Environment so that the Composition may interact with this environment within a
single call to <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.shadows">
<code class="descname">shadows</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.shadows" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em> – a dictionary in which the keys are all in the Composition and the values are lists of any Nodes that
<a class="reference internal" href="InputState.html#inputstate-shadow-inputs"><span class="std std-ref">shadow</span></a> the original Node’s input.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.controller">
<code class="descname">controller</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.controller" title="Permalink to this definition">¶</a></dt>
<dd><p><em>OptimizationControlMechanism</em> – identifies the <a class="reference internal" href="OptimizationControlMechanism.html"><span class="doc">OptimizationControlMechanism</span></a> used as the Composition’s controller
(see <a class="reference internal" href="#composition-controller"><span class="std std-ref">Controlling a Composition</span></a> for details).</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.enable_controller">
<code class="descname">enable_controller</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.enable_controller" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em> – determines whether the Composition’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> is executed in each trial
(see controller_mode &lt;Composition.controller_mode&gt;` for timing of execution).  Set to True by default
if <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> is specified.  Setting it to False suppresses exectuion of the
<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.controller_mode">
<code class="descname">controller_mode</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.controller_mode" title="Permalink to this definition">¶</a></dt>
<dd><p><em>BEFORE or AFTER</em> – determines whether the controller is executed before or after the rest of the <a class="reference internal" href="#"><span class="doc">Composition</span></a>
is executed on each trial.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.controller_condition">
<code class="descname">controller_condition</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.controller_condition" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Condition</em> – specifies whether the controller is executed in a given trial.  The default is <a class="reference internal" href="Condition.html#psyneulink.core.scheduling.condition.Always" title="psyneulink.core.scheduling.condition.Always"><code class="xref any py py-class docutils literal"><span class="pre">Always</span></code></a>, which
executes the controller on every trial.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.default_execution_id">
<code class="descname">default_execution_id</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.default_execution_id" title="Permalink to this definition">¶</a></dt>
<dd><p>if no <em>context</em> is specified in a call to run, this <em>context</em> is used;  by default,
it is the Composition’s <code class="xref any docutils literal"><span class="pre">name</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.execution_ids">
<code class="descname">execution_ids</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.execution_ids" title="Permalink to this definition">¶</a></dt>
<dd><p><em>set</em> – stores all execution_ids used by this Composition.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.enable_learning">
<code class="descname">enable_learning</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.enable_learning" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool : default True</em> – determines whether <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a> in the Composition are executed when it is
executed.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.learning_components">
<code class="descname">learning_components</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.learning_components" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – contains the learning-related components in the Composition, all or many of which may have been
created automatically in a call to one of its <code class="xref any docutils literal"><span class="pre">add_&lt;*learning_type*&gt;_pathway'</span> <span class="pre">methods</span> <span class="pre">(see</span>
<span class="pre">`Composition_Learning</span></code> for details).  This does <em>not</em> contain the <a class="reference internal" href="ProcessingMechanism.html"><span class="doc">ProcessingMechanisms</span></a> or <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjections</span></a> in the pathway(s) being learned;
those are contained in <code class="xref any docutils literal"><span class="pre">learning_pathways</span></code> attribute.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.learned_components">
<code class="descname">learned_components</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.learned_components" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list[list]</em> – contains a list of the components subject to learning in the Composition (<a class="reference internal" href="ProcessingMechanism.html"><span class="doc">ProcessingMechanisms</span></a> and <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjections</span></a>);  this does <em>not</em> contain the
components used for learning; those are contained in <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.learning_components" title="psyneulink.core.compositions.composition.Composition.learning_components"><code class="xref any py py-attr docutils literal"><span class="pre">learning_components</span></code></a> attribute.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.results">
<code class="descname">results</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.results" title="Permalink to this definition">¶</a></dt>
<dd><p><em>3d array</em> – stores the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.output_values" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.output_values"><code class="xref any py py-attr docutils literal"><span class="pre">output_values</span></code></a> of the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.OUTPUT" title="psyneulink.core.globals.utilities.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Mechanisms in the Composition for
every <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> executed in a call to <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.run" title="psyneulink.core.compositions.composition.Composition.run"><code class="xref any py py-meth docutils literal"><span class="pre">run</span></code></a>.  Each item in the outermost
dimension (axis 0) of the array corresponds to a trial; each item within a trial corresponds to the
<a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.output_values" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.output_values"><code class="xref any py py-attr docutils literal"><span class="pre">output_values</span></code></a> of an <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.OUTPUT" title="psyneulink.core.globals.utilities.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Mechanism.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.simulation_results">
<code class="descname">simulation_results</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.simulation_results" title="Permalink to this definition">¶</a></dt>
<dd><p><em>3d array</em> – stores the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.results" title="psyneulink.core.compositions.composition.Composition.results"><code class="xref any py py-attr docutils literal"><span class="pre">results</span></code></a> for executions of the Composition when it is executed using
its <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.evaluate" title="psyneulink.core.compositions.composition.Composition.evaluate"><code class="xref any py py-meth docutils literal"><span class="pre">evaluate</span></code></a> method.</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.retain_old_simulation_data">
<code class="descname">retain_old_simulation_data</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.retain_old_simulation_data" title="Permalink to this definition">¶</a></dt>
<dd><p><em>bool</em> – if True, all Parameter values generated during simulations will be saved for later inspection;
if False, simulation values will be deleted unless otherwise specified by individual Parameters</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway">
<code class="descname">add_backpropagation_learning_pathway</code><span class="sig-paren">(</span><em>pathway</em>, <em>learning_rate=0.05</em>, <em>error_function=None</em>, <em>learning_update: &lt;typecheck.framework.optional object at 0x112d03438&gt; = 'after'</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_backpropagation_learning_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method that calls <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_learning_pathway</span></code></a> with <a href="#id4"><span class="problematic" id="id5">**</span></a>learning_function**=`Backpropagation`</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pathway</strong> (<em>List</em>) – specifies list of nodes for the pathway (see <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a> for details of specification).</li>
<li><strong>pathway</strong> – specifies nodes of the pathway for the learning sequence  (see <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a> for
details of specification).  Any <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjections</span></a> specified or constructed for the
pathway are assigned as <a class="reference internal" href="AutoAssociativeLearningMechanism.html#psyneulink.library.components.mechanisms.adaptive.learning.autoassociativelearningmechanism.AutoAssociativeLearningMechanism.learned_projections" title="psyneulink.library.components.mechanisms.adaptive.learning.autoassociativelearningmechanism.AutoAssociativeLearningMechanism.learned_projections"><code class="xref any py py-attr docutils literal"><span class="pre">learned_projections</span></code></a>.</li>
<li><strong>learning_rate</strong> (<em>float : default 0.05</em>) – specifies the <code class="xref any docutils literal"><span class="pre">learning_rate</span></code> used for the <code class="xref any docutils literal"><span class="pre">Backpropagation</span></code> function of
the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a> in the <strong>pathway</strong>.</li>
<li><strong>error_function</strong> (<em>function : default LinearCombination</em>) – specifies the function assigned to <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> used to compute the error from the target and the
output (<a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a>) of the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.TARGET" title="psyneulink.core.globals.utilities.NodeRole.TARGET"><code class="xref any py py-attr docutils literal"><span class="pre">TARGET</span></code></a> (last) Mechanism in the <strong>pathway</strong>).</li>
<li><strong>learning_update</strong> (<em>Optional</em><em>[</em><em>bool|ONLINE|AFTER</em><em>] </em><em>: default AFTER</em>) – specifies when the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameters of the <a class="reference internal" href="AutoAssociativeLearningMechanism.html#psyneulink.library.components.mechanisms.adaptive.learning.autoassociativelearningmechanism.AutoAssociativeLearningMechanism.learned_projections" title="psyneulink.library.components.mechanisms.adaptive.learning.autoassociativelearningmechanism.AutoAssociativeLearningMechanism.learned_projections"><code class="xref any py py-attr docutils literal"><span class="pre">learned_projections</span></code></a> are updated
in each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> when the Composition executes;  it is assigned as the default value for the
<a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> attribute of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a> in the pathway, and their <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjections</span></a>
(see <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> for meaning of values).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>A dictionary of components that were automatically generated and added to the Composition in order to</em></li>
<li><em>implement Backpropagation along the pathway.</em></li>
<li><strong>{LEARNING_MECHANISM</strong> (<em>learning_mechanism,</em>) – COMPARATOR_MECHANISM: comparator,
TARGET_MECHANISM: target,
LEARNED_PROJECTION: learned_projection}</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_controller">
<code class="descname">add_controller</code><span class="sig-paren">(</span><em>controller: psyneulink.core.components.mechanisms.adaptive.modulatorymechanism.ModulatoryMechanism</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an <a class="reference internal" href="OptimizationControlMechanism.html"><span class="doc">OptimizationControlMechanism</span></a> as the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> of the Composition, which gives the OCM access to the
<a class="reference internal" href="#"><span class="doc">Composition</span></a>’s <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.evaluate" title="psyneulink.core.compositions.composition.Composition.evaluate"><code class="xref any py py-meth docutils literal"><span class="pre">evaluate</span></code></a> method. This allows the OCM to use simulations to determine
an optimal Control policy.</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway">
<code class="descname">add_linear_learning_pathway</code><span class="sig-paren">(</span><em>pathway</em>, <em>learning_function</em>, <em>learning_rate=0.05</em>, <em>error_function=(LinearCombination LinearCombination Function-7)</em>, <em>learning_update: &lt;typecheck.tc_predicates.any object at 0x112cfdf60&gt; = 'online'</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement learning pathway (including necessary <a class="reference internal" href="#composition-learning-components"><span class="std std-ref">learning components</span></a>.</p>
<p>Generic method for implementing a learning pathway.  Calls <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_processing_pathway</span></code></a> to implement
the processing components including, if necessary, the MappingProjections between Mechanisms.  All of the
MappingProjections (whether specified or created) are subject to learning (and are assigned as the
<code class="xref any docutils literal"><span class="pre">learned_projection</span></code> attribute of the <code class="xref any docutils literal"><span class="pre">LearningMechanisms</span></code> created for the pathway.</p>
<p>If <strong>learning_function</strong> is a sublcass of <a class="reference internal" href="LearningFunctions.html"><span class="doc">LearningFunction</span></a>, a class-specific
<a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning method</span></a> is called.  Some may allow the error_function
to be specified, in which case it must be compatible with the class of LearningFunction specified.</p>
<p>If <strong>learning_function</strong> an instantiated function, it is assigned to all of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a> created for the MappingProjections in the pathway.  A <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> is
created to compute the error for the pathway, and assigned the function specified in <strong>error_function</strong>,
which must be compatible with <strong>learning_function</strong>.</p>
<p>See <a class="reference internal" href="#composition-learning"><span class="std std-ref">Learning in a Composition</span></a> for for a more detailed description of how learning is implemented in a
Composition, including the <code class="xref any docutils literal"><span class="pre">learning</span> <span class="pre">components</span></code> &lt;Composition_Learning_Components&gt;` that are created,
as well as other <a class="reference internal" href="#composition-learning-methods"><span class="std std-ref">learning methods</span></a> that can be used to implement specific
algorithms.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pathway</strong> (<em>List</em>) – list containing either [Node1, Node2] or [Node1, MappingProjection, Node2]. If a projection is
specified, that projection is the learned projection. Otherwise, a default MappingProjection is
automatically generated for the learned projection.</li>
<li><strong>learning_rate</strong> (<em>float : default 0.05</em>) – specifies the <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_rate" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_rate"><code class="xref any py py-attr docutils literal"><span class="pre">learning_rate</span></code></a> used for the <strong>learning_function</strong>
of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> in the <strong>pathway</strong>.</li>
<li><strong>error_function</strong> (<em>function : default LinearCombination</em>) – <p>specifies the function assigned to Mechanism used to compute the error from the target and the output
(<a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a>) of the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.TARGET" title="psyneulink.core.globals.utilities.NodeRole.TARGET"><code class="xref any py py-attr docutils literal"><span class="pre">TARGET</span></code></a> Mechanism in the <strong>pathway</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For most learning algorithms (and by default), a <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> is used to compute the error.
However, some learning algorithms may use a different Mechanism (e.g., for <code class="xref any docutils literal"><span class="pre">TDlearning</span></code> a
<a class="reference internal" href="PredictionErrorMechanism.html"><span class="doc">PredictionErrorMechanism</span></a> is used, which uses as its fuction <a class="reference internal" href="CombinationFunctions.html#psyneulink.core.components.functions.combinationfunctions.PredictionErrorDeltaFunction" title="psyneulink.core.components.functions.combinationfunctions.PredictionErrorDeltaFunction"><code class="xref any py py-class docutils literal"><span class="pre">PredictionErrorDeltaFunction</span></code></a>.</p>
</div>
</li>
<li><strong>learning_update</strong> (<em>Optional</em><em>[</em><em>bool|ONLINE|AFTER</em><em>] </em><em>: default AFTER</em>) – specifies when the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of the <a class="reference internal" href="KohonenMechanism.html#psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection" title="psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection"><code class="xref any py py-attr docutils literal"><span class="pre">learned_projection</span></code></a> is updated
in each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> when the Composition executes;  it is assigned as the default value for the
<a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> attribute of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanism</span></a> in the pathway, and its <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> (see <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> for meaning of values).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>A dictionary of components that were automatically generated and added to the Composition in order to</em></li>
<li><em>implement ReinforcementLearning in the pathway.</em></li>
<li><strong>{LEARNING_MECHANISM</strong> (<em>learning_mechanism,</em>) – COMPARATOR_MECHANISM: comparator,
TARGET_MECHANISM: target,
LEARNED_PROJECTION: learned_projection}</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway">
<code class="descname">add_linear_processing_pathway</code><span class="sig-paren">(</span><em>pathway</em>, <em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_linear_processing_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Add sequence of Mechanisms or Compositions possibly with intercolated Projections</p>
<p>A <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjection</span></a> is created for each contiguous pair of <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> and/or Compositions
in the <strong>pathway</strong> argument, from the <a class="reference internal" href="OutputState.html#outputstate-primary"><span class="std std-ref">primary OutputState</span></a> of the first one to the
<a class="reference internal" href="InputState.html#inputstate-primary"><span class="std std-ref">primary InputState</span></a> of the second.</p>
<p>Tuples (Mechanism, <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRoles</span></code></a>) can be used to assign <code class="xref any docutils literal"><span class="pre">required_roles</span></code> to Mechanisms.</p>
<p>Note that any specifications of a ControlMechanism’s <strong>monitor_for_control</strong> <a class="reference internal" href="ControlMechanism.html#controlmechanism-monitor-for-control-argument"><span class="std std-ref">argument</span></a> or the <strong>monitor</strong> argument specified in the constructor for an
ObjectiveMechanism in the <strong>objective_mechanism</strong> <a class="reference internal" href="ControlMechanism.html#controlmechanism-objective-mechanism-argument"><span class="std std-ref">argument</span></a>
supercede any MappingProjections that would otherwise be created for them when specified in the <strong>pathway</strong>
argument.</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_node">
<code class="descname">add_node</code><span class="sig-paren">(</span><em>node</em>, <em>required_roles=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a Composition Node (<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> or <a class="reference internal" href="#"><span class="doc">Composition</span></a>) to the Composition, if it is not already added</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>node</strong> (<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> or <a class="reference internal" href="#"><span class="doc">Composition</span></a>) – the node to be added to the Composition</li>
<li><strong>required_roles</strong> (<a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> or list of NodeRoles) – any NodeRoles roles that this node should have in addition to those determined by analyze graph.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_nodes">
<code class="descname">add_nodes</code><span class="sig-paren">(</span><em>nodes</em>, <em>required_roles=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a list of Composition Nodes (<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> or <a class="reference internal" href="#"><span class="doc">Composition</span></a>) to the Composition,</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>nodes</strong> (<em>list</em>) – the nodes to be added to the Composition.  Each item of the list must be a <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a>,
a <a class="reference internal" href="#"><span class="doc">Composition</span></a> or a role-specification tuple with a Mechanism or Composition as the first item,
and a <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> or list of those as the second item;  any NodeRoles in a role-specification tuple
are applied in addition to those specified in the <strong>required_roles</strong> argument.</li>
<li><strong>required_roles</strong> (<a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> or list of NodeRoles) – NodeRoles to assign to the nodes in addition to those determined by analyze graph;
these apply to any items in the list of nodes that are not in a tuple;  these apply to any specified
in any role-specification tuples in the <strong>nodes</strong> argument.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_pathway">
<code class="descname">add_pathway</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an existing Pathway to the current Composition</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>the Pathway</em><em> (</em><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition" title="psyneulink.core.compositions.composition.Composition"><em>Composition</em></a><em>) </em><em>to be added</em>) – </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_projection">
<code class="descname">add_projection</code><span class="sig-paren">(</span><em>projection=None</em>, <em>sender=None</em>, <em>receiver=None</em>, <em>feedback=False</em>, <em>learning_projection=False</em>, <em>name=None</em>, <em>allow_duplicates=False</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_projection" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <strong>projection</strong> to the Composition, if one with the same sender and receiver doesn’t already exist.</p>
<p>If <strong>projection</strong> is not specified, create a default <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjection</span></a> using <strong>sender</strong> and <strong>receiver</strong>.</p>
<p>If <strong>projection</strong> is specified:</p>
<ul class="simple">
<li>if <strong>projection</strong> has already been instantiated, and <strong>sender</strong> and <strong>receiver</strong> are also specified,
they must match the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.sender" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> and <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.receiver" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a>
of <strong>projection</strong>.</li>
<li>if the status of <strong>projection</strong> is <code class="xref any docutils literal"><span class="pre">deferred_init</span></code>:<ul>
<li>if its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> and/or <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a> attributes are not
specified, then <strong>sender</strong> and/or <strong>receiver</strong> are used.</li>
<li>if <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> and/or <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a> attributes are specified,
they must match <strong>sender</strong> and/or <strong>receiver</strong> if those have also been specified.</li>
<li>if a Projection between the specified sender and receiver does <em>not</em> already exist, it is initialized; if
it <em>does</em> already exist, the request to add it is ignored, however requests to shadow it and/or mark it as
a`feedback` Projection are implemented (in case it has not already been done for the existing Projection).</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <strong>projection</strong> is an instantiated projection (i.e., not in <code class="xref any docutils literal"><span class="pre">deferred_init</span></code>) and one already exists between
its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> and <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a> a warning is generated.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sender</strong> (<em>Mechanism</em><em>, </em><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition" title="psyneulink.core.compositions.composition.Composition"><em>Composition</em></a><em>, or </em><a class="reference internal" href="OutputState.html#psyneulink.core.components.states.outputstate.OutputState" title="psyneulink.core.components.states.outputstate.OutputState"><em>OutputState</em></a>) – the sender of <strong>projection</strong></li>
<li><strong>projection</strong> (<em>Projection</em><em>, </em><a class="reference internal" href="AutoAssociativeProjection.html#psyneulink.library.components.projections.pathway.autoassociativeprojection.AutoAssociativeProjection.matrix" title="psyneulink.library.components.projections.pathway.autoassociativeprojection.AutoAssociativeProjection.matrix"><em>matrix</em></a>) – the projection to add</li>
<li><strong>receiver</strong> (<em>Mechanism</em><em>, </em><a class="reference internal" href="#psyneulink.core.compositions.composition.Composition" title="psyneulink.core.compositions.composition.Composition"><em>Composition</em></a><em>, or </em><a class="reference internal" href="InputState.html#psyneulink.core.components.states.inputstate.InputState" title="psyneulink.core.components.states.inputstate.InputState"><em>InputState</em></a>) – the receiver of <strong>projection</strong></li>
<li><strong>feedback</strong> (<em>bool</em>) – When False (default) all Nodes within a cycle containing this Projection execute in parallel. This
means that each Projections within the cycle actually passes to its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a>
the <code class="xref any docutils literal"><span class="pre">value</span></code> of its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> from the previous execution.
When True, this Projection “breaks” the cycle, such that all Nodes execute in sequence, and only the
Projection marked as ‘feedback’ passes to its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a> the
<code class="xref any docutils literal"><span class="pre">value</span></code> of its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> from the previous execution.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">projection if added, else None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_projections">
<code class="descname">add_projections</code><span class="sig-paren">(</span><em>projections=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_projections" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_projection" title="psyneulink.core.compositions.composition.Composition.add_projection"><code class="xref any py py-meth docutils literal"><span class="pre">add_projection</span></code></a> for each Projection in the <em>projections</em> list. Each
Projection must have its <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.sender" title="psyneulink.core.components.projections.projection.Projection_Base.sender"><code class="xref any py py-attr docutils literal"><span class="pre">sender</span></code></a> and <a class="reference internal" href="Projection.html#psyneulink.core.components.projections.projection.Projection_Base.receiver" title="psyneulink.core.components.projections.projection.Projection_Base.receiver"><code class="xref any py py-attr docutils literal"><span class="pre">receiver</span></code></a>
already specified.  If an item in the list is a list of projections, called recursively on that list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>projections</strong> (<em>list of Projections</em>) – list of Projections to be added to the Composition</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway">
<code class="descname">add_reinforcement_learning_pathway</code><span class="sig-paren">(</span><em>pathway</em>, <em>learning_rate=0.05</em>, <em>error_function=None</em>, <em>learning_update: &lt;typecheck.tc_predicates.any object at 0x112d03080&gt; = 'online'</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_reinforcement_learning_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method that calls <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_learning_pathway</span></code></a> with <a href="#id6"><span class="problematic" id="id7">**</span></a>learning_function**=`Reinforcement`</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pathway</strong> (<em>List</em>) – list containing either [Node1, Node2] or [Node1, MappingProjection, Node2]. If a projection is
specified, that projection is the learned projection. Otherwise, a default MappingProjection is
automatically generated for the learned projection.</li>
<li><strong>learning_rate</strong> (<em>float : default 0.05</em>) – specifies the <code class="xref any docutils literal"><span class="pre">learning_rate</span></code> used for the <code class="xref any docutils literal"><span class="pre">ReinforcementLearning</span></code>
function of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> in the <strong>pathway</strong>.</li>
<li><strong>error_function</strong> (<em>function : default LinearCombination</em>) – specifies the function assigned to <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> used to compute the error from the target and
the output (<a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a>) of the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.TARGET" title="psyneulink.core.globals.utilities.NodeRole.TARGET"><code class="xref any py py-attr docutils literal"><span class="pre">TARGET</span></code></a> Mechanism in the <strong>pathway</strong>).</li>
<li><strong>learning_update</strong> (<em>Optional</em><em>[</em><em>bool|ONLINE|AFTER</em><em>] </em><em>: default AFTER</em>) – specifies when the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of the <a class="reference internal" href="KohonenMechanism.html#psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection" title="psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection"><code class="xref any py py-attr docutils literal"><span class="pre">learned_projection</span></code></a> is updated
in each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> when the Composition executes;  it is assigned as the default value for the
<a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> attribute of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanism</span></a> in the pathway, and its <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> (see <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> for meaning of values).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>A dictionary of components that were automatically generated and added to the Composition in order to</em></li>
<li><em>implement ReinforcementLearning in the pathway.</em></li>
<li><strong>{LEARNING_MECHANISM</strong> (<em>learning_mechanism,</em>) – COMPARATOR_MECHANISM: comparator,
TARGET_MECHANISM: target,
LEARNED_PROJECTION: learned_projection}</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.add_td_learning_pathway">
<code class="descname">add_td_learning_pathway</code><span class="sig-paren">(</span><em>pathway</em>, <em>learning_rate=0.05</em>, <em>error_function=None</em>, <em>learning_update: &lt;typecheck.tc_predicates.any object at 0x112d03240&gt; = 'online'</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.add_td_learning_pathway" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method that calls <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway" title="psyneulink.core.compositions.composition.Composition.add_linear_learning_pathway"><code class="xref any py py-meth docutils literal"><span class="pre">add_linear_learning_pathway</span></code></a> with <a href="#id8"><span class="problematic" id="id9">**</span></a>learning_function**=`TDLearning`</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pathway</strong> (<em>List</em>) – list containing either [Node1, Node2] or [Node1, MappingProjection, Node2]. If a projection is
specified, that projection is the learned projection. Otherwise, a default MappingProjection is
automatically generated for the learned projection.</li>
<li><strong>learning_rate</strong> (<em>float : default 0.05</em>) – specifies the <code class="xref any docutils literal"><span class="pre">learning_rate</span></code> used for the <a class="reference internal" href="LearningFunctions.html#psyneulink.core.components.functions.learningfunctions.TDLearning" title="psyneulink.core.components.functions.learningfunctions.TDLearning"><code class="xref any py py-class docutils literal"><span class="pre">TDLearning</span></code></a> function of the
<a class="reference internal" href="LearningMechanism.html"><span class="doc">Learning Mechanism</span></a> in the <strong>pathway</strong>.</li>
<li><strong>error_function</strong> (<em>function : default LinearCombination</em>) – specifies the function assigned to <a class="reference internal" href="ComparatorMechanism.html"><span class="doc">ComparatorMechanism</span></a> used to compute the error from the target and
the output (<a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a>) of the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.TARGET" title="psyneulink.core.globals.utilities.NodeRole.TARGET"><code class="xref any py py-attr docutils literal"><span class="pre">TARGET</span></code></a> Mechanism in the <strong>pathway</strong>).</li>
<li><strong>learning_update</strong> (<em>Optional</em><em>[</em><em>bool|ONLINE|AFTER</em><em>] </em><em>: default AFTER</em>) – specifies when the <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> parameter of the <a class="reference internal" href="KohonenMechanism.html#psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection" title="psyneulink.library.components.mechanisms.processing.transfer.kohonenmechanism.KohonenMechanism.learned_projection"><code class="xref any py py-attr docutils literal"><span class="pre">learned_projection</span></code></a> is updated
in each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> when the Composition executes;  it is assigned as the default value for the
<a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> attribute of the <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanism</span></a> in the pathway, and its <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> (see <a class="reference internal" href="LearningMechanism.html#psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled" title="psyneulink.core.components.mechanisms.adaptive.learning.learningmechanism.LearningMechanism.learning_enabled"><code class="xref any py py-attr docutils literal"><span class="pre">learning_enabled</span></code></a> for meaning of values).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>A dictionary of components that were automatically generated and added to the Composition in order to</em></li>
<li><em>implement TDLearning in the pathway.</em></li>
<li><strong>{LEARNING_MECHANISM</strong> (<em>learning_mechanism,</em>) – COMPARATOR_MECHANISM: comparator,
TARGET_MECHANISM: target,
LEARNED_PROJECTION: learned_projection}</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.default_external_input_values">
<code class="descname">default_external_input_values</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.default_external_input_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the default values of all external InputStates that belong to the Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.disable_all_history">
<code class="descname">disable_all_history</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.disable_all_history" title="Permalink to this definition">¶</a></dt>
<dd><p>When run, disables history tracking for all Parameters of all Components used in this Composition</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.evaluate">
<code class="descname">evaluate</code><span class="sig-paren">(</span><em>predicted_input=None</em>, <em>control_allocation=None</em>, <em>num_simulation_trials=None</em>, <em>runtime_params=None</em>, <em>base_context=&lt;psyneulink.core.globals.context.Context object&gt;</em>, <em>context=None</em>, <em>execution_mode=False</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a simulation of the <a class="reference internal" href="#"><span class="doc">Composition</span></a>, with the specified control_allocation, excluding its
<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> in order to return the
<a class="reference internal" href="ControlMechanism.html#psyneulink.core.components.mechanisms.adaptive.control.controlmechanism.ControlMechanism.net_outcome" title="psyneulink.core.components.mechanisms.adaptive.control.controlmechanism.ControlMechanism.net_outcome"><code class="xref any py py-attr docutils literal"><span class="pre">net_outcome</span></code></a> of the Composition, according to its
<a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.controller" title="psyneulink.core.compositions.composition.Composition.controller"><code class="xref any py py-attr docutils literal"><span class="pre">controller</span></code></a> under that control_allocation. All values are
reset to pre-simulation values at the end of the simulation.</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>inputs=None</em>, <em>autodiff_stimuli=None</em>, <em>scheduler_processing=None</em>, <em>termination_processing=None</em>, <em>call_before_time_step=None</em>, <em>call_before_pass=None</em>, <em>call_after_time_step=None</em>, <em>call_after_pass=None</em>, <em>context=None</em>, <em>base_context=&lt;psyneulink.core.globals.context.Context object&gt;</em>, <em>clamp_input='soft_clamp'</em>, <em>runtime_params=None</em>, <em>skip_initialization=False</em>, <em>bin_execute=False</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Passes inputs to any Nodes receiving inputs directly from the user (via the “inputs” argument) then
coordinates with the Scheduler to execute sets of nodes that are eligible to execute until
termination conditions are met.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>inputs</strong> ({ <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> or <a class="reference internal" href="#"><span class="doc">Composition</span></a> : list }) – a dictionary containing a key-value pair for each node in the composition that receives inputs from
the user. For each pair, the key is the node (Mechanism or Composition) and the value is an input,
the shape of which must match the node’s default variable.</li>
<li><strong>scheduler_processing</strong> (<a class="reference internal" href="Scheduler.html#psyneulink.core.scheduling.scheduler.Scheduler" title="psyneulink.core.scheduling.scheduler.Scheduler"><em>Scheduler</em></a>) – the scheduler object that owns the conditions that will instruct the execution of this Composition
If not specified, the Composition will use its automatically generated scheduler.</li>
<li><strong>context</strong> – context will be set to self.default_execution_id if unspecified</li>
<li><strong>base_context</strong> – the context corresponding to the execution context from which this execution will be initialized,
if values currently do not exist for <strong>context</strong></li>
<li><strong>call_before_time_step</strong> (<em>callable</em>) – called before each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TIME_STEP" title="psyneulink.core.scheduling.time.TimeScale.TIME_STEP"><code class="xref any py py-attr docutils literal"><span class="pre">TIME_STEP</span></code></a> is executed
passed the current <em>context</em> (but it is not necessary for your callable to take)</li>
<li><strong>call_after_time_step</strong> (<em>callable</em>) – called after each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TIME_STEP" title="psyneulink.core.scheduling.time.TimeScale.TIME_STEP"><code class="xref any py py-attr docutils literal"><span class="pre">TIME_STEP</span></code></a> is executed
passed the current <em>context</em> (but it is not necessary for your callable to take)</li>
<li><strong>call_before_pass</strong> (<em>callable</em>) – called before each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.PASS" title="psyneulink.core.scheduling.time.TimeScale.PASS"><code class="xref any py py-attr docutils literal"><span class="pre">PASS</span></code></a> is executed
passed the current <em>context</em> (but it is not necessary for your callable to take)</li>
<li><strong>call_after_pass</strong> (<em>callable</em>) – called after each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.PASS" title="psyneulink.core.scheduling.time.TimeScale.PASS"><code class="xref any py py-attr docutils literal"><span class="pre">PASS</span></code></a> is executed
passed the current <em>context</em> (but it is not necessary for your callable to take)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>output value of the final Mechanism executed in the Composition</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">various</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.external_input_states">
<code class="descname">external_input_states</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.external_input_states" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all external InputStates that belong to the Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.external_input_values">
<code class="descname">external_input_values</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.external_input_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns values of all external InputStates that belong to the Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.get_nodes_by_role">
<code class="descname">get_nodes_by_role</code><span class="sig-paren">(</span><em>role</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.get_nodes_by_role" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a List of Composition Nodes in this Composition that have the <em>role</em> specified</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>role</strong> (<a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><em>NodeRole</em></a>) – the List of nodes having this role to return</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>List of Composition Nodes with `NodeRole` *role*</strong> (List(<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> and)</li>
<li><a class="reference internal" href="#"><span class="doc">Compositions</span></a>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.graph_processing">
<code class="descname">graph_processing</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.graph_processing" title="Permalink to this definition">¶</a></dt>
<dd><p>The Composition’s processing graph (contains only <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Getter:</th><td class="field-body">Returns the processing graph, and builds the graph if it needs updating since the last access.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.input_state">
<code class="descname">input_state</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.input_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the index 0 InputState that belongs to the Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.input_states">
<code class="descname">input_states</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.input_states" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all InputStates that belong to the Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.input_values">
<code class="descname">input_values</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.input_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns values of all InputStates that belong to the Input CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.output_state">
<code class="descname">output_state</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.output_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the index 0 OutputState that belongs to the Output CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.output_states">
<code class="descname">output_states</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.output_states" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all OutputStates that belong to the Output CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.output_values">
<code class="descname">output_values</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.output_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns values of all OutputStates that belong to the Output CompositionInterfaceMechanism</p>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>inputs=None</em>, <em>scheduler_processing=None</em>, <em>termination_processing=None</em>, <em>num_trials=None</em>, <em>call_before_time_step=None</em>, <em>call_after_time_step=None</em>, <em>call_before_pass=None</em>, <em>call_after_pass=None</em>, <em>call_before_trial=None</em>, <em>call_after_trial=None</em>, <em>clamp_input='soft_clamp'</em>, <em>bin_execute=False</em>, <em>log=False</em>, <em>initial_values=None</em>, <em>reinitialize_values=None</em>, <em>runtime_params=None</em>, <em>skip_initialization=False</em>, <em>animate=False</em>, <em>context=None</em>, <em>base_context=&lt;psyneulink.core.globals.context.Context object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass inputs to Composition, then execute sets of nodes that are eligible to run until termination
conditions are met.  See <a class="reference internal" href="Run.html"><span class="doc">Run</span></a> for details of formatting input specifications. See <a class="reference internal" href="Run.html"><span class="doc">Run</span></a> for details of
formatting input specifications. Use <strong>animate</strong> to generate a gif of the execution sequence.</p>
<blockquote>
<div><dl class="docutils">
<dt>inputs: { <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanism</span></a> <span class="classifier-delimiter">:</span> <span class="classifier">list } or { <a class="reference internal" href="#"><span class="doc">Composition</span></a></span> <span class="classifier-delimiter">:</span> <span class="classifier">list }</span></dt>
<dd>a dictionary containing a key-value pair for each Node in the composition that receives inputs from
the user. For each pair, the key is the Node and the value is a list of inputs. Each input in the
list corresponds to a certain <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a>.</dd>
<dt>scheduler_processing <span class="classifier-delimiter">:</span> <span class="classifier">Scheduler</span></dt>
<dd>the scheduler object that owns the conditions that will instruct the execution of the Composition.
If not specified, the Composition will use its automatically generated scheduler.</dd>
<dt>context</dt>
<dd>context will be set to self.default_execution_id if unspecified</dd>
<dt>base_context</dt>
<dd>the context corresponding to the execution context from which this execution will be initialized,
if values currently do not exist for <strong>context</strong></dd>
<dt>num_trials <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>typically, the composition will infer the number of trials from the length of its input specification.
To reuse the same inputs across many trials, you may specify an input dictionary with lists of length 1,
or use default inputs, and select a number of trials with num_trials.</dd>
<dt>call_before_time_step <span class="classifier-delimiter">:</span> <span class="classifier">callable</span></dt>
<dd>will be called before each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TIME_STEP" title="psyneulink.core.scheduling.time.TimeScale.TIME_STEP"><code class="xref any py py-attr docutils literal"><span class="pre">TIME_STEP</span></code></a> is executed.</dd>
<dt>call_after_time_step <span class="classifier-delimiter">:</span> <span class="classifier">callable</span></dt>
<dd>will be called after each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TIME_STEP" title="psyneulink.core.scheduling.time.TimeScale.TIME_STEP"><code class="xref any py py-attr docutils literal"><span class="pre">TIME_STEP</span></code></a> is executed.</dd>
<dt>call_before_pass <span class="classifier-delimiter">:</span> <span class="classifier">callable</span></dt>
<dd>will be called before each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.PASS" title="psyneulink.core.scheduling.time.TimeScale.PASS"><code class="xref any py py-attr docutils literal"><span class="pre">PASS</span></code></a> is executed.</dd>
<dt>call_after_pass <span class="classifier-delimiter">:</span> <span class="classifier">callable</span></dt>
<dd>will be called after each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.PASS" title="psyneulink.core.scheduling.time.TimeScale.PASS"><code class="xref any py py-attr docutils literal"><span class="pre">PASS</span></code></a> is executed.</dd>
<dt>call_before_trial <span class="classifier-delimiter">:</span> <span class="classifier">callable</span></dt>
<dd>will be called before each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> is executed.</dd>
<dt>call_after_trial <span class="classifier-delimiter">:</span> <span class="classifier">callable</span></dt>
<dd>will be called after each <a class="reference internal" href="Time.html#psyneulink.core.scheduling.time.TimeScale.TRIAL" title="psyneulink.core.scheduling.time.TimeScale.TRIAL"><code class="xref any py py-attr docutils literal"><span class="pre">TRIAL</span></code></a> is executed.</dd>
<dt>initial_values <span class="classifier-delimiter">:</span> <span class="classifier">Dict[Node: Node Value]</span></dt>
<dd>sets the values of nodes before the start of the run. This is useful in cases where a node’s value is
used before that node executes for the first time (usually due to recurrence or control).</dd>
<dt>runtime_params <span class="classifier-delimiter">:</span> <span class="classifier">Dict[Node: Dict[Parameter: Tuple(Value, Condition)]]</span></dt>
<dd><p class="first">nested dictionary of (value, <a class="reference internal" href="Condition.html"><span class="doc">Condition</span></a>) tuples for parameters of Nodes (<a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> or
<a class="reference internal" href="#"><span class="doc">Compositions</span></a> of the Composition; specifies alternate parameter values to be used only
during this <a class="reference internal" href="Run.html"><span class="doc">Run</span></a> when the specified <a class="reference internal" href="Condition.html"><span class="doc">Condition</span></a> is met.</p>
<dl class="docutils">
<dt>Outer dictionary:</dt>
<dd><ul class="first last simple">
<li><em>key</em> - Node</li>
<li><em>value</em> - Runtime Parameter Specification Dictionary</li>
</ul>
</dd>
<dt>Runtime Parameter Specification Dictionary:</dt>
<dd><ul class="first last simple">
<li><em>key</em> - keyword corresponding to a parameter of the Node</li>
<li><em>value</em> - tuple in which the index 0 item is the runtime parameter value, and the index 1 item is
a <a class="reference internal" href="Condition.html"><span class="doc">Condition</span></a></li>
</ul>
</dd>
</dl>
<p class="last">See <a class="reference internal" href="Run.html#run-runtime-parameters"><span class="std std-ref">Runtime Parameters</span></a> for more details and examples of valid dictionaries.</p>
</dd>
<dt>animate <span class="classifier-delimiter">:</span> <span class="classifier">dict or bool</span> <span class="classifier-delimiter">:</span> <span class="classifier">False</span></dt>
<dd><p class="first">specifies use of the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> method to generate a gif movie showing the
sequence of Components executed in a run.  A dict can be specified containing options to pass to
the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> method;  each key must be a legal argument for the <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> method, and its value a specification for that argument.  The entries listed
below can also be included in the dict to specify parameters of the animation.  If the <strong>animate</strong>
argument is specified simply as <code class="xref any docutils literal"><span class="pre">True</span></code>, defaults are used for all arguments of <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a> and the options below:</p>
<ul class="last simple">
<li><em>UNIT</em>: <em>EXECUTION_SET</em> or <em>COMPONENT</em> (default=<em>EXECUTION_SET</em>) – specifies which Components
to treat as active in each call to <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="psyneulink.core.compositions.composition.Composition.show_graph"><code class="xref any py py-meth docutils literal"><span class="pre">show_graph</span></code></a>. <em>COMPONENT</em> generates an
image for the execution of each Component.  <em>EXECUTION_SET</em> generates an image for each <code class="xref any docutils literal"><span class="pre">execution_set</span></code>, showing all of the Components in that set as active.</li>
<li><em>DURATION</em>: float (default=0.75) – specifies the duration (in seconds) of each image in the movie.</li>
<li><em>NUM_RUNS</em>: int (default=1) – specifies the number of runs to animate;  by default, this is 1.
If the number specified is less than the total number of runs executed, only the number specified
are animated; if it is greater than the number of runs being executed, only the number being run are
animated.</li>
<li><em>NUM_TRIALS</em>: int (default=1) – specifies the number of trials to animate;  by default, this is 1.
If the number specified is less than the total number of trials being run, only the number specified
are animated; if it is greater than the number of trials being run, only the number being run are
animated.</li>
<li><em>MOVIE_DIR</em>: str (default=project root dir) – specifies the directdory to be used for the movie file;
by default a subdirectory of &lt;root_dir&gt;/show_graph_OUTPUT/GIFS is created using the <code class="xref any docutils literal"><span class="pre">name</span></code> of the  <a class="reference internal" href="#"><span class="doc">Composition</span></a>, and the gif files are stored there.</li>
<li><em>MOVIE_NAME</em>: str (default=<code class="xref any docutils literal"><span class="pre">name</span></code> + ‘movie’) – specifies the name to be used for
the movie file; it is automatically appended with ‘.gif’.</li>
<li><em>SAVE_IMAGES</em>: bool (default=<code class="xref any docutils literal"><span class="pre">False</span></code>) – specifies whether to save each of the images used to
construct the animation in separate gif files, in addition to the file containing the animation.</li>
<li><em>SHOW</em>: bool (default=<code class="xref any docutils literal"><span class="pre">False</span></code>) – specifies whether to show the animation after it is
constructed, using the OS’s default viewer.</li>
</ul>
</dd>
<dt>log <span class="classifier-delimiter">:</span> <span class="classifier">bool, LogCondition</span></dt>
<dd><p class="first">Sets the <a class="reference internal" href="Parameters.html#psyneulink.core.globals.parameters.Parameter.log_condition" title="psyneulink.core.globals.parameters.Parameter.log_condition"><code class="xref any py py-attr docutils literal"><span class="pre">log_condition</span></code></a> for every primary <a class="reference internal" href="#psyneulink.core.compositions.composition.Composition.nodes" title="psyneulink.core.compositions.composition.Composition.nodes"><code class="xref any py py-attr docutils literal"><span class="pre">node</span></code></a> and
<code class="xref any docutils literal"><span class="pre">projection</span></code> in this Composition, if it is not already set.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">as when setting the <a class="reference internal" href="Parameters.html#psyneulink.core.globals.parameters.Parameter.log_condition" title="psyneulink.core.globals.parameters.Parameter.log_condition"><code class="xref any py py-attr docutils literal"><span class="pre">log_condition</span></code></a> directly, a value of <code class="xref any docutils literal"><span class="pre">True</span></code> will
correspond to the <code class="xref any docutils literal"><span class="pre">EXECUTION</span> <span class="pre">LogCondition</span></code>.</p>
</div>
</dd>
</dl>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>output value of the final Node executed in the composition</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">various</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.scheduler_processing">
<code class="descname">scheduler_processing</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.scheduler_processing" title="Permalink to this definition">¶</a></dt>
<dd><p>A default <a class="reference internal" href="Scheduler.html"><span class="doc">Scheduler</span></a> automatically generated by the Composition, used for the
(<a class="reference internal" href="System.html#system-execution-processing"><span class="std std-ref">processing</span></a> phase of execution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Getter:</th><td class="field-body">Returns the default processing scheduler, and builds it if it needs updating since the last access.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="psyneulink.core.compositions.composition.Composition.show_graph">
<code class="descname">show_graph</code><span class="sig-paren">(</span><em>show_node_structure=False</em>, <em>show_nested=True</em>, <em>show_controller=False</em>, <em>show_cim=False</em>, <em>show_learning=False</em>, <em>show_headers=True</em>, <em>show_dimensions=False</em>, <em>show_projection_labels=False</em>, <em>direction='BT'</em>, <em>active_items=None</em>, <em>active_color=BOLD</em>, <em>input_color='green'</em>, <em>output_color='red'</em>, <em>input_and_output_color='brown'</em>, <em>controller_color='blue'</em>, <em>composition_color='pink'</em>, <em>feedback_shape = 'septagon'</em>, <em>cim_shape='square'</em>, <em>output_fmt='pdf'</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.show_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Show graphical display of Components in a Composition’s graph.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method relies on <a class="reference external" href="http://www.graphviz.org">graphviz</a>, which must be installed and imported
(standard with PsyNeuLink pip install)</p>
</div>
<p>See <a class="reference internal" href="#composition-visualization"><span class="std std-ref">Visualizing a Composition</span></a> for details and examples.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>show_node_structure</strong> (<em>bool</em><em>, </em><em>VALUES</em><em>, </em><em>LABELS</em><em>, </em><em>FUNCTIONS</em><em>, </em><em>MECH_FUNCTION_PARAMS</em><em>, </em><em>STATE_FUNCTION_PARAMS</em><em>, </em><em>ROLES</em><em>,         or </em><em>ALL : default False</em>) – <p>show a detailed representation of each <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> in the graph, including its <a class="reference internal" href="State.html"><span class="doc">States</span></a>;  can
have any of the following settings alone or in a list:</p>
<ul>
<li><code class="xref any docutils literal"><span class="pre">True</span></code> – show States of Mechanism, but not information about the <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.value" title="psyneulink.core.components.component.Component.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> or <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.function" title="psyneulink.core.components.component.Component.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> of the Mechanism or its States.</li>
<li><em>VALUES</em> – show the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of the Mechanism and the <a class="reference internal" href="State.html#psyneulink.core.components.states.state.State_Base.value" title="psyneulink.core.components.states.state.State_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of each of its States.</li>
<li><em>LABELS</em> – show the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of the Mechanism and the <a class="reference internal" href="State.html#psyneulink.core.components.states.state.State_Base.value" title="psyneulink.core.components.states.state.State_Base.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of each of its States, using any labels for the values of InputStates and
OutputStates specified in the Mechanism’s <code class="xref any docutils literal"><span class="pre">input_labels_dict</span></code> and
<code class="xref any docutils literal"><span class="pre">output_labels_dict</span></code>, respectively.</li>
<li><em>FUNCTIONS</em> – show the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> of the Mechanism and the <a class="reference internal" href="State.html#psyneulink.core.components.states.state.State_Base.function" title="psyneulink.core.components.states.state.State_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> of its InputStates and OutputStates.</li>
<li><em>MECH_FUNCTION_PARAMS_</em> – show the parameters of the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> for each
Mechanism in the Composition (only applies if <em>FUNCTIONS</em> is True).</li>
<li><em>STATE_FUNCTION_PARAMS_</em> – show the parameters of the <a class="reference internal" href="Mechanism.html#psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function" title="psyneulink.core.components.mechanisms.mechanism.Mechanism_Base.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a> for each
State of each Mechanism in the Composition (only applies if <em>FUNCTIONS</em> is True).</li>
<li><em>ROLES</em> – show the <code class="xref any docutils literal"><span class="pre">role</span></code> of the Mechanism in the Composition
(but not any of the other information;  use <em>ALL</em> to show ROLES with other information).</li>
<li><em>ALL</em> – shows the role, <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.function" title="psyneulink.core.components.component.Component.function"><code class="xref any py py-attr docutils literal"><span class="pre">function</span></code></a>, and <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.value" title="psyneulink.core.components.component.Component.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of the
Mechanisms in the <a class="reference internal" href="#"><span class="doc">Composition</span></a> and their <a class="reference internal" href="State.html"><span class="doc">States</span></a> (using labels for
the values, if specified – see above), including parameters for all functions.</li>
</ul>
</li>
<li><strong>show_nested</strong> (<em>bool | dict : default ALL</em>) – specifies whether any nested Composition(s) are shown in details as inset graphs.  A dict can be used to
specify any of the arguments allowed for show_graph to be used for the nested Composition(s);  <em>ALL</em>
passes all arguments specified for the main Composition to the nested one(s);  True uses the default
values of show_graph args for the nested Composition(s).</li>
<li><strong>show_controller</strong> (<em>bool : default False</em>) – specifies whether or not to show the Composition’s controller and associated ObjectiveMechanism;
these are displayed in the color specified for <strong>controller_color</strong>.</li>
<li><strong>show_cim</strong> (<em>bool : default False</em>) – specifies whether or not to show the Composition’s input and out CompositionInterfaceMechanisms (CIMs)</li>
<li><strong>show_learning</strong> (<em>bool</em><em> or </em><em>ALL : default False</em>) – specifies whether or not to show the learning components of the Compositoin;
they will all be displayed in the color specified for <strong>learning_color</strong>.
Projections that receive a <a class="reference internal" href="LearningProjection.html"><span class="doc">LearningProjection</span></a> will be shown as a diamond-shaped node.
If set to <em>ALL</em>, all Projections associated with learning will be shown:  the LearningProjections
as well as from <a class="reference internal" href="ProcessingMechanism.html"><span class="doc">ProcessingMechanisms</span></a> to <a class="reference internal" href="LearningMechanism.html"><span class="doc">LearningMechanisms</span></a>
that convey error and activation information;  if set to <code class="xref any docutils literal"><span class="pre">True</span></code>, only the LearningPojections are shown.</li>
<li><strong>show_projection_labels</strong> (<em>bool : default False</em>) – specifies whether or not to show names of projections.</li>
<li><strong>show_headers</strong> (<em>bool : default True</em>) – specifies whether or not to show headers in the subfields of a Mechanism’s node;  only takes effect if
<strong>show_node_structure</strong> is specified (see above).</li>
<li><strong>show_dimensions</strong> (<em>bool : default False</em>) – <p>specifies whether or not to show dimensions for the <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.variable" title="psyneulink.core.components.component.Component.variable"><code class="xref any py py-attr docutils literal"><span class="pre">variable</span></code></a> and <a class="reference internal" href="Component.html#psyneulink.core.components.component.Component.value" title="psyneulink.core.components.component.Component.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of each Component in the graph (and/or MappingProjections when show_learning
is <code class="xref any docutils literal"><span class="pre">True</span></code>);  can have the following settings:</p>
<ul>
<li><em>MECHANISMS</em> – shows <a class="reference internal" href="Mechanism.html"><span class="doc">Mechanisms</span></a> input and output dimensions.  Input dimensions are shown in parentheses
below the name of the Mechanism; each number represents the dimension of the <a class="reference internal" href="InputState.html#psyneulink.core.components.states.inputstate.InputState.variable" title="psyneulink.core.components.states.inputstate.InputState.variable"><code class="xref any py py-attr docutils literal"><span class="pre">variable</span></code></a> for each <a class="reference internal" href="InputState.html"><span class="doc">InputState</span></a> of the Mechanism; Output dimensions are shown above
the name of the Mechanism; each number represents the dimension for <a class="reference internal" href="OutputState.html#psyneulink.core.components.states.outputstate.OutputState.value" title="psyneulink.core.components.states.outputstate.OutputState.value"><code class="xref any py py-attr docutils literal"><span class="pre">value</span></code></a> of each
of <a class="reference internal" href="OutputState.html"><span class="doc">OutputState</span></a> of the Mechanism.</li>
<li><em>PROJECTIONS</em> – shows <a class="reference internal" href="MappingProjection.html"><span class="doc">MappingProjection</span></a> <a class="reference internal" href="MappingProjection.html#psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix" title="psyneulink.core.components.projections.pathway.mappingprojection.MappingProjection.matrix"><code class="xref any py py-attr docutils literal"><span class="pre">matrix</span></code></a> dimensions.  Each is
shown in (&lt;dim&gt;x&lt;dim&gt;…) format;  for standard 2x2 “weight” matrix, the first entry is the number of
rows (input dimension) and the second the number of columns (output dimension).</li>
<li><em>ALL</em> – eqivalent to <code class="xref any docutils literal"><span class="pre">True</span></code>; shows dimensions for both Mechanisms and Projections (see above for
formats).</li>
</ul>
</li>
<li><strong>direction</strong> (<em>keyword : default 'BT'</em>) – ‘BT’: bottom to top; ‘TB’: top to bottom; ‘LR’: left to right; and ‘RL`: right to left.</li>
<li><strong>active_items</strong> (<em>List</em><em>[</em><a class="reference internal" href="Component.html#psyneulink.core.components.component.Component" title="psyneulink.core.components.component.Component"><em>Component</em></a><em>] </em><em>: default None</em>) – specifies one or more items in the graph to display in the color specified by <em>active_color*</em>.</li>
<li><strong>active_color</strong> (<em>keyword : default 'yellow'</em>) – specifies how to highlight the item(s) specified in <em>active_items*</em>:  either a color recognized
by GraphViz, or the keyword <em>BOLD</em>.</li>
<li><strong>input_color</strong> (<em>keyword : default 'green'</em><em>,</em>) – specifies the display color for <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.INPUT" title="psyneulink.core.globals.utilities.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> Nodes in the Composition</li>
<li><strong>output_color</strong> (<em>keyword : default 'red'</em><em>,</em>) – specifies the display color for <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.OUTPUT" title="psyneulink.core.globals.utilities.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Nodes in the Composition</li>
<li><strong>input_and_output_color</strong> (<em>keyword : default 'brown'</em>) – specifies the display color of nodes that are both an <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.INPUT" title="psyneulink.core.globals.utilities.NodeRole.INPUT"><code class="xref any py py-attr docutils literal"><span class="pre">INPUT</span></code></a> and an <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.OUTPUT" title="psyneulink.core.globals.utilities.NodeRole.OUTPUT"><code class="xref any py py-attr docutils literal"><span class="pre">OUTPUT</span></code></a> Node in the Composition</li>
<li><strong>controller_color</strong> (<em>keyword : default 'blue'</em>) – specifies the color in which the controller components are displayed</li>
<li><strong>learning_color</strong> (<em>keyword : default 'orange'</em>) – specifies the color in which the learning components are displayed</li>
<li><strong>composition_color</strong> (<em>keyword : default 'brown'</em>) – specifies the display color of nodes that represent nested Compositions.</li>
<li><strong>feedback_shape</strong> (<em>keyword : default 'septagon'</em>) – specifies the display shape of nodes that are assigned the <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole" title="psyneulink.core.globals.utilities.NodeRole"><code class="xref any py py-class docutils literal"><span class="pre">NodeRole</span></code></a> <a class="reference internal" href="Utilities.html#psyneulink.core.globals.utilities.NodeRole.FEEDBACK_SENDER" title="psyneulink.core.globals.utilities.NodeRole.FEEDBACK_SENDER"><code class="xref any py py-attr docutils literal"><span class="pre">FEEDBACK_SENDER</span></code></a>.</li>
<li><strong>cim_shape</strong> (<em>default 'square'</em>) – specifies the display color input_CIM and output_CIM nodes</li>
<li><strong>output_fmt</strong> (<em>keyword : default 'pdf'</em>) – ‘pdf’: generate and open a pdf with the visualization;
‘jupyter’: return the object (for working in jupyter/ipython notebooks);
‘gv’: return graphviz object
‘gif’: return gif used for animation</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>display of Composition</strong> – PDF: (placed in current directory) if <code class="xref std std-keyword docutils literal"><span class="pre">output_fmt</span></code> arg is ‘pdf’;
Graphviz graph object if <code class="xref std std-keyword docutils literal"><span class="pre">output_fmt</span></code> arg is ‘gv’ or ‘jupyter’;
gif if <code class="xref std std-keyword docutils literal"><span class="pre">output_fmt</span></code> arg is ‘gif’.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref any docutils literal"><span class="pre">pdf</span></code> or Graphviz graph object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="psyneulink.core.compositions.composition.Composition.stateful_nodes">
<code class="descname">stateful_nodes</code><a class="headerlink" href="#psyneulink.core.compositions.composition.Composition.stateful_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>List of all nodes in the system that are currently marked as stateful. For Mechanisms, statefulness is
determined by checking whether node.has_initializers is True. For Compositions, statefulness is determined
by checking whether any of its nodes are stateful.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>all stateful nodes in the system</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">List[Nodes]</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="CompositionFunctionApproximator.html" class="btn btn-neutral float-right" title="CompositionFunctionApproximator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="LearningFunctions.html" class="btn btn-neutral float-left" title="LearningFunctions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Jonathan D. Cohen

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>